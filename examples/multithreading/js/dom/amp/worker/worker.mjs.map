{"version":3,"file":"worker.mjs","sources":["../../../output/worker-thread/strings.js","../../../output/worker-thread/phase.js","../../../output/worker-thread/nodes.js","../../../output/worker-thread/MutationTransfer.js","../../../output/worker-thread/amp/amp.js","../../../output/utils.js","../../../output/worker-thread/MutationObserver.js","../../../output/worker-thread/dom/Node.js","../../../output/worker-thread/dom/CharacterData.js","../../../output/worker-thread/dom/Comment.js","../../../output/worker-thread/dom/DOMTokenList.js","../../../output/worker-thread/dom/matchElements.js","../../../output/worker-thread/dom/ParentNode.js","../../../output/worker-thread/dom/Attr.js","../../../output/worker-thread/css/CSSStyleDeclaration.js","../../../output/worker-thread/dom/enhanceElement.js","../../../output/transfer/TransferrableNodes.js","../../../output/third_party/html-parser/html-parser.js","../../../output/worker-thread/dom/Element.js","../../../output/worker-thread/dom/HTMLElement.js","../../../output/worker-thread/dom/HTMLAnchorElement.js","../../../output/worker-thread/dom/HTMLButtonElement.js","../../../output/worker-thread/serializeTransferrableObject.js","../../../output/worker-thread/canvas/CanvasGradient.js","../../../output/worker-thread/canvas/CanvasPattern.js","../../../output/worker-thread/canvas/OffscreenCanvasPolyfill.js","../../../output/worker-thread/canvas/canvas-utils.js","../../../output/worker-thread/canvas/FakeNativeCanvasPattern.js","../../../output/worker-thread/canvas/CanvasRenderingContext2D.js","../../../output/worker-thread/dom/HTMLCanvasElement.js","../../../output/worker-thread/dom/HTMLDataElement.js","../../../output/worker-thread/dom/HTMLDataListElement.js","../../../output/worker-thread/dom/HTMLEmbedElement.js","../../../output/worker-thread/dom/HTMLFormControlsMixin.js","../../../output/worker-thread/dom/HTMLFieldSetElement.js","../../../output/worker-thread/dom/HTMLFormElement.js","../../../output/worker-thread/dom/HTMLIFrameElement.js","../../../output/worker-thread/dom/HTMLImageElement.js","../../../output/worker-thread/dom/HTMLInputLabelsMixin.js","../../../output/worker-thread/dom/HTMLInputElement.js","../../../output/worker-thread/dom/HTMLLabelElement.js","../../../output/worker-thread/dom/HTMLLinkElement.js","../../../output/worker-thread/dom/HTMLMapElement.js","../../../output/worker-thread/dom/HTMLMeterElement.js","../../../output/worker-thread/dom/HTMLModElement.js","../../../output/worker-thread/dom/HTMLOListElement.js","../../../output/worker-thread/dom/HTMLOptionElement.js","../../../output/worker-thread/dom/HTMLProgressElement.js","../../../output/worker-thread/dom/HTMLQuoteElement.js","../../../output/worker-thread/dom/HTMLScriptElement.js","../../../output/worker-thread/dom/HTMLSelectElement.js","../../../output/worker-thread/dom/HTMLSourceElement.js","../../../output/worker-thread/dom/HTMLStyleElement.js","../../../output/worker-thread/dom/HTMLTableCellElement.js","../../../output/worker-thread/dom/HTMLTableColElement.js","../../../output/worker-thread/dom/HTMLTableElement.js","../../../output/worker-thread/dom/HTMLTableRowElement.js","../../../output/worker-thread/dom/HTMLTableSectionElement.js","../../../output/worker-thread/dom/HTMLTimeElement.js","../../../output/worker-thread/dom/Text.js","../../../output/worker-thread/dom/DocumentFragment.js","../../../output/worker-thread/Event.js","../../../output/worker-thread/SyncValuePropagation.js","../../../output/worker-thread/ResizePropagation.js","../../../output/worker-thread/dom/Document.js","../../../output/worker-thread/dom/SVGElement.js","../../../output/worker-thread/Storage.js","../../../output/worker-thread/initialize.js","../../../output/worker-thread/long-task.js","../../../output/worker-thread/index.amp.js"],"sourcesContent":["/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Stores a string in mapping and returns the index of the location.\n * @param value string to store\n * @return location in map\n */\nexport function store(value) {\n    if (mapping.has(value)) {\n        // Safe to cast since we verified the mapping contains the value\n        return mapping.get(value);\n    }\n    mapping.set(value, count);\n    transfer.push(value);\n    return count++;\n}\n/**\n * Retrieve the index for a string (mostly used for tests).\n * @param value string value we need to know the index of\n * @returns index in the map for the string\n */\nexport function getForTesting(value) {\n    return mapping.get(value);\n}\n/**\n * Returns strings registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const strings = transfer;\n    transfer = [];\n    return strings;\n}\n//# sourceMappingURL=strings.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport let phase = 0 /* Initializing */;\nexport const set = (newPhase) => (phase = newPhase);\n//# sourceMappingURL=phase.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { phase } from './phase';\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Override the store for a node during the initialization phase.\n * @param node Node to store and modify with index\n * @param override Override number to use as the identifier.\n *\n * NOTE: THIS IS ONLY TO BE USED DURING INITIALIZATION.\n */\nexport function storeOverride(node, override) {\n    if (phase === 0 /* Initializing */) {\n        mapping.set((node[7 /* index */] = override), node);\n        count = Math.max(count, override);\n    }\n    return override;\n}\n/**\n * Stores a node in mapping, and makes the index available on the Node directly.\n * @param node Node to store and modify with index\n * @return index Node was stored with in mapping\n */\nexport function store(node) {\n    if (node[7 /* index */] !== undefined) {\n        return node[7 /* index */];\n    }\n    mapping.set((node[7 /* index */] = ++count), node);\n    if (phase > 0 /* Initializing */) {\n        // After Initialization, include all future dom node creation into the list for next transfer.\n        transfer.push(node);\n    }\n    return count;\n}\n/**\n * Retrieves a node based on an index.\n * @param index location in map to retrieve a Node for\n * @return either the Node represented in index position, or null if not available.\n */\nexport function get(index) {\n    // mapping has a 1 based index, since on first store we ++count before storing.\n    return (!!index && mapping.get(index)) || null;\n}\n/**\n * Returns nodes registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const copy = transfer;\n    transfer = [];\n    return copy;\n}\n//# sourceMappingURL=nodes.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { consume as consumeNodes } from './nodes';\nimport { consume as consumeStrings } from './strings';\nimport { phase, set as setPhase } from './phase';\nlet pending = false;\nlet pendingMutations = [];\n// TODO(choumx): Change `mutation` to Array<Uint16> to prevent casting errors e.g. integer underflow, precision loss.\nexport function transfer(document, mutation) {\n    if (phase > 0 /* Initializing */ && document[58 /* allowTransfer */]) {\n        pending = true;\n        pendingMutations = pendingMutations.concat(mutation);\n        Promise.resolve().then(_ => {\n            if (pending) {\n                const nodes = new Uint16Array(consumeNodes().reduce((acc, node) => acc.concat(node[8 /* creationFormat */]), [])).buffer;\n                const mutations = new Uint16Array(pendingMutations).buffer;\n                document.postMessage({\n                    [54 /* phase */]: phase,\n                    [12 /* type */]: phase === 2 /* Mutating */ ? 3 /* MUTATE */ : 2 /* HYDRATE */,\n                    [37 /* nodes */]: nodes,\n                    [41 /* strings */]: consumeStrings(),\n                    [36 /* mutations */]: mutations,\n                }, [nodes, mutations]);\n                pendingMutations = [];\n                pending = false;\n                setPhase(2 /* Mutating */);\n            }\n        });\n    }\n}\n//# sourceMappingURL=MutationTransfer.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from '../strings';\nimport { transfer } from '../MutationTransfer';\nexport class AMP {\n    constructor(document) {\n        this.document = document;\n    }\n    /**\n     * Returns a promise that resolves with the value of `key`.\n     * @param key\n     */\n    getState(key) {\n        return new Promise(resolve => {\n            const messageHandler = (event) => {\n                const message = event.data;\n                if (message[12 /* type */] !== 11 /* GET_STORAGE */) {\n                    return;\n                }\n                // TODO: There is a race condition here if there are multiple concurrent\n                // getState(k) messages in flight, where k is the same value.\n                const storageMessage = message;\n                if (storageMessage[74 /* storageKey */] !== key) {\n                    return;\n                }\n                this.document.removeGlobalEventListener('message', messageHandler);\n                const value = storageMessage[21 /* value */];\n                resolve(value);\n            };\n            this.document.addGlobalEventListener('message', messageHandler);\n            transfer(this.document, [12 /* STORAGE */, 1 /* GET */, 2 /* AmpState */, /* key */ store(key), /* value */ 0]);\n            setTimeout(resolve, 500, null); // TODO: Why a magical constant, define and explain.\n        });\n    }\n    /**\n     * Deep-merges `state` into the existing state.\n     * @param state\n     */\n    setState(state) {\n        // Stringify `state` so it can be post-messaged as a transferrable.\n        let stringified;\n        try {\n            stringified = JSON.stringify(state);\n        }\n        catch (e) {\n            throw new Error(`AMP.setState only accepts valid JSON as input.`);\n        }\n        transfer(this.document, [12 /* STORAGE */, 2 /* SET */, 2 /* AmpState */, /* key */ 0, /* value */ store(stringified)]);\n    }\n}\n//# sourceMappingURL=amp.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const toLower = (value) => value.toLowerCase();\nexport const toUpper = (value) => value.toUpperCase();\nexport const containsIndexOf = (pos) => pos !== -1;\nexport const keyValueString = (key, value) => `${key}=\"${value}\"`;\n//# sourceMappingURL=utils.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { transfer } from './MutationTransfer';\nconst observers = [];\nlet pendingMutations = false;\n/**\n * @param observerTarget\n * @param target\n */\nconst matchesIndex = (observerTarget, target) => {\n    return !!observerTarget && observerTarget[7 /* index */] === target[7 /* index */];\n};\n/**\n * @param observer\n * @param record\n */\nconst pushMutation = (observer, record) => {\n    observer.pushRecord(record);\n    if (!pendingMutations) {\n        pendingMutations = true;\n        Promise.resolve().then(() => {\n            pendingMutations = false;\n            observers.forEach(observer => observer.callback(observer.takeRecords()));\n        });\n    }\n};\n/**\n * @param document\n * @param record\n * @param transferable\n */\nexport function mutate(document, record, transferable) {\n    // Post-message `transferable` to the main thread to apply mutations.\n    transfer(document, transferable);\n    // The MutationRecord is only used for external callers of MutationObserver.\n    observers.forEach(observer => {\n        for (let t = record.target; t; t = t.parentNode) {\n            if (matchesIndex(observer.target, t)) {\n                pushMutation(observer, record);\n                break;\n            }\n        }\n    });\n}\nexport class MutationObserver {\n    constructor(callback) {\n        this[_a] = [];\n        this.callback = callback;\n    }\n    /**\n     * Register the MutationObserver instance to observe a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @param target Node to observe DOM mutations\n     */\n    observe(target, options) {\n        this.disconnect();\n        this.target = target;\n        this.options = options || {};\n        observers.push(this);\n    }\n    /**\n     * Stop the MutationObserver instance from observing a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     */\n    disconnect() {\n        this.target = null;\n        const index = observers.indexOf(this);\n        if (index >= 0) {\n            observers.splice(index, 1);\n        }\n    }\n    /**\n     * Empties the MutationObserver instance's record queue and returns what was in there.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @return Mutation Records stored on this MutationObserver instance.\n     */\n    takeRecords() {\n        const records = this[42 /* records */];\n        return records.splice(0, records.length);\n    }\n    /**\n     * NOTE: This method doesn't exist on native MutationObserver.\n     * @param record MutationRecord to store for this instance.\n     */\n    pushRecord(record) {\n        this[42 /* records */].push(record);\n    }\n}\n_a = 42 /* records */;\n//# sourceMappingURL=MutationObserver.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { store as storeNodeMapping, storeOverride as storeOverrideNodeMapping } from '../nodes';\nimport { toLower } from '../../utils';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\n/**\n * Propagates a property change for a Node to itself and all childNodes.\n * @param node Node to start applying change to\n * @param property Property to modify\n * @param value New value to apply\n */\nexport const propagate = (node, property, value) => {\n    node[property] = value;\n    node.childNodes.forEach(child => propagate(child, property, value));\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/Node\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n//\n// Please note, in this implmentation Node doesn't extend EventTarget.\n// This is intentional to reduce the number of classes.\nexport class Node {\n    constructor(nodeType, nodeName, ownerDocument, overrideIndex) {\n        this.childNodes = [];\n        this.parentNode = null;\n        this.isConnected = false;\n        this[_a] = {};\n        this.nodeType = nodeType;\n        this.nodeName = nodeName;\n        this.ownerDocument = ownerDocument || this;\n        this[45 /* scopingRoot */] = this;\n        this[7 /* index */] = overrideIndex ? storeOverrideNodeMapping(this, overrideIndex) : storeNodeMapping(this);\n        this[9 /* transferredFormat */] = [this[7 /* index */]];\n    }\n    // Unimplemented Properties\n    // Node.baseURI – https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI\n    // Unimplemented Methods\n    // Node.compareDocumentPosition() – https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n    // Node.getRootNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode\n    // Node.isDefaultNamespace() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isDefaultNamespace\n    // Node.isEqualNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isEqualNode\n    // Node.isSameNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isSameNode\n    // Node.lookupPrefix() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupPrefix\n    // Node.lookupNamespaceURI() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupNamespaceURI\n    // Node.normalize() – https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize\n    // Implemented at Element/Text layer\n    // Node.nodeValue – https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue\n    // Node.cloneNode – https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * Use `this.getTextContent()` instead of `super.textContent` to avoid incorrect or expensive ES5 transpilation.\n     */\n    getTextContent() {\n        let textContent = '';\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            childNodes.forEach(childNode => (textContent += childNode.textContent));\n            return textContent;\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild\n     * @return Node's first child in the tree, or null if the node has no children.\n     */\n    get firstChild() {\n        return this.childNodes[0] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild\n     * @return The last child of a node, or null if there are no child elements.\n     */\n    get lastChild() {\n        return this.childNodes[this.childNodes.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling\n     * @return node immediately following the specified one in it's parent's childNodes, or null if one doesn't exist.\n     */\n    get nextSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) + 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling\n     * @return node immediately preceding the specified one in its parent's childNodes, or null if the specified node is the first in that list.\n     */\n    get previousSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes\n     * @return boolean if the Node has childNodes.\n     */\n    hasChildNodes() {\n        return this.childNodes.length > 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n     * @param otherNode\n     * @return whether a Node is a descendant of a given Node\n     */\n    contains(otherNode) {\n        if (otherNode === this) {\n            return true;\n        }\n        if (this.childNodes.length > 0) {\n            if (this.childNodes.includes(this)) {\n                return true;\n            }\n            return this.childNodes.some(child => child.contains(otherNode));\n        }\n        return false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n     * @param child\n     * @param referenceNode\n     * @return child after it has been inserted.\n     */\n    insertBefore(child, referenceNode) {\n        if (child === null || child === this) {\n            // The new child cannot contain the parent.\n            return child;\n        }\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach((node) => this.insertBefore(node, referenceNode));\n        }\n        else if (referenceNode == null) {\n            // When a referenceNode is not valid, appendChild(child).\n            return this.appendChild(child);\n        }\n        else if (this.childNodes.indexOf(referenceNode) >= 0) {\n            // Should only insertBefore direct children of this Node.\n            child.remove();\n            // Removing a child can cause this.childNodes to change, meaning we need to splice from its updated location.\n            this.childNodes.splice(this.childNodes.indexOf(referenceNode), 0, child);\n            this[56 /* insertedNode */](child);\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                nextSibling: referenceNode,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                referenceNode[7 /* index */],\n                0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * When a Node is inserted, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [(45 /* scopingRoot */, 7 /* index */, 9 /* transferredFormat */, 8 /* creationFormat */, _a = 10 /* handlers */, 56 /* insertedNode */)](child) {\n        child.parentNode = this;\n        propagate(child, 'isConnected', this.isConnected);\n        propagate(child, 45 /* scopingRoot */, this[45 /* scopingRoot */]);\n    }\n    /**\n     * When a node is removed, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        child.parentNode = null;\n        propagate(child, 'isConnected', false);\n        propagate(child, 45 /* scopingRoot */, child);\n    }\n    /**\n     * Adds the specified childNode argument as the last child to the current node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n     * @param child Child Node to append to this Node.\n     * @return Node the appended node.\n     */\n    appendChild(child) {\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach(this.appendChild, this);\n        }\n        else {\n            child.remove();\n            this.childNodes.push(child);\n            this[56 /* insertedNode */](child);\n            const previousSibling = this.childNodes[this.childNodes.length - 2];\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                previousSibling,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                0,\n                previousSibling ? previousSibling[7 /* index */] : 0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n        }\n        return child;\n    }\n    /**\n     * Removes a child node from the current element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n     * @param child Child Node to remove from this Node.\n     * @return Node removed from the tree or null if the node wasn't attached to this tree.\n     */\n    removeChild(child) {\n        const index = this.childNodes.indexOf(child);\n        const exists = index >= 0;\n        if (exists) {\n            this.childNodes.splice(index, 1);\n            this[57 /* removedNode */](child);\n            mutate(this.ownerDocument, {\n                removedNodes: [child],\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [2 /* CHILD_LIST */, this[7 /* index */], 0, 0, 0, 1, child[7 /* index */]]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * @param newChild\n     * @param oldChild\n     * @return child that was replaced.\n     * @note `HierarchyRequestError` not handled e.g. newChild is an ancestor of current node.\n     * @see https://dom.spec.whatwg.org/#concept-node-replace\n     */\n    replaceChild(newChild, oldChild) {\n        if (newChild === oldChild ||\n            // In DOM, this throws DOMException: \"The node to be replaced is not a child of this node.\"\n            oldChild.parentNode !== this ||\n            // In DOM, this throws DOMException: \"The new child element contains the parent.\"\n            newChild.contains(this)) {\n            return oldChild;\n        }\n        // If newChild already exists in the DOM, it is first removed.\n        // TODO: Consider using a mutation-free API here to avoid two mutations\n        // per replaceChild() call.\n        newChild.remove();\n        const index = this.childNodes.indexOf(oldChild);\n        this.childNodes.splice(index, 1, newChild);\n        this[57 /* removedNode */](oldChild);\n        this[56 /* insertedNode */](newChild);\n        mutate(this.ownerDocument, {\n            addedNodes: [newChild],\n            removedNodes: [oldChild],\n            type: 2 /* CHILD_LIST */,\n            nextSibling: this.childNodes[index + 1],\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            this.childNodes[index + 1] ? this.childNodes[index + 1][7 /* index */] : 0,\n            0,\n            1,\n            1,\n            newChild[7 /* index */],\n            oldChild[7 /* index */],\n        ]);\n        return oldChild;\n    }\n    /**\n     * Removes this Node from the tree it belogs too.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\n     */\n    remove() {\n        this.parentNode && this.parentNode.removeChild(this);\n    }\n    /**\n     * Add an event listener to callback when a specific event type is dispatched.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function called when event is dispatched.\n     */\n    addEventListener(type, handler) {\n        const lowerType = toLower(type);\n        const storedType = storeString(lowerType);\n        const handlers = this[10 /* handlers */][lowerType];\n        let index = 0;\n        if (handlers) {\n            index = handlers.push(handler);\n        }\n        else {\n            this[10 /* handlers */][lowerType] = [handler];\n        }\n        transfer(this.ownerDocument, [4 /* EVENT_SUBSCRIPTION */, this[7 /* index */], 0, 1, storedType, index]);\n    }\n    /**\n     * Remove a registered event listener for a specific event type.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function to stop calling when event is dispatched.\n     */\n    removeEventListener(type, handler) {\n        const lowerType = toLower(type);\n        const handlers = this[10 /* handlers */][lowerType];\n        const index = !!handlers ? handlers.indexOf(handler) : -1;\n        if (index >= 0) {\n            handlers.splice(index, 1);\n            transfer(this.ownerDocument, [\n                4 /* EVENT_SUBSCRIPTION */,\n                this[7 /* index */],\n                1,\n                0,\n                storeString(lowerType),\n                index,\n            ]);\n        }\n    }\n    /**\n     * Dispatch an event for this Node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n     * @param event Event to dispatch to this node and potentially cascade to parents.\n     */\n    dispatchEvent(event) {\n        let target = (event.currentTarget = this);\n        let handlers;\n        let iterator;\n        do {\n            handlers = target && target[10 /* handlers */] && target[10 /* handlers */][toLower(event.type)];\n            if (handlers) {\n                for (iterator = handlers.length; iterator--;) {\n                    if ((handlers[iterator].call(target, event) === false || event[51 /* end */]) && event.cancelable) {\n                        break;\n                    }\n                }\n            }\n        } while (event.bubbles && !(event.cancelable && event[50 /* stop */]) && (target = target && target.parentNode));\n        return !event.defaultPrevented;\n    }\n}\n//# sourceMappingURL=Node.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Node } from './Node';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/CharacterData\nexport class CharacterData extends Node {\n    constructor(data, nodeType, nodeName, ownerDocument, overrideIndex) {\n        super(nodeType, nodeName, ownerDocument, overrideIndex);\n        this[38 /* data */] = data;\n        this[8 /* creationFormat */] = [this[7 /* index */], nodeType, storeString(nodeName), storeString(data), 0];\n    }\n    // Unimplemented Methods\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // NonDocumentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // CharacterData.appendData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/appendData\n    // CharacterData.deleteData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/deleteData\n    // CharacterData.insertData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/insertData\n    // CharacterData.replaceData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/replaceData\n    // CharacterData.substringData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/substringData\n    /**\n     * @return Returns the string contained in private CharacterData.data\n     */\n    get data() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set data(value) {\n        const oldValue = this.data;\n        this[38 /* data */] = value;\n        mutate(this.ownerDocument, {\n            target: this,\n            type: 1 /* CHARACTER_DATA */,\n            value,\n            oldValue,\n        }, [1 /* CHARACTER_DATA */, this[7 /* index */], storeString(value)]);\n    }\n    /**\n     * @return Returns the size of the string contained in CharacterData.data\n     */\n    get length() {\n        return this[38 /* data */].length;\n    }\n    /**\n     * @return Returns the string contained in CharacterData.data\n     */\n    get nodeValue() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set nodeValue(value) {\n        this.data = value;\n    }\n}\n38 /* data */;\n//# sourceMappingURL=CharacterData.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Comment\nexport class Comment extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 8 /* COMMENT_NODE */, '#comment', ownerDocument, overrideIndex);\n    }\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Comment Node with the same data as the Comment to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createComment(this.data);\n    }\n}\n//# sourceMappingURL=Comment.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\n/**\n * Synchronizes the string getter/setter with the actual DOMTokenList instance.\n * @param defineOn Element or class extension to define getter/setter pair for token list access.\n * @param accessorKey Key used to access DOMTokenList directly from specific element.\n * @param propertyName Key used to access DOMTokenList as string getter/setter.\n */\nexport function synchronizedAccessor(defineOn, accessorKey, propertyName) {\n    Object.defineProperty(defineOn.prototype, propertyName, {\n        enumerable: true,\n        configurable: true,\n        get() {\n            return this[accessorKey].value;\n        },\n        set(value) {\n            this[accessorKey].value = value;\n        },\n    });\n}\nexport class DOMTokenList {\n    /**\n     * The DOMTokenList interface represents a set of space-separated tokens.\n     * It is indexed beginning with 0 as with JavaScript Array objects and is case-sensitive.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList\n     * @param target Specific Element instance to modify when value is changed.\n     * @param attributeName Name of the attribute used by Element to access DOMTokenList.\n     */\n    constructor(target, attributeName) {\n        this[_a] = [];\n        this[13 /* target */] = target;\n        this[18 /* attributeName */] = attributeName;\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @return string representation of tokens (space delimitted).\n     */\n    get value() {\n        return this[43 /* tokens */].join(' ');\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/length\n     * @return integer representing the number of objects stored in the object.\n     */\n    get length() {\n        return this[43 /* tokens */].length;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @param collection String of values space delimited to replace the current DOMTokenList with.\n     */\n    set value(collection) {\n        const oldValue = this.value;\n        const newValue = collection.trim();\n        // Replace current tokens with new tokens.\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...(newValue !== '' ? newValue.split(/\\s+/) : ''));\n        this[67 /* mutated */](oldValue, newValue);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/item\n     * @param index number from DOMTokenList entities to retrieve value of\n     * @return value stored at the index requested, or undefined if beyond known range.\n     */\n    item(index) {\n        return this[43 /* tokens */][index];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/contains\n     * @param token value the DOMTokenList is tested for.\n     * @return boolean indicating if the token is contained by the DOMTokenList.\n     */\n    contains(token) {\n        return this[43 /* tokens */].includes(token);\n    }\n    /**\n     * Add a token or tokens to the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/add\n     * @param tokens each token is a string to add to a TokenList.\n     */\n    add(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].concat(tokens)));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Remove a token or tokens from the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/remove\n     * @param tokens each token is a string to remove from a TokenList.\n     */\n    remove(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].filter(token => !tokens.includes(token))));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/replace\n     * @param token\n     * @param newToken\n     */\n    replace(token, newToken) {\n        if (!this[43 /* tokens */].includes(token)) {\n            return;\n        }\n        const oldValue = this.value;\n        const set = new Set(this[43 /* tokens */]);\n        if (token !== newToken) {\n            set.delete(token);\n            if (newToken !== '') {\n                set.add(newToken);\n            }\n        }\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...set);\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Adds or removes a token based on its presence in the token list.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle\n     * @param token string to add or remove from the token list\n     * @param force changes toggle into a one way-only operation. true => token added. false => token removed.\n     * @return true if the token is in the list following mutation, false if not.\n     */\n    toggle(token, force) {\n        if (!this[43 /* tokens */].includes(token)) {\n            if (force !== false) {\n                // Note, this will add the token if force is undefined (not passed into the method), or true.\n                this.add(token);\n            }\n            return true;\n        }\n        else if (force !== true) {\n            // Note, this will remove the token if force is undefined (not passed into the method), or false.\n            this.remove(token);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Report tokenList mutations to MutationObserver.\n     * @param oldValue value before mutation\n     * @param value value after mutation\n     * @private\n     */\n    [(_a = 43 /* tokens */, 13 /* target */, 18 /* attributeName */, 44 /* storeAttribute */, 67 /* mutated */)](oldValue, value) {\n        this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, this[18 /* attributeName */], value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: this[18 /* attributeName */],\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString(this[18 /* attributeName */]),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n//# sourceMappingURL=DOMTokenList.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower, toUpper } from '../../utils';\n// To future authors: It would be great if we could enforce that elements are not modified by a ConditionPredicate.\nexport const tagNameConditionPredicate = (tagNames) => (element) => {\n    console.assert(tagNames.every(t => t === toUpper(t)), 'tagNames must be all uppercase.');\n    return tagNames.includes(element.tagName);\n};\nexport const elementPredicate = (node) => node.nodeType === 1 /* ELEMENT_NODE */;\nexport const matchChildrenElements = (node, conditionPredicate) => {\n    const matchingElements = [];\n    node.childNodes.forEach(child => {\n        if (elementPredicate(child)) {\n            if (conditionPredicate(child)) {\n                matchingElements.push(child);\n            }\n            matchingElements.push(...matchChildrenElements(child, conditionPredicate));\n        }\n    });\n    return matchingElements;\n};\nexport const matchChildElement = (element, conditionPredicate) => {\n    let returnValue = null;\n    element.children.some(child => {\n        if (conditionPredicate(child)) {\n            returnValue = child;\n            return true;\n        }\n        const grandChildMatch = matchChildElement(child, conditionPredicate);\n        if (grandChildMatch !== null) {\n            returnValue = grandChildMatch;\n            return true;\n        }\n        return false;\n    });\n    return returnValue;\n};\nexport const matchNearestParent = (element, conditionPredicate) => {\n    while ((element = element.parentNode)) {\n        if (conditionPredicate(element)) {\n            return element;\n        }\n    }\n    return null;\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors\n * @param attrSelector the selector we are trying to match for.\n * @param element the element being tested.\n * @return boolean for whether we match the condition\n */\nexport const matchAttrReference = (attrSelector, element) => {\n    if (!attrSelector) {\n        return false;\n    }\n    const equalPos = attrSelector.indexOf('=');\n    const selectorLength = attrSelector.length;\n    const caseInsensitive = attrSelector.charAt(selectorLength - 2) === 'i';\n    let endPos = caseInsensitive ? selectorLength - 3 : selectorLength - 1;\n    if (equalPos !== -1) {\n        const equalSuffix = attrSelector.charAt(equalPos - 1);\n        const possibleSuffixes = ['~', '|', '$', '^', '*'];\n        const attrString = possibleSuffixes.includes(equalSuffix) ? attrSelector.substring(1, equalPos - 1) : attrSelector.substring(1, equalPos);\n        const rawValue = attrSelector.substring(equalPos + 1, endPos);\n        const rawAttrValue = element.getAttribute(attrString);\n        if (rawAttrValue) {\n            const casedValue = caseInsensitive ? toLower(rawValue) : rawValue;\n            const casedAttrValue = caseInsensitive ? toLower(rawAttrValue) : rawAttrValue;\n            switch (equalSuffix) {\n                case '~':\n                    return casedAttrValue.split(' ').indexOf(casedValue) !== -1;\n                case '|':\n                    return casedAttrValue === casedValue || casedAttrValue === `${casedValue}-`;\n                case '^':\n                    return casedAttrValue.startsWith(casedValue);\n                case '$':\n                    return casedAttrValue.endsWith(casedValue);\n                case '*':\n                    return casedAttrValue.indexOf(casedValue) !== -1;\n                default:\n                    return casedAttrValue === casedValue;\n            }\n        }\n        return false;\n    }\n    else {\n        return element.hasAttribute(attrSelector.substring(1, endPos));\n    }\n};\n//# sourceMappingURL=matchElements.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { elementPredicate, matchAttrReference, matchChildrenElements } from './matchElements';\nimport { Node } from './Node';\nimport { containsIndexOf, toLower } from '../../utils';\n/*\nNormally ParentNode is implemented as a mixin, but since the Node class is an abstract\nthis makes it hard to build a mixin that recieves a base of the representations of Node needing\nthe mixed in functionality.\n\n// Partially implemented Mixin Methods\n// Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n// - Element selectors\n// - ID selectors\n// - Class selectors\n// - Attribute selectors\n// Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n// Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n*/\nexport class ParentNode extends Node {\n    /**\n     * Getter returning children of an Element that are Elements themselves.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children\n     * @return Element objects that are children of this ParentNode, omitting all of its non-element nodes.\n     */\n    get children() {\n        return this.childNodes.filter(elementPredicate);\n    }\n    /**\n     * Getter returning the number of child elements of a Element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/childElementCount\n     * @return number of child elements of the given Element.\n     */\n    get childElementCount() {\n        return this.children.length;\n    }\n    /**\n     * Getter returning the first Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/firstElementChild\n     * @return first childNode that is also an element.\n     */\n    get firstElementChild() {\n        return this.childNodes.find(elementPredicate) || null;\n    }\n    /**\n     * Getter returning the last Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/lastElementChild\n     * @return first childNode that is also an element.\n     */\n    get lastElementChild() {\n        const children = this.children;\n        return children[children.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n     * @param selector the selector we are trying to match for.\n     * @return Element with matching selector.\n     */\n    querySelector(selector) {\n        const matches = querySelectorAll(this, selector);\n        return matches ? matches[0] : null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n     * @param selector the selector we are trying to match for.\n     * @return Elements with matching selector.\n     */\n    querySelectorAll(selector) {\n        return querySelectorAll(this, selector);\n    }\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n * @param node the node to filter results under.\n * @param selector the selector we are trying to match for.\n * @return Element with matching selector.\n */\nfunction querySelectorAll(node, selector) {\n    // As per spec: https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n    // First, parse the selector\n    const selectorBracketIndexes = [selector.indexOf('['), selector.indexOf(']')];\n    const selectorHasAttr = containsIndexOf(selectorBracketIndexes[0]) && containsIndexOf(selectorBracketIndexes[1]);\n    const elementSelector = selectorHasAttr ? selector.substring(0, selectorBracketIndexes[0]) : selector;\n    const attrSelector = selectorHasAttr ? selector.substring(selectorBracketIndexes[0], selectorBracketIndexes[1] + 1) : null;\n    // TODO(nainar): Parsing selectors is needed when we add in more complex selectors.\n    // Second, find all the matching elements on the Document\n    let matcher;\n    if (selector[0] === '[') {\n        matcher = element => matchAttrReference(selector, element);\n    }\n    else if (elementSelector[0] === '#') {\n        matcher = selectorHasAttr\n            ? element => element.id === elementSelector.substr(1) && matchAttrReference(attrSelector, element)\n            : element => element.id === elementSelector.substr(1);\n    }\n    else if (elementSelector[0] === '.') {\n        matcher = selectorHasAttr\n            ? element => element.classList.contains(elementSelector.substr(1)) && matchAttrReference(attrSelector, element)\n            : element => element.classList.contains(elementSelector.substr(1));\n    }\n    else {\n        matcher = selectorHasAttr\n            ? element => element.localName === toLower(elementSelector) && matchAttrReference(attrSelector, element)\n            : element => element.localName === toLower(elementSelector);\n    }\n    // Third, filter to return elements that exist within the querying element's descendants.\n    return matcher\n        ? matchChildrenElements(node[45 /* scopingRoot */], matcher).filter(element => node !== element && node.contains(element))\n        : [];\n}\n//# sourceMappingURL=ParentNode.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { keyValueString } from '../../utils';\nexport const toString = (attributes) => attributes.map((attr) => keyValueString(attr.name, attr.value)).join(' ');\nexport const matchPredicate = (namespaceURI, name) => attr => attr.namespaceURI === namespaceURI && attr.name === name;\n//# sourceMappingURL=Attr.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { toLower } from '../../utils';\nimport { store as storeString } from '../strings';\nconst hyphenateKey = (key) => toLower(key.replace(/(webkit|ms|moz|khtml)/g, '-$1').replace(/([a-zA-Z])(?=[A-Z])/g, '$1-'));\nexport const appendKeys = (keys) => {\n    const keysToAppend = keys.filter(key => isNaN(key) && !CSSStyleDeclaration.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    const previousPrototypeLength = (CSSStyleDeclaration.prototype.length || 0);\n    if (previousPrototypeLength !== 0) {\n        CSSStyleDeclaration.prototype.length = previousPrototypeLength + keysToAppend.length;\n    }\n    else {\n        Object.defineProperty(CSSStyleDeclaration.prototype, 'length', {\n            configurable: true,\n            writable: true,\n            value: keysToAppend.length,\n        });\n    }\n    keysToAppend.forEach((key, index) => {\n        const hyphenatedKey = hyphenateKey(key);\n        CSSStyleDeclaration.prototype[index + previousPrototypeLength] = hyphenatedKey;\n        Object.defineProperties(CSSStyleDeclaration.prototype, {\n            [key]: {\n                get() {\n                    return this.getPropertyValue(hyphenatedKey);\n                },\n                set(value) {\n                    this.setProperty(hyphenatedKey, value);\n                },\n            },\n        });\n    });\n};\nexport class CSSStyleDeclaration {\n    constructor(target) {\n        this[_a] = {};\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n        this[13 /* target */] = target;\n    }\n    /**\n     * Retrieve the value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/getPropertyValue\n     * @param key the name of the property to retrieve the value for.\n     * @return value stored for the provided key.\n     */\n    getPropertyValue(key) {\n        return this[3 /* properties */][key] || '';\n    }\n    /**\n     * Remove a value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/removeProperty\n     * @param key the name of the property to retrieve the value for.\n     * @return previously stored value for the provided key.\n     */\n    removeProperty(key) {\n        const oldValue = this.getPropertyValue(key);\n        this[3 /* properties */][key] = null;\n        this.mutated(this.cssText);\n        return oldValue;\n    }\n    /**\n     * Stores a given value for the provided key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/setProperty\n     * @param key modify this key\n     * @param value store this value\n     */\n    setProperty(key, value) {\n        this[3 /* properties */][key] = value;\n        this.mutated(this.cssText);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @return css text string representing known and valid style declarations.\n     */\n    get cssText() {\n        let value;\n        let returnValue = '';\n        for (let key in this[3 /* properties */]) {\n            if ((value = this.getPropertyValue(key)) !== '') {\n                returnValue += `${key}: ${value}; `;\n            }\n        }\n        return returnValue.trim();\n    }\n    /**\n     * Replace all style declarations with new values parsed from a cssText string.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @param value css text string to parse and store\n     */\n    set cssText(value) {\n        // value should have an \"unknown\" type but get/set can't have different types.\n        // https://github.com/Microsoft/TypeScript/issues/2521\n        const stringValue = typeof value === 'string' ? value : '';\n        this[3 /* properties */] = {};\n        const values = stringValue.split(/[:;]/);\n        const length = values.length;\n        for (let index = 0; index + 1 < length; index += 2) {\n            this[3 /* properties */][toLower(values[index].trim())] = values[index + 1].trim();\n        }\n        this.mutated(this.cssText);\n    }\n    /**\n     * Report CSSStyleDeclaration mutations to MutationObserver.\n     * @param value value after mutation\n     * @private\n     * // TODO(KB): Write a test to ensure mutations are fired for CSSStyleDeclaration changes.\n     */\n    mutated(value) {\n        const oldValue = this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, 'style', value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: 'style',\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString('style'),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n_a = 3 /* properties */, 44 /* storeAttribute */, 13 /* target */;\n//# sourceMappingURL=CSSStyleDeclaration.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower } from '../../utils';\n// TODO: Do all boolean attributes have boolean properties?\n// TODO: Do enumerated attributes with non-boolean properties exist?\nexport const reflectProperties = (properties, defineOn) => {\n    properties.forEach(pair => {\n        for (let property in pair) {\n            const { 0: defaultValue, 1: attributeName = toLower(property), 2: keywords } = pair[property];\n            // Boolean attributes only care about presence, not attribute value.\n            // https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes\n            const isBooleanAttribute = typeof defaultValue === 'boolean';\n            Object.defineProperty(defineOn.prototype, property, {\n                enumerable: true,\n                get() {\n                    const element = this;\n                    const attributeValue = element.getAttribute(attributeName);\n                    if (keywords) {\n                        return element.hasAttribute(attributeName) ? attributeValue === keywords[0] : defaultValue;\n                    }\n                    if (isBooleanAttribute) {\n                        return element.hasAttribute(attributeName);\n                    }\n                    const castableValue = attributeValue || defaultValue;\n                    return typeof defaultValue === 'number' ? Number(castableValue) : String(castableValue);\n                },\n                set(value) {\n                    const element = this;\n                    if (keywords) {\n                        element.setAttribute(attributeName, value ? keywords[0] : keywords[1]);\n                    }\n                    else if (isBooleanAttribute) {\n                        value ? element.setAttribute(attributeName, '') : element.removeAttribute(attributeName);\n                    }\n                    else {\n                        element.setAttribute(attributeName, String(value));\n                    }\n                },\n            });\n        }\n    });\n};\n//# sourceMappingURL=enhanceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n//# sourceMappingURL=TransferrableNodes.js.map","import { SVG_NAMESPACE, HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { toLower } from '../../utils';\nfunction arr_back(arr) {\n    return arr[arr.length - 1];\n}\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nconst kMarkupPattern = /<!--([^]*)-->|<(\\/?)([a-z][-.0-9_a-z]*)([^>]*?)(\\/?)>/gi;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\nconst kAttributePattern = /(^|\\s)([^\\s\"'>\\/=]+)\\s*=\\s*(\"([^\"]+)\"|'([^']+)'|(\\S+))/gi;\nconst kSelfClosingElements = {\n    AREA: true,\n    BASE: true,\n    BR: true,\n    COL: true,\n    HR: true,\n    IMG: true,\n    INPUT: true,\n    LINK: true,\n    META: true,\n    PARAM: true,\n    SOURCE: true,\n    TRACK: true,\n    WBR: true,\n};\nconst kElementsClosedByOpening = {\n    LI: { LI: true },\n    DT: { DT: true, DD: true },\n    DD: { DD: true, DT: true },\n    P: {\n        ADDRESS: true,\n        ARTICLE: true,\n        ASIDE: true,\n        BLOCKQUOTE: true,\n        DETAILS: true,\n        DIV: true,\n        DL: true,\n        FIELDSET: true,\n        FIGCAPTION: true,\n        FIGURE: true,\n        FOOTER: true,\n        FORM: true,\n        H1: true,\n        H2: true,\n        H3: true,\n        H4: true,\n        H5: true,\n        H6: true,\n        HEADER: true,\n        HR: true,\n        MAIN: true,\n        NAV: true,\n        OL: true,\n        P: true,\n        PRE: true,\n        SECTION: true,\n        TABLE: true,\n        UL: true,\n    },\n    RT: { RT: true, RP: true },\n    RP: { RT: true, RP: true },\n    OPTGROUP: { OPTGROUP: true },\n    OPTION: { OPTION: true, OPTGROUP: true },\n    THEAD: { TBODY: true, TFOOT: true },\n    TBODY: { TBODY: true, TFOOT: true },\n    TR: { TR: true },\n    TD: { TD: true, TH: true },\n    TH: { TD: true, TH: true },\n};\nconst kElementsClosedByClosing = {\n    LI: { UL: true, OL: true },\n    A: { DIV: true },\n    B: { DIV: true },\n    I: { DIV: true },\n    P: { DIV: true },\n    TD: { TR: true, TABLE: true },\n    TH: { TR: true, TABLE: true },\n};\nconst kBlockTextElements = {\n    SCRIPT: true,\n    NOSCRIPT: true,\n    STYLE: true,\n    PRE: true,\n};\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n * @param  {string} data HTML in string format.\n * @param {!Element} root The element to use as root.\n * @return {Element}      root element\n */\nexport function parse(data, rootElement) {\n    const ownerDocument = rootElement.ownerDocument;\n    const root = ownerDocument.createElementNS(rootElement.namespaceURI, rootElement.localName);\n    let currentParent = root;\n    let currentNamespace = root.namespaceURI;\n    const stack = [root];\n    let lastTextPos = 0;\n    let match;\n    data = '<q>' + data + '</q>';\n    const tagsClosed = [];\n    if (currentNamespace !== SVG_NAMESPACE && currentNamespace !== HTML_NAMESPACE) {\n        throw new Error('Namespace not supported: ' + currentNamespace);\n    }\n    while ((match = kMarkupPattern.exec(data))) {\n        const commentContents = match[1]; // <!--contents-->\n        let beginningSlash = match[2]; // ... </ ...\n        const tagName = match[3];\n        const matchAttributes = match[4];\n        const endSlash = match[5]; // ... /> ...\n        if (lastTextPos < match.index) {\n            // if has content\n            const text = data.slice(lastTextPos, match.index);\n            currentParent.appendChild(ownerDocument.createTextNode(text));\n        }\n        lastTextPos = kMarkupPattern.lastIndex;\n        if (commentContents !== undefined) {\n            // this is a comment\n            currentParent.appendChild(ownerDocument.createComment(commentContents));\n            continue;\n        }\n        const normalizedTagName = tagName.toUpperCase();\n        if (normalizedTagName === 'SVG') {\n            currentNamespace = beginningSlash ? HTML_NAMESPACE : SVG_NAMESPACE;\n        }\n        if (!beginningSlash) {\n            // not </ tags\n            if (!endSlash && kElementsClosedByOpening[currentParent.tagName]) {\n                if (kElementsClosedByOpening[currentParent.tagName][normalizedTagName]) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                }\n            }\n            const childToAppend = ownerDocument.createElementNS(currentNamespace, currentNamespace === HTML_NAMESPACE ? toLower(tagName) : tagName);\n            for (let attMatch; (attMatch = kAttributePattern.exec(matchAttributes));) {\n                const attrName = attMatch[2];\n                const attrValue = attMatch[4] || attMatch[5] || attMatch[6];\n                childToAppend.setAttribute(attrName, attrValue);\n            }\n            currentParent = currentParent.appendChild(childToAppend);\n            stack.push(currentParent);\n            if (kBlockTextElements[normalizedTagName]) {\n                // a little test to find next </script> or </style> ...\n                const closeMarkup = '</' + toLower(normalizedTagName) + '>';\n                const index = data.indexOf(closeMarkup, kMarkupPattern.lastIndex);\n                if (index == -1) {\n                    throw new Error('Close markup not found.');\n                }\n                else {\n                    kMarkupPattern.lastIndex = index;\n                }\n            }\n        }\n        if (tagName === 'foreignObject') {\n            currentNamespace = beginningSlash ? SVG_NAMESPACE : HTML_NAMESPACE;\n        }\n        if (beginningSlash || endSlash || kSelfClosingElements[normalizedTagName]) {\n            // </ or /> or <br> etc.\n            while (true) {\n                if (stack.length <= 1) {\n                    break;\n                }\n                if (currentParent.nodeName.toUpperCase() == normalizedTagName) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                    break;\n                }\n                else {\n                    // Trying to close current tag, and move on\n                    if (kElementsClosedByClosing[currentParent.tagName]) {\n                        if (kElementsClosedByClosing[currentParent.tagName][normalizedTagName]) {\n                            stack.pop();\n                            currentParent = arr_back(stack);\n                            continue;\n                        }\n                    }\n                    // Use aggressive strategy to handle unmatching markups.\n                    break;\n                }\n            }\n        }\n    }\n    for (const node of stack) {\n        if (tagsClosed[tagsClosed.length - 1] == node.nodeName) {\n            stack.pop();\n            tagsClosed.pop();\n            currentParent = arr_back(stack);\n        }\n        else\n            break;\n    }\n    const valid = stack.length === 1;\n    if (!valid) {\n        throw new Error('Attempting to parse invalid HTML content.');\n    }\n    const wrapper = root.firstChild;\n    if (wrapper) {\n        wrapper.parentNode = null;\n        wrapper.childNodes.forEach((node) => {\n            node.parentNode = null;\n        });\n        return wrapper;\n    }\n    throw new Error('Attempting to parse invalid HTML.');\n}\n//# sourceMappingURL=html-parser.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { ParentNode } from './ParentNode';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { toString as attrsToString, matchPredicate as matchAttrPredicate } from './Attr';\nimport { mutate } from '../MutationObserver';\nimport { toLower, toUpper } from '../../utils';\nimport { CSSStyleDeclaration } from '../css/CSSStyleDeclaration';\nimport { matchChildrenElements } from './matchElements';\nimport { reflectProperties } from './enhanceElement';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { parse } from '../../third_party/html-parser/html-parser';\nimport { propagate } from './Node';\nexport const NS_NAME_TO_CLASS = {};\nexport const registerSubclass = (localName, subclass, namespace = HTML_NAMESPACE) => (NS_NAME_TO_CLASS[`${namespace}:${localName}`] = subclass);\nexport function definePropertyBackedAttributes(defineOn, attributes) {\n    const sub = Object.create(defineOn[46 /* propertyBackedAttributes */]);\n    defineOn[46 /* propertyBackedAttributes */] = Object.assign(sub, attributes);\n}\n/**\n * There are six kinds of elements, each having different start/close tag semantics.\n * @see https://html.spec.whatwg.org/multipage/syntax.html#elements-2\n */\nvar ElementKind;\n(function (ElementKind) {\n    ElementKind[ElementKind[\"NORMAL\"] = 0] = \"NORMAL\";\n    ElementKind[ElementKind[\"VOID\"] = 1] = \"VOID\";\n    // The following element kinds have no special handling in worker-dom yet\n    // and are lumped into the NORMAL kind.\n    /*\n    FOREIGN,\n    TEMPLATE,\n    RAW_TEXT,\n    ESCAPABLE_RAW,\n    */\n})(ElementKind || (ElementKind = {}));\n/**\n * @see https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n */\nconst VOID_ELEMENTS = ['AREA', 'BASE', 'BR', 'COL', 'EMBED', 'HR', 'IMG', 'INPUT', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'];\nexport class Element extends ParentNode {\n    constructor(nodeType, localName, namespaceURI, ownerDocument, overrideIndex) {\n        super(nodeType, toUpper(localName), ownerDocument, overrideIndex);\n        this.attributes = [];\n        this.style = new CSSStyleDeclaration(this);\n        this.namespaceURI = namespaceURI || HTML_NAMESPACE;\n        this.localName = localName;\n        this.kind = VOID_ELEMENTS.includes(this.tagName) ? ElementKind.VOID : ElementKind.NORMAL;\n        this[8 /* creationFormat */] = [\n            this[7 /* index */],\n            this.nodeType,\n            storeString(this.localName),\n            0,\n            this.namespaceURI === null ? 0 : storeString(this.namespaceURI),\n        ];\n    }\n    // Unimplemented properties\n    // Element.clientHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight\n    // Element.clientLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientLeft\n    // Element.clientTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n    // Element.clientWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth\n    // set Element.innerHTML – https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // Element.prefix – https://developer.mozilla.org/en-US/docs/Web/API/Element/prefix\n    // NonDocummentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // Element.scrollHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight\n    // Element.scrollLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft\n    // Element.scrollLeftMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeftMax\n    // Element.scrollTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop\n    // Element.scrollTopMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTopMax\n    // Element.scrollWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth\n    // Element.shadowRoot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/shadowRoot\n    // Element.slot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/slot\n    // Element.tabStop – https://developer.mozilla.org/en-US/docs/Web/API/Element/tabStop\n    // Element.undoManager – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoManager\n    // Element.undoScope – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoScope\n    // Unimplemented Methods\n    // Element.attachShadow() – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\n    // Element.animate() – https://developer.mozilla.org/en-US/docs/Web/API/Element/animate\n    // Element.closest() – https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n    // Element.getAttributeNames() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n    // Element.getBoundingClientRect() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n    // Element.getClientRects() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects\n    // Element.getElementsByTagNameNS() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagNameNS\n    // Element.insertAdjacentElement() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement\n    // Element.insertAdjacentHTML() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n    // Element.insertAdjacentText() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentText\n    // Element.matches() – https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n    // Element.releasePointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture\n    // Element.requestFullscreen() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n    // Element.requestPointerLock() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock\n    // Element.scrollIntoView() – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\n    // Element.setCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setCapture\n    // Element.setPointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture\n    // Partially implemented Mixin Methods\n    // Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n    // - Element selectors\n    // - ID selectors\n    // - Class selectors\n    // - Attribute selectors\n    // Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n    // Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n    // Mixins not implemented\n    // Slotable.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Slotable/assignedSlot\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML\n     * @return string representation of serialized HTML describing the Element and its descendants.\n     */\n    get outerHTML() {\n        const tag = this.localName || this.tagName;\n        const start = `<${[tag, attrsToString(this.attributes)].join(' ').trim()}>`;\n        const contents = this.innerHTML;\n        if (!contents) {\n            if (this.kind === ElementKind.VOID) {\n                // Void elements e.g. <input> only have a start tag (unless children are added programmatically).\n                // https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n                return start;\n            }\n        }\n        return start + contents + `</${tag}>`;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @return string representation of serialized HTML describing the Element's descendants.\n     */\n    get innerHTML() {\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            return childNodes\n                .map(child => {\n                switch (child.nodeType) {\n                    case 3 /* TEXT_NODE */:\n                        return child.textContent;\n                    case 8 /* COMMENT_NODE */:\n                        return `<!--${child.textContent}-->`;\n                    default:\n                        return child.outerHTML;\n                }\n            })\n                .join('');\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @param html The raw html string to parse.\n     */\n    set innerHTML(html) {\n        const root = parse(html, this);\n        // remove previous children\n        this.childNodes.forEach(n => {\n            propagate(n, 'isConnected', false);\n            propagate(n, 45 /* scopingRoot */, n);\n        });\n        mutate(this.ownerDocument, {\n            removedNodes: this.childNodes,\n            type: 2 /* CHILD_LIST */,\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            0,\n            0,\n            0,\n            this.childNodes.length,\n            ...this.childNodes.map(node => node[7 /* index */]),\n        ]);\n        this.childNodes = [];\n        // add new children\n        root.childNodes.forEach((child) => this.appendChild(child));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @param text new text replacing all childNodes content.\n     */\n    set textContent(text) {\n        // TODO(KB): Investigate removing all children in a single .splice to childNodes.\n        this.childNodes.slice().forEach((child) => child.remove());\n        this.appendChild(this.ownerDocument.createTextNode(text));\n    }\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName\n     * @return string tag name (i.e 'div')\n     */\n    get tagName() {\n        return this.nodeName;\n    }\n    /**\n     * Sets the value of an attribute on this element using a null namespace.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttribute(name, value) {\n        this.setAttributeNS(HTML_NAMESPACE, name, value);\n    }\n    /**\n     * Get the value of an attribute on this Element with the null namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttribute(name) {\n        return this.getAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * Remove an attribute from this element in the null namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param name attribute name\n     */\n    removeAttribute(name) {\n        this.removeAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttribute(name) {\n        return this.hasAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n     * @return Boolean indicating if the element has any attributes.\n     */\n    hasAttributes() {\n        return this.attributes.length > 0;\n    }\n    /**\n     * Sets the value of an attribute on this Element with the provided namespace.\n     *\n     * If the attribute already exists, the value is updated; otherwise a new attribute is added with the specified name and value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttributeNS\n     * @param namespaceURI\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttributeNS(namespaceURI, name, value) {\n        const valueAsString = String(value);\n        const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n        if (propertyBacked !== undefined) {\n            if (!this.attributes.find(matchAttrPredicate(namespaceURI, name))) {\n                this.attributes.push({\n                    namespaceURI,\n                    name,\n                    value: valueAsString,\n                });\n            }\n            propertyBacked[1](this, valueAsString);\n            return;\n        }\n        const oldValue = this[44 /* storeAttribute */](namespaceURI, name, valueAsString);\n        mutate(this.ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this,\n            attributeName: name,\n            attributeNamespace: namespaceURI,\n            value: valueAsString,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[7 /* index */],\n            storeString(name),\n            storeString(namespaceURI),\n            value !== null ? storeString(valueAsString) + 1 : 0,\n        ]);\n    }\n    [(_a = 46 /* propertyBackedAttributes */, 44 /* storeAttribute */)](namespaceURI, name, value) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        const oldValue = (attr && attr.value) || '';\n        if (attr) {\n            attr.value = value;\n        }\n        else {\n            this.attributes.push({\n                namespaceURI,\n                name,\n                value,\n            });\n        }\n        return oldValue;\n    }\n    /**\n     * Get the value of an attribute on this Element with the specified namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttributeNS(namespaceURI, name) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        if (attr) {\n            const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n            return propertyBacked !== undefined ? propertyBacked[0](this) : attr.value;\n        }\n        return null;\n    }\n    /**\n     * Remove an attribute from this element in the specified namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     */\n    removeAttributeNS(namespaceURI, name) {\n        const index = this.attributes.findIndex(matchAttrPredicate(namespaceURI, name));\n        if (index >= 0) {\n            const oldValue = this.attributes[index].value;\n            this.attributes.splice(index, 1);\n            mutate(this.ownerDocument, {\n                type: 0 /* ATTRIBUTES */,\n                target: this,\n                attributeName: name,\n                attributeNamespace: namespaceURI,\n                oldValue,\n            }, [\n                0 /* ATTRIBUTES */,\n                this[7 /* index */],\n                storeString(name),\n                storeString(namespaceURI),\n                0,\n            ]);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttributeNS(namespaceURI, name) {\n        return this.attributes.some(matchAttrPredicate(namespaceURI, name));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n     * @param names contains one more more classnames to match on. Multiples are space seperated, indicating an AND operation.\n     * @return Element array with matching classnames\n     */\n    getElementsByClassName(names) {\n        const inputClassList = names.split(' ');\n        // TODO(KB) – Compare performance of [].some(value => DOMTokenList.contains(value)) and regex.\n        // const classRegex = new RegExp(classNames.split(' ').map(name => `(?=.*${name})`).join(''));\n        return matchChildrenElements(this, element => inputClassList.some(inputClassName => element.classList.contains(inputClassName)));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n     * @param tagName the qualified name to look for. The special string \"*\" represents all elements.\n     * @return Element array with matching tagnames\n     */\n    getElementsByTagName(tagName) {\n        const lowerTagName = toLower(tagName);\n        return matchChildrenElements(this, tagName === '*'\n            ? _ => true\n            : element => (element.namespaceURI === HTML_NAMESPACE ? element.localName === lowerTagName : element.tagName === tagName));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return Element containing all current attributes and potentially childNode clones of the Element requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createElementNS(this.namespaceURI, this.namespaceURI === HTML_NAMESPACE ? toLower(this.tagName) : this.tagName);\n        this.attributes.forEach(attr => clone.setAttribute(attr.name, attr.value));\n        if (deep) {\n            this.childNodes.forEach((child) => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n    /**\n     * Return the ClientRect for an Element once determined by the main thread.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n     * @return Promise<ClientRect>\n     *\n     * Note: Edge and IE11 do not return the x/y value, but top/left are equivalent. Normalize the values here.\n     */\n    getBoundingClientRectAsync() {\n        const defaultValue = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n        };\n        return new Promise(resolve => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 6 /* GET_BOUNDING_CLIENT_RECT */ &&\n                    data[13 /* target */][0] === this[7 /* index */]) {\n                    this.ownerDocument.removeGlobalEventListener('message', messageHandler);\n                    const transferredBoundingClientRect = data[38 /* data */];\n                    resolve({\n                        top: transferredBoundingClientRect[0],\n                        right: transferredBoundingClientRect[1],\n                        bottom: transferredBoundingClientRect[2],\n                        left: transferredBoundingClientRect[3],\n                        width: transferredBoundingClientRect[4],\n                        height: transferredBoundingClientRect[5],\n                        x: transferredBoundingClientRect[0],\n                        y: transferredBoundingClientRect[3],\n                    });\n                }\n            };\n            if (!this.ownerDocument.addGlobalEventListener || !this.isConnected) {\n                // Elements run within Node runtimes are missing addEventListener as a global.\n                // In this case, treat the return value the same as a disconnected node.\n                resolve(defaultValue);\n            }\n            else {\n                this.ownerDocument.addGlobalEventListener('message', messageHandler);\n                transfer(this.ownerDocument, [5 /* GET_BOUNDING_CLIENT_RECT */, this[7 /* index */]]);\n                setTimeout(resolve, 500, defaultValue); // TODO: Why a magical constant, define and explain.\n            }\n        });\n    }\n    get classList() {\n        return this._classList || (this._classList = new DOMTokenList(this, 'class'));\n    }\n}\nElement[_a] = {\n    class: [(el) => el.classList.value, (el, value) => (el.classList.value = value)],\n    style: [(el) => el.cssText, (el, value) => (el.cssText = value)],\n};\nsynchronizedAccessor(Element, 'classList', 'className');\nreflectProperties([{ id: [''] }], Element);\n//# sourceMappingURL=Element.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { matchNearestParent, tagNameConditionPredicate } from './matchElements';\nexport const appendGlobalEventProperties = (keys) => {\n    const keysToAppend = keys.filter(key => !HTMLElement.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    keysToAppend.forEach((key) => {\n        const normalizedKey = key.replace(/on/, '');\n        Object.defineProperty(HTMLElement.prototype, key, {\n            enumerable: true,\n            get() {\n                return this[76 /* propertyEventHandlers */][normalizedKey] || null;\n            },\n            set(value) {\n                const stored = this[76 /* propertyEventHandlers */][normalizedKey];\n                if (stored) {\n                    this.removeEventListener(normalizedKey, stored);\n                }\n                this.addEventListener(normalizedKey, value);\n                this[76 /* propertyEventHandlers */][normalizedKey] = value;\n            },\n        });\n    });\n};\nexport class HTMLElement extends Element {\n    constructor() {\n        super(...arguments);\n        this[_a] = {};\n    }\n    /**\n     * Find the nearest parent form element.\n     * Implemented in HTMLElement since so many extensions of HTMLElement repeat this functionality. This is not to spec.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return nearest parent form element.\n     */\n    get form() {\n        return matchNearestParent(this, tagNameConditionPredicate(['FORM']));\n    }\n    [(_a = 76 /* propertyEventHandlers */, 68 /* serializeAsTransferrableObject */)]() {\n        return [7 /* HTMLElement */, this[7 /* index */]];\n    }\n}\n// Reflected properties\n// HTMLElement.accessKey => string, reflected attribute\n// HTMLElement.contentEditable => string, reflected attribute\n// HTMLElement.dir => string, reflected attribute\n// HTMLElement.lang => string, reflected attribute\n// HTMLElement.title => string, reflected attribute\n// HTMLElement.draggable => boolean, reflected attribute\n// HTMLElement.hidden => boolean, reflected attribute\n// HTMLElement.noModule => boolean, reflected attribute\n// HTMLElement.spellcheck => boolean, reflected attribute\n// HTMLElement.translate => boolean, reflected attribute\nreflectProperties([\n    { accessKey: [''] },\n    { contentEditable: ['inherit'] },\n    { dir: [''] },\n    { lang: [''] },\n    { title: [''] },\n    { draggable: [false, /* attr */ undefined, /* keywords */ ['true', 'false']] },\n    { hidden: [false, /* attr */ undefined] },\n    { noModule: [false] },\n    { spellcheck: [true, /* attr */ undefined, /* keywords */ ['true', 'false']] },\n    { translate: [true, /* attr */ undefined, /* keywords */ ['yes', 'no']] },\n], HTMLElement);\n// Properties\n// HTMLElement.accessKeyLabel => string, readonly value of \"accessKey\"\n// HTMLElement.isContentEditable => boolean, readonly value of contentEditable\n// HTMLElement.nonce => string, NOT REFLECTED\n// HTMLElement.tabIndex => number, reflected attribute\n// Layout Properties (TBD)\n// HTMLElement.offsetHeight => double, readonly\n// HTMLElement.offsetLeft => double, readonly\n// HTMLElement.offsetParent => Element\n// HTMLElement.offsetTop => double, readonly\n// HTMLElement.offsetWidth => double, readonly\n// Unimplemented Properties\n// HTMLElement.contextMenu => HTMLElement\n// HTMLElement.dataset => Map<string (get/set), string>\n// HTMLElement.dropzone => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.inert => boolean, reflected\n// HTMLElement.itemScope => boolean\n// HTMLElement.itemType => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemId => string\n// HTMLElement.itemRef => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemProp => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemValue => object\n// HTMLElement.properties => HTMLPropertiesCollection, readonly\n//# sourceMappingURL=HTMLElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLAnchorElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n    /**\n     * Returns the href property/attribute value\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/toString\n     * @return string href attached to HTMLAnchorElement\n     */\n    toString() {\n        return this.href;\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * A Synonym for the Node.textContent property setter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @param text replacement for all current childNodes.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('a', HTMLAnchorElement);\ndefinePropertyBackedAttributes(HTMLAnchorElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLAnchorElement, 'relList', 'rel');\n// Reflected properties, strings.\n// HTMLAnchorElement.href => string, reflected attribute\n// HTMLAnchorElement.hreflang => string, reflected attribute\n// HTMLAnchorElement.media => string, reflected attribute\n// HTMLAnchorElement.target => string, reflected attribute\n// HTMLAnchorElement.type => string, reflected attribute\nreflectProperties([{ href: [''] }, { hreflang: [''] }, { media: [''] }, { target: [''] }, { type: [''] }], HTMLAnchorElement);\n// Unimplemented\n// HTMLAnchorElement.download => string, reflected attribute\n// HTMLAnchorElement.type => Is a DOMString that reflects the type HTML attribute, indicating the MIME type of the linked resource.\n// Unimplemented URL parse of href attribute due to IE11 compatibility and low usage.\n// Note: Implementation doable using a private url property\n/*\n  class {\n    private url: URL | null = null;\n\n    constructor(...) {\n      // Element.getAttribute('href') => Element.href.\n      Object.assign(this[TransferrableKeys.propertyBackedAttributes], {\n        href: this.href,\n      });\n    }\n\n    get href(): string {\n      return this.url ? this.url.href : '';\n    }\n    set href(url: string) {\n      this.url = new URL(url);\n      this.setAttribute('href', this.url.href);\n    }\n  }\n*/\n// HTMLAnchorElement.host => string\n// HTMLAnchorElement.hostname => string\n// HTMLAnchorElement.protocol => string\n// HTMLAnchorElement.pathname => string\n// HTMLAnchorElement.search => string\n// HTMLAnchorElement.hash => string\n// HTMLAnchorElement.username => string\n// HTMLAnchorElement.password => string\n// HTMLAnchorElement.origin => string, readonly (getter no setter)\n//# sourceMappingURL=HTMLAnchorElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLButtonElement extends HTMLElement {\n}\nregisterSubclass('button', HTMLButtonElement);\n// Reflected properties, strings.\n// HTMLButtonElement.formAction => string, reflected attribute\n// HTMLButtonElement.formEnctype => string, reflected attribute\n// HTMLButtonElement.formMethod => string, reflected attribute\n// HTMLButtonElement.formTarget => string, reflected attribute\n// HTMLButtonElement.name => string, reflected attribute\n// HTMLButtonElement.type => string, reflected attribute (default submit)\n// HTMLButtonElement.value => string, reflected attribute\n// HTMLButtonElement.autofocus => boolean, reflected attribute\n// HTMLButtonElement.disabled => boolean, reflected attribute\nreflectProperties([\n    { formAction: [''] },\n    { formEnctype: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { name: [''] },\n    { type: ['submit'] },\n    { value: [''] },\n    { autofocus: [false] },\n    { disabled: [false] },\n], HTMLButtonElement);\n// Not reflected\n// HTMLButtonElement.formNoValidate => boolean\n// HTMLButtonElement.validity => ValidityState, readonly\n// Unimplemented\n// HTMLButtonElement.form => HTMLFormElement | null, readonly\n// HTMLButtonElement.labels => Array<HTMLLabelElement>, readonly\n// HTMLButtonElement.menu => HTMLMenuElement\n// HTMLButtonElement.willValidate => boolean, readonly\n// HTMLButtonElement.validationMessage => string, readonly\n//# sourceMappingURL=HTMLButtonElement.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nconst f32 = new Float32Array(1);\nconst u16 = new Uint16Array(f32.buffer);\nfunction isSmallInt(num) {\n    u16[0] = num;\n    // If the Uint16Array doesn't coerce it to another value, that means it fits\n    // into a Uint16Array.\n    return u16[0] === num;\n}\n/**\n * Serializes arguments into a Uint16 compatible format.\n *\n * The serialization format uses a variable length tuple, with the first item\n * being the encoded representation's type and any number of values afterwards.\n *\n * @param args The arguments to serialize\n */\nexport function serializeTransferrableObject(args) {\n    const serialized = [];\n    for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        if (typeof arg === 'number') {\n            if (isSmallInt(arg)) {\n                serialized.push(1 /* SmallInt */, arg);\n            }\n            else {\n                f32[0] = arg;\n                serialized.push(2 /* Float */, u16[0], u16[1]);\n            }\n            continue;\n        }\n        if (typeof arg === 'string') {\n            serialized.push(3 /* String */, store(arg));\n            continue;\n        }\n        if (Array.isArray(arg)) {\n            serialized.push(4 /* Array */, arg.length);\n            const serializedArray = serializeTransferrableObject(arg);\n            for (let i = 0; i < serializedArray.length; i++) {\n                serialized.push(serializedArray[i]);\n            }\n            continue;\n        }\n        if (typeof arg === 'object') {\n            const serializedObject = arg[68 /* serializeAsTransferrableObject */]();\n            for (let i = 0; i < serializedObject.length; i++) {\n                serialized.push(serializedObject[i]);\n            }\n            continue;\n        }\n        throw new Error('Cannot serialize argument.');\n    }\n    return serialized;\n}\n//# sourceMappingURL=serializeTransferrableObject.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { store } from '../strings';\n/**\n * Wrapper class for CanvasGradient. The user will be able to manipulate as a regular CanvasGradient object.\n */\nexport class CanvasGradient {\n    constructor(id, document) {\n        this.document = document;\n        this.id = id;\n    }\n    addColorStop(offset, color) {\n        transfer(this.document, [\n            9 /* OBJECT_MUTATION */,\n            store('addColorStop'),\n            2,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject([...arguments]),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasGradient.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Wrapper class for CanvasPattern. The user will be able to manipulate as a regular CanvasPattern object.\n * This class will be used when the CanvasRenderingContext is using an OffscreenCanvas polyfill.\n */\nexport class CanvasPattern {\n    constructor(id) {\n        this.id = id;\n    }\n    /**\n     * This is an experimental method.\n     */\n    setTransform() { }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { toLower } from '../../utils';\nimport { store } from '../strings';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { CanvasGradient } from './CanvasGradient';\nimport { CanvasPattern } from './CanvasPattern';\n/**\n * Handles calls to a CanvasRenderingContext2D object in cases where the user's environment does not\n * support native OffscreenCanvas.\n */\nexport class OffscreenCanvasPolyfill {\n    constructor(canvas) {\n        this.canvas = canvas;\n    }\n    getContext(contextType) {\n        if (!this.context) {\n            if (toLower(contextType) === '2d') {\n                this.context = new OffscreenCanvasRenderingContext2DPolyfill(this.canvas);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nclass OffscreenCanvasRenderingContext2DPolyfill {\n    constructor(canvas) {\n        this.objectIndex = 0;\n        this.canvasElement = canvas;\n        this.lineDash = [];\n    }\n    [67 /* mutated */](fnName, args) {\n        transfer(this.canvasElement.ownerDocument, [\n            9 /* OBJECT_MUTATION */,\n            store(fnName),\n            args.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(args),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [6 /* CanvasRenderingContext2D */, this.canvasElement[7 /* index */]];\n    }\n    /**\n     * Creates object in the main thread, and associates it with the id provided.\n     * @param objectId ID to associate the created object with.\n     * @param creationMethod Method to use for object creation.\n     * @param creationArgs Arguments to pass into the creation method.\n     */\n    createObjectReference(objectId, creationMethod, creationArgs) {\n        transfer(this.canvasElement.ownerDocument, [\n            10 /* OBJECT_CREATION */,\n            store(creationMethod),\n            objectId,\n            creationArgs.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(creationArgs),\n        ]);\n    }\n    get canvas() {\n        return this.canvasElement;\n    }\n    clearRect(x, y, w, h) {\n        this[67 /* mutated */]('clearRect', [...arguments]);\n    }\n    fillRect(x, y, w, h) {\n        this[67 /* mutated */]('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, w, h) {\n        this[67 /* mutated */]('strokeRect', [...arguments]);\n    }\n    set lineWidth(value) {\n        this[67 /* mutated */]('lineWidth', [...arguments]);\n    }\n    fillText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('fillText', [...arguments]);\n    }\n    moveTo(x, y) {\n        this[67 /* mutated */]('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this[67 /* mutated */]('lineTo', [...arguments]);\n    }\n    closePath() {\n        this[67 /* mutated */]('closePath', []);\n    }\n    stroke() {\n        this[67 /* mutated */]('stroke', []);\n    }\n    restore() {\n        this[67 /* mutated */]('restore', []);\n    }\n    save() {\n        this[67 /* mutated */]('save', []);\n    }\n    resetTransform() {\n        this[67 /* mutated */]('resetTransform', []);\n    }\n    rotate(angle) {\n        this[67 /* mutated */]('rotate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this[67 /* mutated */]('transform', [...arguments]);\n    }\n    translate(x, y) {\n        this[67 /* mutated */]('translate', [...arguments]);\n    }\n    scale(x, y) {\n        this[67 /* mutated */]('scale', [...arguments]);\n    }\n    set globalAlpha(value) {\n        this[67 /* mutated */]('globalAlpha', [...arguments]);\n    }\n    set globalCompositeOperation(value) {\n        this[67 /* mutated */]('globalCompositeOperation', [...arguments]);\n    }\n    set imageSmoothingQuality(value) {\n        this[67 /* mutated */]('imageSmoothingQuality', [...arguments]);\n    }\n    set fillStyle(value) {\n        this[67 /* mutated */]('fillStyle', [...arguments]);\n    }\n    set strokeStyle(value) {\n        this[67 /* mutated */]('strokeStyle', [...arguments]);\n    }\n    set shadowBlur(value) {\n        this[67 /* mutated */]('shadowBlur', [...arguments]);\n    }\n    set shadowColor(value) {\n        this[67 /* mutated */]('shadowColor', [...arguments]);\n    }\n    set shadowOffsetX(value) {\n        this[67 /* mutated */]('shadowOffsetX', [...arguments]);\n    }\n    set shadowOffsetY(value) {\n        this[67 /* mutated */]('shadowOffsetY', [...arguments]);\n    }\n    set filter(value) {\n        this[67 /* mutated */]('filter', [...arguments]);\n    }\n    beginPath() {\n        this[67 /* mutated */]('beginPath', []);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('strokeText', [...arguments]);\n    }\n    set textAlign(value) {\n        this[67 /* mutated */]('textAlign', [...arguments]);\n    }\n    set textBaseline(value) {\n        this[67 /* mutated */]('textBaseline', [...arguments]);\n    }\n    set lineCap(value) {\n        this[67 /* mutated */]('lineCap', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this[67 /* mutated */]('lineDashOffset', [...arguments]);\n    }\n    set lineJoin(value) {\n        this[67 /* mutated */]('lineJoin', [...arguments]);\n    }\n    set miterLimit(value) {\n        this[67 /* mutated */]('miterLimit', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this[67 /* mutated */]('arcTo', [...arguments]);\n    }\n    set direction(value) {\n        this[67 /* mutated */]('direction', [...arguments]);\n    }\n    set font(value) {\n        this[67 /* mutated */]('font', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('ellipse', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this[67 /* mutated */]('bezierCurveTo', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this[67 /* mutated */]('rect', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this[67 /* mutated */]('quadraticCurveTo', [...arguments]);\n    }\n    set imageSmoothingEnabled(value) {\n        this[67 /* mutated */]('imageSmoothingEnabled', [...arguments]);\n    }\n    setLineDash(lineDash) {\n        lineDash = [...lineDash];\n        if (lineDash.length % 2 !== 0) {\n            lineDash = lineDash.concat(lineDash);\n        }\n        this.lineDash = lineDash;\n        this[67 /* mutated */]('setLineDash', [...arguments]);\n    }\n    getLineDash() {\n        return [...this.lineDash];\n    }\n    clip(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('clip(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('clip', [...arguments]);\n    }\n    fill(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('fill(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('fill', [...arguments]);\n    }\n    // Method has a different signature in MDN than it does in HTML spec\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        if (typeof transformOrA === 'object') {\n            throw new Error('setTransform(DOMMatrix2DInit) is currently not supported!');\n        }\n        this[67 /* mutated */]('setTransform', [...arguments]);\n    }\n    createLinearGradient(x0, y0, x1, y1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createLinearGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createRadialGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createPattern(image, repetition) {\n        const patternId = this.objectIndex++;\n        this.createObjectReference(patternId, 'createPattern', [...arguments]);\n        return new CanvasPattern(patternId);\n    }\n    drawImage(image, dx, dy) {\n        this[67 /* mutated */]('drawImage', [...arguments]);\n    }\n    createImageData() {\n        return {};\n    }\n    getImageData() {\n        return {};\n    }\n    putImageData() { }\n    isPointInPath() {\n        throw new Error('isPointInPath is not implemented.');\n    }\n    isPointInStroke() {\n        throw new Error('isPointInStroke is not implemented.');\n    }\n    measureText() {\n        throw new Error('measureText is not implemented.');\n    }\n}\n//# sourceMappingURL=OffscreenCanvasPolyfill.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nlet indexTracker = 0;\nexport function retrieveImageBitmap(image, canvas) {\n    const callIndex = indexTracker++;\n    const document = canvas.ownerDocument;\n    return new Promise(resolve => {\n        const messageHandler = ({ data }) => {\n            if (data[12 /* type */] === 10 /* IMAGE_BITMAP_INSTANCE */ && data[73 /* callIndex */] === callIndex) {\n                document.removeGlobalEventListener('message', messageHandler);\n                const transferredImageBitmap = data[38 /* data */];\n                resolve(transferredImageBitmap);\n            }\n        };\n        if (!document.addGlobalEventListener) {\n            throw new Error('addGlobalEventListener is not defined.');\n        }\n        else {\n            document.addGlobalEventListener('message', messageHandler);\n            transfer(canvas.ownerDocument, [11 /* IMAGE_BITMAP_INSTANCE */, image[7 /* index */], callIndex]);\n        }\n    });\n}\n//# sourceMappingURL=canvas-utils.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { retrieveImageBitmap } from './canvas-utils';\n/**\n * Wraps CanvasPattern for usage in a native OffscreenCanvas case.\n */\nexport class FakeNativeCanvasPattern {\n    constructor() {\n        this[_a] = {};\n        this[_b] = false;\n    }\n    /**\n     * Retrieves ImageBitmap object from main-thread, which replicates the input image. Upon\n     * retrieval, uses it to create a real CanvasPattern and upgrade the implementation property.\n     * @param canvas Canvas element used to create the pattern.\n     * @param image Image to be used as the pattern's image\n     * @param repetition DOMStrings indicating how to repeat the pattern's image.\n     */\n    [(_a = 70 /* patternImplementation */, _b = 71 /* patternUpgraded */, 72 /* patternUpgradePromise */, 69 /* retrieveCanvasPattern */)](canvas, image, repetition) {\n        this[72 /* patternUpgradePromise */] = retrieveImageBitmap(image, canvas)\n            // Create new pattern with retrieved ImageBitmap\n            .then((instance) => {\n            const pattern = canvas.getContext('2d').createPattern(instance, repetition);\n            if (!pattern) {\n                throw new Error('Pattern is null!');\n            }\n            this[70 /* patternImplementation */] = pattern;\n            this[71 /* patternUpgraded */] = true;\n        });\n        return this[72 /* patternUpgradePromise */];\n    }\n    // This method is experimental.\n    // Takes an SVGMatrix as an argument, which is a deprecated API.\n    setTransform() { }\n}\n//# sourceMappingURL=FakeNativeCanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { OffscreenCanvasPolyfill } from './OffscreenCanvasPolyfill';\nimport { FakeNativeCanvasPattern } from './FakeNativeCanvasPattern';\nimport { retrieveImageBitmap } from './canvas-utils';\nexport const deferredUpgrades = new WeakMap();\n/**\n * Delegates all CanvasRenderingContext2D calls, either to an OffscreenCanvas or a polyfill\n * (depending on whether it is supported).\n */\nexport class CanvasRenderingContext2DShim {\n    constructor(canvas) {\n        this.queue = [];\n        this.upgraded = false;\n        // createPattern calls need to retrieve an ImageBitmap from the main-thread. Since those can\n        // happen subsequently, we must keep track of these to avoid reentrancy problems.\n        this.unresolvedCalls = 0;\n        this.canvasElement = canvas;\n        const OffscreenCanvas = canvas.ownerDocument.defaultView.OffscreenCanvas;\n        // If the browser does not support OffscreenCanvas, use polyfill\n        if (typeof OffscreenCanvas === 'undefined') {\n            this.implementation = new OffscreenCanvasPolyfill(canvas).getContext('2d');\n            this.upgraded = true;\n            this.polyfillUsed = true;\n        }\n        // If the browser supports OffscreenCanvas:\n        // 1. Use un-upgraded (not auto-synchronized) version for all calls performed immediately after\n        // creation. All calls will be queued to call on upgraded version after.\n        // 2. Retrieve an auto-synchronized OffscreenCanvas from the main-thread and call all methods\n        // in the queue.\n        else {\n            this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n            this.getOffscreenCanvasAsync(this.canvasElement);\n            this.polyfillUsed = false;\n        }\n    }\n    /**\n     * Retrieves auto-synchronized version of an OffscreenCanvas from the main-thread.\n     * @param canvas HTMLCanvasElement associated with this context.\n     */\n    getOffscreenCanvasAsync(canvas) {\n        this.unresolvedCalls++;\n        const deferred = {};\n        const document = this.canvasElement.ownerDocument;\n        const isTestMode = !document.addGlobalEventListener;\n        const upgradePromise = new Promise(resolve => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 9 /* OFFSCREEN_CANVAS_INSTANCE */ &&\n                    data[13 /* target */][0] === canvas[7 /* index */]) {\n                    document.removeGlobalEventListener('message', messageHandler);\n                    const transferredOffscreenCanvas = data[38 /* data */];\n                    resolve(transferredOffscreenCanvas);\n                }\n            };\n            if (!document.addGlobalEventListener) {\n                if (isTestMode) {\n                    deferred.resolve = resolve;\n                }\n                else {\n                    throw new Error('addGlobalEventListener is not defined.');\n                }\n            }\n            else {\n                document.addGlobalEventListener('message', messageHandler);\n                transfer(canvas.ownerDocument, [8 /* OFFSCREEN_CANVAS_INSTANCE */, canvas[7 /* index */]]);\n            }\n        }).then((instance) => {\n            this.goodImplementation = instance.getContext('2d');\n            this.maybeUpgradeImplementation();\n        });\n        if (isTestMode) {\n            deferred.upgradePromise = upgradePromise;\n            deferredUpgrades.set(canvas, deferred);\n        }\n        return upgradePromise;\n    }\n    /**\n     * Degrades the underlying context implementation and adds to the unresolved call count.\n     */\n    degradeImplementation() {\n        this.upgraded = false;\n        const OffscreenCanvas = this.canvasElement.ownerDocument.defaultView.OffscreenCanvas;\n        this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n        this.unresolvedCalls++;\n    }\n    /**\n     * Will upgrade the underlying context implementation if no more unresolved calls remain.\n     */\n    maybeUpgradeImplementation() {\n        this.unresolvedCalls--;\n        if (this.unresolvedCalls === 0) {\n            this.implementation = this.goodImplementation;\n            this.upgraded = true;\n            this.flushQueue();\n        }\n    }\n    flushQueue() {\n        for (const call of this.queue) {\n            if (call.isSetter) {\n                this[call.fnName] = call.args[0];\n            }\n            else {\n                this[call.fnName](...call.args);\n            }\n        }\n        this.queue.length = 0;\n    }\n    delegateFunc(name, args) {\n        const returnValue = this.implementation[name](...args);\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args, isSetter: false });\n        }\n        return returnValue;\n    }\n    delegateSetter(name, args) {\n        this.implementation[name] = args[0];\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args: args, isSetter: true });\n        }\n    }\n    delegateGetter(name) {\n        return this.implementation[name];\n    }\n    /* DRAWING RECTANGLES */\n    clearRect(x, y, width, height) {\n        this.delegateFunc('clearRect', [...arguments]);\n    }\n    fillRect(x, y, width, height) {\n        this.delegateFunc('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, width, height) {\n        this.delegateFunc('strokeRect', [...arguments]);\n    }\n    /* DRAWING TEXT */\n    fillText(text, x, y, maxWidth) {\n        this.delegateFunc('fillText', [...arguments]);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this.delegateFunc('strokeText', [...arguments]);\n    }\n    measureText(text) {\n        return this.delegateFunc('measureText', [...arguments]);\n    }\n    /* LINE STYLES */\n    set lineWidth(value) {\n        this.delegateSetter('lineWidth', [...arguments]);\n    }\n    get lineWidth() {\n        return this.delegateGetter('lineWidth');\n    }\n    set lineCap(value) {\n        this.delegateSetter('lineCap', [...arguments]);\n    }\n    get lineCap() {\n        return this.delegateGetter('lineCap');\n    }\n    set lineJoin(value) {\n        this.delegateSetter('lineJoin', [...arguments]);\n    }\n    get lineJoin() {\n        return this.delegateGetter('lineJoin');\n    }\n    set miterLimit(value) {\n        this.delegateSetter('miterLimit', [...arguments]);\n    }\n    get miterLimit() {\n        return this.delegateGetter('miterLimit');\n    }\n    getLineDash() {\n        return this.delegateFunc('getLineDash', [...arguments]);\n    }\n    setLineDash(segments) {\n        this.delegateFunc('setLineDash', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this.delegateSetter('lineDashOffset', [...arguments]);\n    }\n    get lineDashOffset() {\n        return this.delegateGetter('lineDashOffset');\n    }\n    /* TEXT STYLES */\n    set font(value) {\n        this.delegateSetter('font', [...arguments]);\n    }\n    get font() {\n        return this.delegateGetter('font');\n    }\n    set textAlign(value) {\n        this.delegateSetter('textAlign', [...arguments]);\n    }\n    get textAlign() {\n        return this.delegateGetter('textAlign');\n    }\n    set textBaseline(value) {\n        this.delegateSetter('textBaseline', [...arguments]);\n    }\n    get textBaseline() {\n        return this.delegateGetter('textBaseline');\n    }\n    set direction(value) {\n        this.delegateSetter('direction', [...arguments]);\n    }\n    get direction() {\n        return this.delegateGetter('direction');\n    }\n    /* FILL AND STROKE STYLES */\n    set fillStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' will be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({ fnName: 'fillStyle', args: [value], isSetter: true });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('fillStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('fillStyle', [...arguments]);\n        }\n    }\n    get fillStyle() {\n        return this.delegateGetter('fillStyle');\n    }\n    set strokeStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' could be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({ fnName: 'strokeStyle', args: [value], isSetter: true });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('strokeStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('strokeStyle', [...arguments]);\n        }\n    }\n    get strokeStyle() {\n        return this.delegateGetter('strokeStyle');\n    }\n    /* GRADIENTS AND PATTERNS */\n    createLinearGradient(x0, y0, x1, y1) {\n        return this.delegateFunc('createLinearGradient', [...arguments]);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        return this.delegateFunc('createRadialGradient', [...arguments]);\n    }\n    createPattern(image, repetition) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            return this.delegateFunc('createPattern', [...arguments]);\n        }\n        else {\n            // Degrade the underlying implementation because we don't want calls on the real one until\n            // after pattern is retrieved\n            this.degradeImplementation();\n            const fakePattern = new FakeNativeCanvasPattern();\n            fakePattern[69 /* retrieveCanvasPattern */](this.canvas, image, repetition).then(() => {\n                this.maybeUpgradeImplementation();\n            });\n            return fakePattern;\n        }\n    }\n    /* DRAWING IMAGES */\n    drawImage(image, dx, dy) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            this.delegateFunc('drawImage', [...arguments]);\n        }\n        else {\n            // Queue the drawImage call to make sure it gets called in correct order\n            const args = [];\n            this.queue.push({ fnName: 'drawImage', args, isSetter: false });\n            // Degrade the underlying implementation because we don't want calls on the real one\n            // until after the ImageBitmap is received.\n            this.degradeImplementation();\n            // Retrieve an ImageBitmap from the main-thread with the same image as the input image\n            retrieveImageBitmap(image, this.canvas)\n                // Then call the actual method with the retrieved ImageBitmap\n                .then((instance) => {\n                args.push(instance, dx, dy);\n                this.maybeUpgradeImplementation();\n            });\n        }\n    }\n    /* SHADOWS */\n    set shadowBlur(value) {\n        this.delegateSetter('shadowBlur', [...arguments]);\n    }\n    get shadowBlur() {\n        return this.delegateGetter('shadowBlur');\n    }\n    set shadowColor(value) {\n        this.delegateSetter('shadowColor', [...arguments]);\n    }\n    get shadowColor() {\n        return this.delegateGetter('shadowColor');\n    }\n    set shadowOffsetX(value) {\n        this.delegateSetter('shadowOffsetX', [...arguments]);\n    }\n    get shadowOffsetX() {\n        return this.delegateGetter('shadowOffsetX');\n    }\n    set shadowOffsetY(value) {\n        this.delegateSetter('shadowOffsetY', [...arguments]);\n    }\n    get shadowOffsetY() {\n        return this.delegateGetter('shadowOffsetY');\n    }\n    /* PATHS */\n    beginPath() {\n        this.delegateFunc('beginPath', [...arguments]);\n    }\n    closePath() {\n        this.delegateFunc('closePath', [...arguments]);\n    }\n    moveTo(x, y) {\n        this.delegateFunc('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this.delegateFunc('lineTo', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.delegateFunc('bezierCurveTo', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this.delegateFunc('quadraticCurveTo', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this.delegateFunc('arcTo', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('ellipse', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this.delegateFunc('rect', [...arguments]);\n    }\n    /* DRAWING PATHS */\n    fill(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('fill', args);\n    }\n    stroke(path) {\n        const args = [...arguments];\n        this.delegateFunc('stroke', args);\n    }\n    clip(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('clip', args);\n    }\n    isPointInPath(pathOrX, xOrY, yOrFillRule, fillRule) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInPath', args);\n    }\n    isPointInStroke(pathOrX, xOrY, y) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInStroke', args);\n    }\n    /* TRANSFORMATIONS */\n    rotate(angle) {\n        this.delegateFunc('rotate', [...arguments]);\n    }\n    scale(x, y) {\n        this.delegateFunc('scale', [...arguments]);\n    }\n    translate(x, y) {\n        this.delegateFunc('translate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this.delegateFunc('transform', [...arguments]);\n    }\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        const args = [...arguments];\n        this.delegateFunc('setTransform', args);\n    }\n    /* experimental */ resetTransform() {\n        this.delegateFunc('resetTransform', [...arguments]);\n    }\n    /* COMPOSITING */\n    set globalAlpha(value) {\n        this.delegateSetter('globalAlpha', [...arguments]);\n    }\n    get globalAlpha() {\n        return this.delegateGetter('globalAlpha');\n    }\n    set globalCompositeOperation(value) {\n        this.delegateSetter('globalCompositeOperation', [...arguments]);\n    }\n    get globalCompositeOperation() {\n        return this.delegateGetter('globalCompositeOperation');\n    }\n    /* PIXEL MANIPULATION */\n    createImageData(imagedataOrWidth, height) {\n        const args = [...arguments];\n        return this.delegateFunc('createImageData', args);\n    }\n    getImageData(sx, sy, sw, sh) {\n        return this.delegateFunc('getImageData', [...arguments]);\n    }\n    putImageData(imageData, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight) {\n        this.delegateFunc('putImageData', [...arguments]);\n    }\n    /* IMAGE SMOOTHING */\n    /* experimental */ set imageSmoothingEnabled(value) {\n        this.delegateSetter('imageSmoothingEnabled', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingEnabled() {\n        return this.delegateGetter('imageSmoothingEnabled');\n    }\n    /* experimental */ set imageSmoothingQuality(value) {\n        this.delegateSetter('imageSmoothingQuality', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingQuality() {\n        return this.delegateGetter('imageSmoothingQuality');\n    }\n    /* THE CANVAS STATE */\n    save() {\n        this.delegateFunc('save', [...arguments]);\n    }\n    restore() {\n        this.delegateFunc('restore', [...arguments]);\n    }\n    // canvas property is readonly. We don't want to implement getters, but this must be here\n    // in order for TypeScript to not complain (for now)\n    get canvas() {\n        return this.canvasElement;\n    }\n    /* FILTERS */\n    /* experimental */ set filter(value) {\n        this.delegateSetter('filter', [...arguments]);\n    }\n    /* experimental */ get filter() {\n        return this.delegateGetter('filter');\n    }\n}\n//# sourceMappingURL=CanvasRenderingContext2D.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { HTMLElement } from './HTMLElement';\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { CanvasRenderingContext2DShim } from '../canvas/CanvasRenderingContext2D';\nexport class HTMLCanvasElement extends HTMLElement {\n    getContext(contextType) {\n        if (!this.context) {\n            if (contextType === '2D' || contextType === '2d') {\n                this.context = new CanvasRenderingContext2DShim(this);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nregisterSubclass('canvas', HTMLCanvasElement);\n// Reflected Properties\n// HTMLCanvasElement.height => number, reflected attribute\n// HTMLCanvasElement.width => number, reflected attribute\nreflectProperties([{ height: [0] }, { width: [0] }], HTMLCanvasElement);\n// Unimplemented Properties\n// HTMLCanvasElement.mozOpaque => boolean\n// HTMLCanvasElement.mozPrintCallback => function\n// Unimplemented Methods\n// HTMLCanvasElement.captureStream()\n// HTMLCanvasElement.toDataURL()\n// HTMLCanvasElement.toBlob()\n// HTMLCanvasElement.transferControlToOffscreen()\n// HTMLCanvasElement.mozGetAsFile()\n//# sourceMappingURL=HTMLCanvasElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLDataElement extends HTMLElement {\n}\nregisterSubclass('data', HTMLDataElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.value => string, reflected attribute\nreflectProperties([{ value: [''] }], HTMLDataElement);\n//# sourceMappingURL=HTMLDataElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nexport class HTMLDataListElement extends HTMLElement {\n    /**\n     * Getter returning option elements that are direct children of a HTMLDataListElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDataListElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.childNodes.filter((node) => node.nodeName === 'OPTION');\n    }\n}\nregisterSubclass('datalist', HTMLDataListElement);\n/**\n * HTMLDataListElement.options Read only\n * Is a HTMLCollection representing a collection of the contained option elements.\n */\n/**\n * <label for=\"myBrowser\">Choose a browser from this list:</label>\n * <input list=\"browsers\" id=\"myBrowser\" name=\"myBrowser\" />\n * <datalist id=\"browsers\">\n *   <option value=\"Chrome\">\n *   <option value=\"Firefox\">\n *   <option value=\"Internet Explorer\">\n *   <option value=\"Opera\">\n *   <option value=\"Safari\">\n *   <option value=\"Microsoft Edge\">\n * </datalist>\n */\n//# sourceMappingURL=HTMLDataListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLEmbedElement extends HTMLElement {\n}\nregisterSubclass('embed', HTMLEmbedElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.height => string, reflected attribute\n// HTMLEmbedElement.src => string, reflected attribute\n// HTMLEmbedElement.type => string, reflected attribute\n// HTMLEmbedElement.width => string, reflected attribute\nreflectProperties([{ height: [''] }, { src: [''] }, { type: [''] }, { width: [''] }], HTMLEmbedElement);\n// Unimplemented\n// HTMLEmbedElement.align => string, not reflected\n// HTMLEmbedElement.name => string, not reflected\n//# sourceMappingURL=HTMLEmbedElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nconst MATCHING_CHILD_ELEMENT_TAGNAMES = 'BUTTON FIELDSET INPUT OBJECT OUTPUT SELECT TEXTAREA'.split(' ');\n/**\n * The HTMLFormControlsCollection interface represents a collection of HTML form control elements.\n * It is mixedin to both HTMLFormElement and HTMLFieldSetElement.\n */\nexport const HTMLFormControlsCollectionMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'elements', {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection\n         * @return Element array matching children of specific tagnames.\n         */\n        get() {\n            return matchChildrenElements(this, tagNameConditionPredicate(MATCHING_CHILD_ELEMENT_TAGNAMES));\n        },\n    });\n};\n//# sourceMappingURL=HTMLFormControlsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { HTMLElement } from './HTMLElement';\nimport { toLower } from '../../utils';\nexport class HTMLFieldSetElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return hardcoded string 'fieldset'\n     */\n    get type() {\n        return toLower(this.tagName);\n    }\n}\nregisterSubclass('fieldset', HTMLFieldSetElement);\nHTMLFormControlsCollectionMixin(HTMLFieldSetElement);\n// Reflected properties\n// HTMLFieldSetElement.name => string, reflected attribute\n// HTMLFieldSetElement.disabled => boolean, reflected attribute\nreflectProperties([{ name: [''] }, { disabled: [false] }], HTMLFieldSetElement);\n// Unimplemented properties\n// HTMLFieldSetElement.validity\n// HTMLFieldSetElement.willValidate\n// HTMLFieldSetElement.validationMessage\n//# sourceMappingURL=HTMLFieldSetElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLFormElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.elements.length;\n    }\n}\nregisterSubclass('form', HTMLFormElement);\nHTMLFormControlsCollectionMixin(HTMLFormElement);\n// Reflected properties\n// HTMLFormElement.name => string, reflected attribute\n// HTMLFormElement.method => string, reflected attribute\n// HTMLFormElement.target => string, reflected attribute\n// HTMLFormElement.action => string, reflected attribute\n// HTMLFormElement.enctype => string, reflected attribute\n// HTMLFormElement.acceptCharset => string, reflected attribute\n// HTMLFormElement.autocomplete => string, reflected attribute\n// HTMLFormElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { name: [''] },\n    { method: ['get'] },\n    { target: [''] },\n    { action: [''] },\n    { enctype: ['application/x-www-form-urlencoded'] },\n    { acceptCharset: ['', /* attr */ 'accept-charset'] },\n    { autocomplete: ['on'] },\n    { autocapitalize: ['sentences'] },\n], HTMLFormElement);\n// Unimplemented properties\n// HTMLFormElement.encoding => string, reflected attribute\n// HTMLFormElement.noValidate => boolean, reflected attribute\n/*\nUnimplemented, TBD:\n\nNamed inputs are added to their owner form instance as properties, and can overwrite native properties\nif they share the same name (eg a form with an input named action will have its action property return\nthat input instead of the form's action HTML attribute).\n*/\n//# sourceMappingURL=HTMLFormElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nexport class HTMLIFrameElement extends HTMLElement {\n    // HTMLIFrameElement.sandbox, DOMTokenList, reflected attribute\n    get sandbox() {\n        return this._sandbox || (this._sandbox = new DOMTokenList(this, 'sandbox'));\n    }\n}\nregisterSubclass('iframe', HTMLIFrameElement);\ndefinePropertyBackedAttributes(HTMLIFrameElement, {\n    sandbox: [(el) => el.sandbox.value, (el, value) => (el.sandbox.value = value)],\n});\n// Reflected properties\n// HTMLIFrameElement.allow => string, reflected attribute\n// HTMLIFrameElement.allowFullscreen => boolean, reflected attribute\n// HTMLIFrameElement.csp => string, reflected attribute\n// HTMLIFrameElement.height => string, reflected attribute\n// HTMLIFrameElement.name => string, reflected attribute\n// HTMLIFrameElement.referrerPolicy => string, reflected attribute\n// HTMLIFrameElement.src => string, reflected attribute\n// HTMLIFrameElement.srcdoc => string, reflected attribute\n// HTMLIFrameElement.width => string, reflected attribute\nreflectProperties([\n    { allow: [''] },\n    { allowFullscreen: [false] },\n    { csp: [''] },\n    { height: [''] },\n    { name: [''] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { srcdoc: [''] },\n    { width: [''] },\n], HTMLIFrameElement);\n// Unimplemented Properties\n// HTMLIFrameElement.allowPaymentRequest => boolean, reflected attribute\n// HTMLIFrameElement.contentDocument => Document, read only (active document in the inline frame's nested browsing context)\n// HTMLIFrameElement.contentWindow => WindowProxy, read only (window proxy for the nested browsing context)\n//# sourceMappingURL=HTMLIFrameElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLImageElement extends HTMLElement {\n}\nregisterSubclass('img', HTMLImageElement);\n// Reflected Properties\n// HTMLImageElement.alt => string, reflected attribute\n// HTMLImageElement.crossOrigin => string, reflected attribute\n// HTMLImageElement.height => number, reflected attribute\n// HTMLImageElement.isMap => boolean, reflected attribute\n// HTMLImageElement.referrerPolicy => string, reflected attribute\n// HTMLImageElement.src => string, reflected attribute\n// HTMLImageElement.sizes => string, reflected attribute\n// HTMLImageElement.srcset => string, reflected attribute\n// HTMLImageElement.useMap => string, reflected attribute\n// HTMLImageElement.width => number, reflected attribute\nreflectProperties([\n    { alt: [''] },\n    { crossOrigin: [''] },\n    { height: [0] },\n    { isMap: [false] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { sizes: [''] },\n    { srcset: [''] },\n    { useMap: [''] },\n    { width: [0] },\n], HTMLImageElement);\n// Unimplmented Properties\n// HTMLImageElement.complete Read only\n// Returns a Boolean that is true if the browser has finished fetching the image, whether successful or not. It also shows true, if the image has no src value.\n// HTMLImageElement.currentSrc Read only\n// Returns a DOMString representing the URL to the currently displayed image (which may change, for example in response to media queries).\n// HTMLImageElement.naturalHeight Read only\n// Returns a unsigned long representing the intrinsic height of the image in CSS pixels, if it is available; else, it shows 0.\n// HTMLImageElement.naturalWidth Read only\n// Returns a unsigned long representing the intrinsic width of the image in CSS pixels, if it is available; otherwise, it will show 0.\n//# sourceMappingURL=HTMLImageElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements } from './matchElements';\n/**\n * The HTMLInputLabels interface represents a collection of input getters for their related label Elements.\n * It is mixedin to both HTMLInputElement, HTMLMeterElement, and HTMLProgressElement.\n */\nexport const HTMLInputLabelsMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'labels', {\n        /**\n         * Getter returning label elements associated to this meter.\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLProgressElement/labels\n         * @return label elements associated to this meter.\n         */\n        get() {\n            return matchChildrenElements(this.ownerDocument || this, element => element.tagName === 'LABEL' && element.for && element.for === this.id);\n        },\n    });\n};\n//# sourceMappingURL=HTMLInputLabelsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { reflectProperties } from './enhanceElement';\nimport { registerSubclass } from './Element';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nexport class HTMLInputElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        // Per spec, some attributes like 'value' and 'checked' change behavior based on dirty flags.\n        // Since these flags can only be changed on interaction (outside of worker), we can ignore them here.\n        // Tradeoffs: Consequent attribute changes are missing, HTMLFormElement.reset() doesn't work, etc.\n        // Alternative: Implement dirty flag checking in worker-dom, which would require listening for\n        //     and forwarding interaction events to flag \"dirtiness\".\n        // https://html.spec.whatwg.org/multipage/input.html#common-input-element-apis\n        this[_a] = '';\n        this[_b] = false;\n    }\n    // TODO(willchou): There are a few interrelated issues with `value` property.\n    //   1. \"Dirtiness\" caveat above.\n    //   2. Duplicate SYNC events. Sent by every event fired from elements with a `value`, plus the default 'change' listener.\n    //   3. Duplicate MUTATE events. Caused by stale `value` in worker due to no default 'input' listener (see below).\n    get value() {\n        return this[21 /* value */];\n    }\n    set value(value) {\n        // Don't early-out if value doesn't appear to have changed.\n        // The worker may have a stale value since 'input' events aren't being forwarded.\n        this[21 /* value */] = String(value);\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('value'),\n            0 /* FALSE */,\n            storeString(value),\n        ]);\n    }\n    get valueAsDate() {\n        // Don't use Date constructor or Date.parse() since ISO 8601 (yyyy-mm-dd) parsing is inconsistent.\n        const date = this.stringToDate(this[21 /* value */]);\n        const invalid = !date || isNaN(date.getTime());\n        return invalid ? null : date;\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support dates. */\n    set valueAsDate(value) {\n        if (!(value instanceof Date)) {\n            throw new TypeError('The provided value is not a Date.');\n        }\n        this.value = this.dateToString(value);\n    }\n    get valueAsNumber() {\n        if (this[21 /* value */].length === 0) {\n            return NaN;\n        }\n        return Number(this[21 /* value */]);\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support numbers. */\n    set valueAsNumber(value) {\n        if (typeof value === 'number') {\n            this.value = String(value);\n        }\n        else {\n            this.value = '';\n        }\n    }\n    get checked() {\n        return this[47 /* checked */];\n    }\n    set checked(value) {\n        if (this[47 /* checked */] === value) {\n            return;\n        }\n        this[47 /* checked */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('checked'),\n            1 /* TRUE */,\n            value === true ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * Returns a date in 'yyyy-mm-dd' format.\n     * @param date\n     */\n    dateToString(date) {\n        const y = date.getFullYear();\n        const m = date.getMonth() + 1; // getMonth() is 0-index.\n        const d = date.getDate();\n        return `${y}-${m > 9 ? '' : '0'}${m}-${d > 9 ? '' : '0'}${d}`;\n    }\n    /**\n     * Returns a Date from a 'yyyy-mm-dd' format.\n     * @param s\n     */\n    stringToDate(str) {\n        const components = str.split('-');\n        if (components.length !== 3) {\n            return null;\n        }\n        const [y, m, d] = components;\n        // Month is 0-index.\n        return new Date(parseInt(y, 10), parseInt(m, 10) - 1, parseInt(d, 10));\n    }\n}\n_a = 21 /* value */, _b = 47 /* checked */;\nregisterSubclass('input', HTMLInputElement);\nHTMLInputLabelsMixin(HTMLInputElement);\n// Reflected Properties\n// HTMLInputElement.formAction => string, reflected attribute\n// HTMLInputElement.formEncType\t=> string, reflected attribute\n// HTMLInputElement.formMethod => string, reflected attribute\n// HTMLInputElement.formTarget => string, reflected attribute\n// HTMLInputElement.name => string, reflected attribute\n// HTMLInputElement.type => string, reflected attribute\n// HTMLInputElement.disabled => boolean, reflected attribute\n// HTMLInputElement.autofocus => boolean, reflected attribute\n// HTMLInputElement.required => boolean, reflected attribute\n// HTMLInputElement.defaultChecked => boolean, reflected attribute (\"checked\")\n// HTMLInputElement.alt => string, reflected attribute\n// HTMLInputElement.height => number, reflected attribute\n// HTMLInputElement.src => string, reflected attribute\n// HTMLInputElement.width => number, reflected attribute\n// HTMLInputElement.accept => string, reflected attribute\n// HTMLInputElement.autocomplete => string, reflected attribute\n// HTMLInputElement.maxLength => number, reflected attribute\n// HTMLInputElement.size => number, reflected attribute\n// HTMLInputElement.pattern => string, reflected attribute\n// HTMLInputElement.placeholder => string, reflected attribute\n// HTMLInputElement.readOnly => boolean, reflected attribute\n// HTMLInputElement.min => string, reflected attribute\n// HTMLInputElement.max => string, reflected attribute\n// HTMLInputElement.defaultValue => string, reflected attribute\n// HTMLInputElement.dirname => string, reflected attribute\n// HTMLInputElement.multiple => boolean, reflected attribute\n// HTMLInputElement.step => string, reflected attribute\n// HTMLInputElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { accept: [''] },\n    { alt: [''] },\n    { autocapitalize: [''] },\n    { autocomplete: [''] },\n    { autofocus: [false] },\n    { defaultChecked: [false, /* attr */ 'checked'] },\n    { defaultValue: ['', /* attr */ 'value'] },\n    { dirName: [''] },\n    { disabled: [false] },\n    { formAction: [''] },\n    { formEncType: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { height: [0] },\n    { max: [''] },\n    { maxLength: [0] },\n    { min: [''] },\n    { multiple: [false] },\n    { name: [''] },\n    { pattern: [''] },\n    { placeholder: [''] },\n    { readOnly: [false] },\n    { required: [false] },\n    { size: [0] },\n    { src: [''] },\n    { step: [''] },\n    { type: ['text'] },\n    { width: [0] },\n], HTMLInputElement);\n// TODO(KB) Not Reflected Properties\n// HTMLInputElement.indeterminate => boolean\n// Unimplemented Properties\n// HTMLInputElement.formNoValidate => string, reflected attribute\n// HTMLInputElement.validity => ValidityState, readonly\n// HTMLInputElement.validationMessage => string, readonly\n// HTMLInputElement.willValidate => boolean, readonly\n// HTMLInputElement.allowdirs => boolean\n// HTMLInputElement.files\t=> Array<File>\n// HTMLInputElement.webkitdirectory\t=> boolean, reflected attribute\n// HTMLInputElement.webkitEntries => Array<FileSystemEntry>\n// HTMLInputElement.selectionStart => number\n// HTMLInputElement.selectionEnd => number\n// HTMLInputElement.selectionDirection => string\n// HTMLInputElement.list => Element, read only (element pointed by list attribute)\n// Unimplemented Methods\n// HTMLInputElement.setSelectionRange()\n// HTMLInputElement.setRangeText()\n// HTMLInputElement.setCustomValidity()\n// HTMLInputElement.checkValidity()\n// HTMLInputElement.stepDown()\n// HTMLInputElement.stepUp()\n//# sourceMappingURL=HTMLInputElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildElement, tagNameConditionPredicate } from './matchElements';\nexport class HTMLLabelElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control\n     * @return input element\n     */\n    get control() {\n        const htmlFor = this.getAttribute('for');\n        if (htmlFor !== null) {\n            return this.ownerDocument && this.ownerDocument.getElementById(htmlFor);\n        }\n        return matchChildElement(this, tagNameConditionPredicate(['INPUT']));\n    }\n}\nregisterSubclass('label', HTMLLabelElement);\n// Reflected Properties\n// HTMLLabelElement.htmlFor => string, reflected attribute 'for'\nreflectProperties([{ htmlFor: ['', 'for'] }], HTMLLabelElement);\n//# sourceMappingURL=HTMLLabelElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nexport class HTMLLinkElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n}\nregisterSubclass('link', HTMLLinkElement);\ndefinePropertyBackedAttributes(HTMLLinkElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLLinkElement, 'relList', 'rel');\n// Reflected Properties\n// HTMLLinkElement.as => string, reflected attribute\n// HTMLLinkElement.crossOrigin => string, reflected attribute\n// HTMLLinkElement.disabled => boolean, reflected attribute\n// HTMLLinkElement.href => string, reflected attribute\n// HTMLLinkElement.hreflang => string, reflected attribute\n// HTMLLinkElement.media => string, reflected attribute\n// HTMLLinkElement.referrerPolicy => string, reflected attribute\n// HTMLLinkElement.sizes => string, reflected attribute\n// HTMLLinkElement.type => string, reflected attribute\nreflectProperties([\n    { as: [''] },\n    { crossOrigin: [''] },\n    { disabled: [false] },\n    { href: [''] },\n    { hreflang: [''] },\n    { media: [''] },\n    { referrerPolicy: [''] },\n    { sizes: [''] },\n    { type: [''] },\n], HTMLLinkElement);\n// Unimplemented Properties\n// LinkStyle.sheet Read only\n// Returns the StyleSheet object associated with the given element, or null if there is none.\n//# sourceMappingURL=HTMLLinkElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildrenElements } from './matchElements';\nexport class HTMLMapElement extends HTMLElement {\n    /**\n     * Getter returning area elements associated to this map.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\n     * @return area elements associated to this map.\n     */\n    get areas() {\n        return matchChildrenElements(this, element => element.tagName === 'AREA');\n    }\n}\nregisterSubclass('map', HTMLMapElement);\n// Reflected Properties\n// HTMLMapElement.name => string, reflected attribute\nreflectProperties([{ name: [''] }], HTMLMapElement);\n//# sourceMappingURL=HTMLMapElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLMeterElement extends HTMLElement {\n}\nregisterSubclass('meter', HTMLMeterElement);\nHTMLInputLabelsMixin(HTMLMeterElement);\n// Reflected Properties\n// HTMLMeterElement.high => number, reflected attribute\n// HTMLMeterElement.low => number, reflected attribute\n// HTMLMeterElement.max => number, reflected attribute\n// HTMLMeterElement.min => number, reflected attribute\n// HTMLMeterElement.optimum => number, reflected attribute\n// HTMLMeterElement.value => number, reflected attribute\nreflectProperties([{ high: [0] }, { low: [0] }, { max: [1] }, { min: [0] }, { optimum: [0] }, { value: [0] }], HTMLMeterElement);\n//# sourceMappingURL=HTMLMeterElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLModElement extends HTMLElement {\n}\nregisterSubclass('del', HTMLModElement);\nregisterSubclass('ins', HTMLModElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\n// HTMLModElement.datetime => string, reflected attribute\nreflectProperties([{ cite: [''] }, { datetime: [''] }], HTMLModElement);\n//# sourceMappingURL=HTMLModElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLOListElement extends HTMLElement {\n}\nregisterSubclass('ol', HTMLOListElement);\n// Reflected Properties\n// HTMLModElement.reversed => boolean, reflected attribute\n// HTMLModElement.start => number, reflected attribute\n// HTMLOListElement.type => string, reflected attribute\nreflectProperties([{ reversed: [false] }, { start: [1] }, { type: [''] }], HTMLOListElement);\n//# sourceMappingURL=HTMLOListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { transfer } from '../MutationTransfer';\nimport { store as storeString } from '../strings';\nexport class HTMLOptionElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return position of the option within the list of options it's within, or zero if there is no valid parent.\n     */\n    get index() {\n        return (this.parentNode && this.parentNode.children.indexOf(this)) || 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return label attribute value or text content if there is no attribute.\n     */\n    get label() {\n        return this.getAttribute('label') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param label new label value to store as an attribute.\n     */\n    set label(label) {\n        this.setAttribute('label', label);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return boolean based on if the option element is selected.\n     */\n    get selected() {\n        return this[52 /* selected */];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new selected boolean value.\n     */\n    set selected(value) {\n        this[52 /* selected */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('selected'),\n            1 /* TRUE */,\n            this[52 /* selected */] ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value attribute value or text content if there is no attribute.\n     */\n    get value() {\n        return this.getAttribute('value') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new value for an option element.\n     */\n    set value(value) {\n        this.setAttribute('value', value);\n    }\n}\n_a = 52 /* selected */;\nregisterSubclass('option', HTMLOptionElement);\ndefinePropertyBackedAttributes(HTMLOptionElement, {\n    selected: [(el) => String(el[52 /* selected */]), (el, value) => (el.selected = value === 'true')],\n});\n// Reflected Properties\n// HTMLOptionElement.defaultSelected => boolean, reflected attribute\n// HTMLOptionElement.disabled => boolean, reflected attribute\n// HTMLOptionElement.type => string, reflected attribute\nreflectProperties([{ defaultSelected: [false, /* attr */ 'selected'] }, { disabled: [false] }, { type: [''] }], HTMLOptionElement);\n// Implemented at HTMLElement\n// HTMLOptionElement.form, Read only\t=> HTMLFormElement\n//# sourceMappingURL=HTMLOptionElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLProgressElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = true;\n        this[_b] = 0;\n    }\n    get position() {\n        return this[48 /* indeterminate */] ? -1 : this[21 /* value */] / this.max;\n    }\n    get value() {\n        return this[21 /* value */];\n    }\n    set value(value) {\n        this[48 /* indeterminate */] = false;\n        this[21 /* value */] = value;\n        // TODO(KB) This is a property mutation needing tracked.\n    }\n}\n_a = 48 /* indeterminate */, _b = 21 /* value */;\nregisterSubclass('progress', HTMLProgressElement);\nHTMLInputLabelsMixin(HTMLProgressElement);\n// Reflected Properties\n// HTMLModElement.max => number, reflected attribute\nreflectProperties([{ max: [1] }], HTMLProgressElement);\n//# sourceMappingURL=HTMLProgressElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLQuoteElement extends HTMLElement {\n}\nregisterSubclass('blockquote', HTMLQuoteElement);\nregisterSubclass('q', HTMLQuoteElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\nreflectProperties([{ cite: [''] }], HTMLQuoteElement);\n//# sourceMappingURL=HTMLQuoteElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLScriptElement extends HTMLElement {\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('script', HTMLScriptElement);\n// Reflected Properties\n// HTMLScriptElement.type => string, reflected attribute\n// HTMLScriptElement.src => string, reflected attribute\n// HTMLScriptElement.charset => string, reflected attribute\n// HTMLScriptElement.async => boolean, reflected attribute\n// HTMLScriptElement.defer => boolean, reflected attribute\n// HTMLScriptElement.crossOrigin => string, reflected attribute\n// HTMLScriptElement.noModule => boolean, reflected attribute\nreflectProperties([{ type: [''] }, { src: [''] }, { charset: [''] }, { async: [false] }, { defer: [false] }, { crossOrigin: [''] }, { noModule: [false] }], HTMLScriptElement);\n//# sourceMappingURL=HTMLScriptElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { matchChildrenElements, matchChildElement, tagNameConditionPredicate } from './matchElements';\nconst isOptionPredicate = tagNameConditionPredicate(['OPTION']);\nconst isSelectedOptionPredicate = (element) => isOptionPredicate(element) && element.selected === true;\nexport class HTMLSelectElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = -1 /* UNMODIFIED */;\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [(_a = 49 /* size */, 56 /* insertedNode */)](child) {\n        super[56 /* insertedNode */](child);\n        // When this singular value select is appending a child, set the value property for two cases.\n        // 1. The inserted child is already selected.\n        // 2. The current value of the select is the default ('').\n        if ((!this.multiple && (isOptionPredicate(child) && child.selected)) || this.value === '') {\n            this.value = child.value;\n        }\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        super[57 /* removedNode */](child);\n        // When this singular value select is removing a selected child\n        // ... set the value property to the first valid option.\n        if (!this.multiple && child.selected) {\n            const options = this.options;\n            if (options.length > 0) {\n                this.value = options[0].value;\n            }\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.options.length;\n    }\n    /**\n     * Getter returning option elements that are direct children of a HTMLSelectElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.children.filter(isOptionPredicate);\n    }\n    /**\n     * Getter returning the index of the first selected <option> element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @return the index of the first selected option element, or -1 if no element is selected.\n     */\n    get selectedIndex() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? this.children.indexOf(firstSelectedChild) : -1;\n    }\n    /**\n     * Setter making the <option> element at the passed index selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @param selectedIndex index number to make selected.\n     */\n    set selectedIndex(selectedIndex) {\n        this.children.forEach((element, index) => (element.selected = index === selectedIndex));\n    }\n    /**\n     * Getter returning the <option> elements selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedOptions\n     * @return array of Elements currently selected.\n     */\n    get selectedOptions() {\n        return matchChildrenElements(this, isSelectedOptionPredicate);\n    }\n    /**\n     * Getter returning the size of the select element (by default 1 for single and 4 for multiple)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return size of the select element.\n     */\n    get size() {\n        return this[49 /* size */] === -1 /* UNMODIFIED */\n            ? this.multiple\n                ? 4 /* MULTIPLE */\n                : 1 /* SINGLE */\n            : this[49 /* size */];\n    }\n    /**\n     * Override the size of this element (each positive unit is the height of a single option)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @param size number to set the size to.\n     */\n    set size(size) {\n        this[49 /* size */] = size > 0 ? size : this.multiple ? 4 /* MULTIPLE */ : 1 /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return string representing the select element type.\n     */\n    get type() {\n        return this.multiple ? \"select-one\" /* MULTIPLE */ : \"select-multiple\" /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return the value of the first selected option\n     */\n    get value() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? firstSelectedChild.value : '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @set value\n     */\n    set value(value) {\n        const stringValue = String(value);\n        this.children.forEach((element) => isOptionPredicate(element) && (element.selected = element.value === stringValue));\n    }\n}\nregisterSubclass('select', HTMLSelectElement);\nHTMLInputLabelsMixin(HTMLSelectElement);\n// Reflected Properties\n// HTMLSelectElement.multiple => boolean, reflected attribute\n// HTMLSelectElement.name => string, reflected attribute\n// HTMLSelectElement.required => boolean, reflected attribute\nreflectProperties([{ multiple: [false] }, { name: [''] }, { required: [false] }], HTMLSelectElement);\n// Implemented on HTMLElement\n// HTMLSelectElement.form => HTMLFormElement, readonly\n// Unimplemented Properties\n// HTMLSelectElement.validation => string\n// HTMLSelectElement.validity => ValidityState\n// HTMLSelectElement.willValidate => boolean\n//# sourceMappingURL=HTMLSelectElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLSourceElement extends HTMLElement {\n}\nregisterSubclass('source', HTMLSourceElement);\n// Reflected Properties\n// HTMLSourceElement.media => string, reflected attribute\n// HTMLSourceElement.sizes => string, reflected attribute\n// HTMLSourceElement.src => string, reflected attribute\n// HTMLSourceElement.srcset => string, reflected attribute\n// HTMLSourceElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { sizes: [''] }, { src: [''] }, { srcset: [''] }, { type: [''] }], HTMLSourceElement);\n// Unimplemented Properties\n// HTMLSourceElement.keySystem => string\n//# sourceMappingURL=HTMLSourceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLStyleElement extends HTMLElement {\n}\nregisterSubclass('style', HTMLStyleElement);\n// Reflected Properties\n// HTMLStyleElement.media => string, reflected attribute\n// HTMLStyleElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { type: [''] }], HTMLStyleElement);\n// Unimplemented Properties\n// HTMLStyleElement.disabled => boolean\n// HTMLStyleElement.scoped => boolean, reflected attribute\n// HTMLStyleElement.sheet => StyleSheet, read only\n//# sourceMappingURL=HTMLStyleElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableCellElement extends HTMLElement {\n    get headers() {\n        return this._headers || (this._headers = new DOMTokenList(this, 'headers'));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableCellElement\n     * @return position of the cell within the parent tr, if not nested in a tr the value is -1.\n     */\n    get cellIndex() {\n        const parent = matchNearestParent(this, tagNameConditionPredicate(['TR']));\n        return parent !== null ? matchChildrenElements(parent, tagNameConditionPredicate(['TH', 'TD'])).indexOf(this) : -1;\n    }\n}\nregisterSubclass('th', HTMLTableCellElement);\nregisterSubclass('td', HTMLTableCellElement);\ndefinePropertyBackedAttributes(HTMLTableCellElement, {\n    headers: [(el) => el.headers.value, (el, value) => (el.headers.value = value)],\n});\n// Reflected Properties\n// HTMLTableCellElement.abbr => string, reflected attribute\n// HTMLTableCellElement.colSpan => number, reflected attribute\n// HTMLTableCellElement.rowSpan => number, reflected attribute\n// HTMLTableCellElement.scope => string, reflected attribute\nreflectProperties([{ abbr: [''] }, { colSpan: [1] }, { rowSpan: [1] }, { scope: [''] }], HTMLTableCellElement);\n//# sourceMappingURL=HTMLTableCellElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTableColElement extends HTMLElement {\n}\nregisterSubclass('col', HTMLTableColElement);\n// Reflected Properties\n// HTMLTableColElement.span => number, reflected attribute\nreflectProperties([{ span: [1] }], HTMLTableColElement);\n//# sourceMappingURL=HTMLTableColElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchChildElement, matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nimport { toUpper } from '../../utils';\nconst removeElement = (element) => element && element.remove();\nconst insertBeforeElementsWithTagName = (parent, element, tagNames) => {\n    console.assert(tagNames.every(t => t === toUpper(t)), 'tagNames must be all uppercase.');\n    const insertBeforeElement = matchChildElement(parent, (element) => !tagNames.includes(element.tagName));\n    if (insertBeforeElement) {\n        parent.insertBefore(element, insertBeforeElement);\n    }\n    else {\n        parent.appendChild(element);\n    }\n};\nexport class HTMLTableElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @return first matching caption Element or null if none exists.\n     */\n    get caption() {\n        return matchChildElement(this, tagNameConditionPredicate(['CAPTION']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @param element new caption element to replace the existing, or become the first element child.\n     */\n    set caption(newElement) {\n        if (newElement && newElement.tagName === 'CAPTION') {\n            // If a correct object is given,\n            // it is inserted in the tree as the first child of this element and the first <caption>\n            // that is a child of this element is removed from the tree, if any.\n            removeElement(this.caption);\n            this.insertBefore(newElement, this.firstElementChild);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tHead() {\n        return matchChildElement(this, tagNameConditionPredicate(['THEAD']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new thead element to insert in this table.\n     */\n    set tHead(newElement) {\n        if (newElement && newElement.tagName === 'THEAD') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is\n            // neither a <caption>, nor a <colgroup>, or as the last child if there is no such element.\n            // Additionally, the first <thead> that is a child of this element is removed from the tree, if any.\n            removeElement(this.tHead);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tFoot() {\n        return matchChildElement(this, tagNameConditionPredicate(['TFOOT']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new tfoot element to insert in this table.\n     */\n    set tFoot(newElement) {\n        if (newElement && newElement.tagName === 'TFOOT') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is neither a <caption>,\n            // a <colgroup>, nor a <thead>, or as the last child if there is no such element, and the first <tfoot> that is a child of\n            // this element is removed from the tree, if any.\n            removeElement(this.tFoot);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP', 'THEAD']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tr' tagname elements\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tbody' tagname elements\n     */\n    get tBodies() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TBODY']));\n    }\n}\nregisterSubclass('table', HTMLTableElement);\n// Unimplemented Properties\n// HTMLTableElement.sortable => boolean\n// Unimplemented Methods\n// HTMLTableElement.createTHead()\n// HTMLTableElement.deleteTHead()\n// HTMLTableElement.createTFoot()\n// HTMLTableElement.deleteTFoot()\n// HTMLTableElement.createCaption()\n// HTMLTableElement.deleteCaption()\n// HTMLTableElement.insertRow()\n// HTMLTableElement.deleteRow()\n//# sourceMappingURL=HTMLTableElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nconst TABLE_SECTION_TAGNAMES = 'TABLE TBODY THEAD TFOOT'.split(' ');\nconst indexInAncestor = (element, isValidAncestor) => {\n    const parent = matchNearestParent(element, isValidAncestor);\n    // TODO(KB): This is either a HTMLTableElement or HTMLTableSectionElement.\n    return parent === null ? -1 : parent.rows.indexOf(element);\n};\nexport class HTMLTableRowElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return td and th elements that are children of this row.\n     */\n    get cells() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TD', 'TH']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a table, if not nested within in a table the value is -1.\n     */\n    get rowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(['TABLE']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a parent section, if not nested directly in a section the value is -1.\n     */\n    get sectionRowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(TABLE_SECTION_TAGNAMES));\n    }\n    /**\n     * Removes the cell in provided position of this row.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @param index position of the cell in the row to remove.\n     */\n    deleteCell(index) {\n        const cell = this.cells[index];\n        cell && cell.remove();\n    }\n    /**\n     * Insert a new cell ('td') in the row at a specified position.\n     * @param index position in the children to insert before.\n     * @return newly inserted td element.\n     */\n    insertCell(index) {\n        const cells = this.cells;\n        const td = this.ownerDocument.createElement('td');\n        if (index < 0 || index >= cells.length) {\n            this.appendChild(td);\n        }\n        else {\n            this.insertBefore(td, this.children[index]);\n        }\n        return td;\n    }\n}\nregisterSubclass('tr', HTMLTableRowElement);\n//# sourceMappingURL=HTMLTableRowElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableSectionElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @return All rows (tr elements) within the table section.\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * Remove a node in a specified position from the section.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the section to remove the node of.\n     */\n    deleteRow(index) {\n        const rows = this.rows;\n        if (index >= 0 || index <= rows.length) {\n            rows[index].remove();\n        }\n    }\n    /**\n     * Insert a new row ('tr') in the row at a specified position.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the children to insert before.\n     * @return newly inserted tr element.\n     */\n    insertRow(index) {\n        const rows = this.rows;\n        const tr = this.ownerDocument.createElement('tr');\n        if (index < 0 || index >= rows.length) {\n            this.appendChild(tr);\n        }\n        else {\n            this.insertBefore(tr, this.children[index]);\n        }\n        return tr;\n    }\n}\nregisterSubclass('thead', HTMLTableSectionElement);\nregisterSubclass('tfoot', HTMLTableSectionElement);\nregisterSubclass('tbody', HTMLTableSectionElement);\n//# sourceMappingURL=HTMLTableSectionElement.js.map","// <blockquote> and <q>\n/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTimeElement extends HTMLElement {\n}\nregisterSubclass('time', HTMLTimeElement);\n// Reflected Properties\n// HTMLTimeElement.dateTime => string, reflected attribute\nreflectProperties([{ dateTime: [''] }], HTMLTimeElement);\n//# sourceMappingURL=HTMLTimeElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Text\nexport class Text extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 3 /* TEXT_NODE */, '#text', ownerDocument, overrideIndex);\n    }\n    // Unimplemented Properties\n    // Text.isElementContentWhitespace – https://developer.mozilla.org/en-US/docs/Web/API/Text/isElementContentWhitespace\n    // Text.wholeText – https://developer.mozilla.org/en-US/docs/Web/API/Text/wholeText\n    // Text.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Text/assignedSlot\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Text Node with the same data as the Text to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createTextNode(this.data);\n    }\n    /**\n     * Breaks Text node into two nodes at the specified offset, keeping both nodes in the tree as siblings.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Text/splitText\n     * @param offset number position to split text at.\n     * @return Text Node after the offset.\n     */\n    splitText(offset) {\n        const remainderTextNode = new Text(this.data.slice(offset, this.data.length), this.ownerDocument);\n        const parentNode = this.parentNode;\n        this.nodeValue = this.data.slice(0, offset);\n        if (parentNode !== null) {\n            // When this node is attached to the DOM, the remainder text needs to be inserted directly after.\n            const parentChildNodes = parentNode.childNodes;\n            const insertBeforePosition = parentChildNodes.indexOf(this) + 1;\n            const insertBeforeNode = parentChildNodes.length >= insertBeforePosition ? parentChildNodes[insertBeforePosition] : null;\n            return parentNode.insertBefore(remainderTextNode, insertBeforeNode);\n        }\n        return remainderTextNode;\n    }\n}\n//# sourceMappingURL=Text.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ParentNode } from './ParentNode';\nimport { store as storeString } from '../strings';\nexport class DocumentFragment extends ParentNode {\n    constructor(ownerDocument, overrideIndex) {\n        super(11 /* DOCUMENT_FRAGMENT_NODE */, '#document-fragment', ownerDocument, overrideIndex);\n        this[8 /* creationFormat */] = [this[7 /* index */], 11 /* DOCUMENT_FRAGMENT_NODE */, storeString(this.nodeName), 0, 0];\n    }\n    /**\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return DocumentFragment containing childNode clones of the DocumentFragment requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createDocumentFragment();\n        if (deep) {\n            this.childNodes.forEach(child => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n}\n//# sourceMappingURL=DocumentFragment.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { get } from './nodes';\nexport class Event {\n    constructor(type, opts) {\n        this[_a] = false;\n        this[_b] = false;\n        this.type = type;\n        this.bubbles = !!opts.bubbles;\n        this.cancelable = !!opts.cancelable;\n    }\n    stopPropagation() {\n        this[50 /* stop */] = true;\n    }\n    stopImmediatePropagation() {\n        this[51 /* end */] = this[50 /* stop */] = true;\n    }\n    preventDefault() {\n        this.defaultPrevented = true;\n    }\n    /** Event.initEvent() is deprecated but supported here for legacy usage.  */\n    initEvent(type, bubbles, cancelable) {\n        this.type = type;\n        this.bubbles = bubbles;\n        this.cancelable = cancelable;\n    }\n}\n_a = 50 /* stop */, _b = 51 /* end */;\n/**\n * Determine the target for a TransferrableEvent.\n * @param document Event intended within the scope of this document.\n * @param event\n */\nconst targetFromTransfer = (document, event) => {\n    if (event[13 /* target */] !== null) {\n        const index = event[13 /* target */][0];\n        // If the target was sent as index 0, use the current document.\n        return get(index !== 0 ? index : document[7 /* index */]);\n    }\n    return null;\n};\n/**\n *\n * @param document\n * @param event\n */\nconst touchListFromTransfer = (document, event, key) => {\n    if (event[key] !== undefined) {\n        const touchListKeys = Object.keys(event[key]);\n        const list = {\n            length: touchListKeys.length,\n            item(index) {\n                return this[index] || null;\n            },\n        };\n        touchListKeys.forEach(touchListKey => {\n            const numericKey = Number(touchListKey);\n            const transferredTouch = event[key][numericKey];\n            list[numericKey] = {\n                identifier: transferredTouch[0],\n                screenX: transferredTouch[1],\n                screenY: transferredTouch[2],\n                clientX: transferredTouch[3],\n                clientY: transferredTouch[4],\n                pageX: transferredTouch[5],\n                pageY: transferredTouch[6],\n                target: get(transferredTouch[7] !== 0 ? transferredTouch[7] : document[7 /* index */]),\n            };\n        });\n        return list;\n    }\n    return undefined;\n};\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 1 /* EVENT */) {\n            return;\n        }\n        const event = data[39 /* event */];\n        const node = get(event[7 /* index */]);\n        if (node !== null) {\n            node.dispatchEvent(Object.assign(new Event(event[12 /* type */], { bubbles: event[25 /* bubbles */], cancelable: event[26 /* cancelable */] }), {\n                cancelBubble: event[27 /* cancelBubble */],\n                defaultPrevented: event[29 /* defaultPrevented */],\n                eventPhase: event[30 /* eventPhase */],\n                isTrusted: event[31 /* isTrusted */],\n                returnValue: event[32 /* returnValue */],\n                target: targetFromTransfer(global.document, event),\n                timeStamp: event[33 /* timeStamp */],\n                scoped: event[34 /* scoped */],\n                keyCode: event[35 /* keyCode */],\n                pageX: event[60 /* pageX */],\n                pageY: event[61 /* pageY */],\n                offsetX: event[65 /* offsetX */],\n                offsetY: event[66 /* offsetY */],\n                touches: touchListFromTransfer(global.document, event, 62 /* touches */),\n                changedTouches: touchListFromTransfer(global.document, event, 63 /* changedTouches */),\n            }));\n        }\n    });\n}\n//# sourceMappingURL=Event.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { get } from './nodes';\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 4 /* SYNC */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        const node = get(sync[7 /* index */]);\n        if (node) {\n            node.ownerDocument[58 /* allowTransfer */] = false;\n            // Modify the private backing ivar of `value` property to avoid mutation/sync cycle.\n            node.value = sync[21 /* value */];\n            node.ownerDocument[58 /* allowTransfer */] = true;\n        }\n    });\n}\n//# sourceMappingURL=SyncValuePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 5 /* RESIZE */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        if (sync) {\n            global.innerWidth = sync[0];\n            global.innerHeight = sync[1];\n        }\n    });\n}\n//# sourceMappingURL=ResizePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element, NS_NAME_TO_CLASS } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport './HTMLAnchorElement';\nimport './HTMLButtonElement';\nimport './HTMLCanvasElement';\nimport './HTMLDataElement';\nimport './HTMLDataListElement';\nimport './HTMLEmbedElement';\nimport './HTMLFieldSetElement';\nimport './HTMLFormElement';\nimport './HTMLIFrameElement';\nimport './HTMLImageElement';\nimport './HTMLInputElement';\nimport './HTMLLabelElement';\nimport './HTMLLinkElement';\nimport './HTMLMapElement';\nimport './HTMLMeterElement';\nimport './HTMLModElement';\nimport './HTMLOListElement';\nimport './HTMLOptionElement';\nimport './HTMLProgressElement';\nimport './HTMLQuoteElement';\nimport './HTMLScriptElement';\nimport './HTMLSelectElement';\nimport './HTMLSourceElement';\nimport './HTMLStyleElement';\nimport './HTMLTableCellElement';\nimport './HTMLTableColElement';\nimport './HTMLTableElement';\nimport './HTMLTableRowElement';\nimport './HTMLTableSectionElement';\nimport './HTMLTimeElement';\nimport { matchChildElement } from './matchElements';\nimport { Text } from './Text';\nimport { Comment } from './Comment';\nimport { toLower } from '../../utils';\nimport { DocumentFragment } from './DocumentFragment';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { propagate as propagateEvents } from '../Event';\nimport { propagate as propagateSyncValues } from '../SyncValuePropagation';\nimport { propagate as propagateResize } from '../ResizePropagation';\nimport { set as setPhase } from '../phase';\nconst DOCUMENT_NAME = '#document';\nexport class Document extends Element {\n    constructor(global) {\n        super(9 /* DOCUMENT_NODE */, DOCUMENT_NAME, HTML_NAMESPACE, null);\n        this[_a] = true;\n        // Element uppercases its nodeName, but Document doesn't.\n        this.nodeName = DOCUMENT_NAME;\n        this.documentElement = this; // TODO(choumx): Should be the <html> element.\n        this.defaultView = Object.assign(global, {\n            document: this,\n            addEventListener: this.addEventListener.bind(this),\n            removeEventListener: this.removeEventListener.bind(this),\n        });\n    }\n    /**\n     * Observing the Document indicates it's attached to a main thread\n     * version of the document.\n     *\n     * Each mutation needs to be transferred, synced values need to propagate.\n     */\n    [(_a = 58 /* allowTransfer */, 59 /* observe */)]() {\n        setPhase(1 /* Hydrating */);\n        propagateEvents(this.defaultView);\n        propagateSyncValues(this.defaultView);\n        propagateResize(this.defaultView);\n    }\n    /**\n     * Hydrate\n     * @param strings\n     * @param skeleton\n     */\n    [64 /* hydrateNode */](strings, skeleton) {\n        switch (skeleton[0 /* nodeType */]) {\n            case 3 /* TEXT_NODE */:\n                return new Text(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            case 8 /* COMMENT_NODE */:\n                return new Comment(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            default:\n                const namespaceURI = strings[skeleton[6 /* namespaceURI */]] || HTML_NAMESPACE;\n                const localName = strings[skeleton[1 /* localOrNodeName */]];\n                const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n                const node = new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this, skeleton[7 /* index */]);\n                (skeleton[2 /* attributes */] || []).forEach(attribute => \n                // AttributeNamespaceURI = strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE\n                node.setAttributeNS(strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE, strings[attribute[1]], strings[attribute[2]]));\n                (skeleton[4 /* childNodes */] || []).forEach(child => node.appendChild(this[64 /* hydrateNode */](strings, child)));\n                return node;\n        }\n    }\n    createElement(name) {\n        return this.createElementNS(HTML_NAMESPACE, toLower(name));\n    }\n    createElementNS(namespaceURI, localName) {\n        const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n        return new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this);\n    }\n    /**\n     * Note: Unlike DOM, Event subclasses (e.g. MouseEvent) are not instantiated based on `type`.\n     * @param type\n     */\n    createEvent(type) {\n        return new Event(type, { bubbles: false, cancelable: false });\n    }\n    createTextNode(text) {\n        return new Text(text, this);\n    }\n    createComment(text) {\n        return new Comment(text, this);\n    }\n    createDocumentFragment() {\n        return new DocumentFragment(this);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\n     * @return Element with matching id attribute.\n     */\n    getElementById(id) {\n        return matchChildElement(this.body, element => element.id === id);\n    }\n}\n//# sourceMappingURL=Document.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Element, registerSubclass } from './Element';\nimport { SVG_NAMESPACE } from '../../transfer/TransferrableNodes';\nexport class SVGElement extends Element {\n    constructor(nodeType, localName, namespaceURI, ownerDocument) {\n        super(nodeType, localName, SVG_NAMESPACE, ownerDocument);\n        // Element uppercases its nodeName, but SVG elements don't.\n        this.nodeName = localName;\n    }\n}\nregisterSubclass('svg', SVGElement, SVG_NAMESPACE);\n//# sourceMappingURL=SVGElement.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nimport { transfer } from './MutationTransfer';\n/**\n * @param document\n * @param location\n * @param data\n */\nexport function createStorage(document, location, data) {\n    const storage = Object.assign(Object.create(null), data);\n    // Define properties on a prototype-less object instead of a class so that\n    // it behaves more like normal objects, e.g. bracket notation and JSON.stringify.\n    const define = Object.defineProperty;\n    define(storage, 'length', {\n        get: function () {\n            return Object.keys(this).length;\n        },\n    });\n    define(storage, 'key', {\n        value: function (n) {\n            const keys = Object.keys(this);\n            return n >= 0 && n < keys.length ? keys[n] : null;\n        },\n    });\n    define(storage, 'getItem', {\n        value: function (key) {\n            const value = this[key];\n            return value ? value : null;\n        },\n    });\n    define(storage, 'setItem', {\n        value: function (key, value) {\n            const stringValue = String(value);\n            this[key] = stringValue;\n            transfer(document, [12 /* STORAGE */, 2 /* SET */, location, store(key), store(stringValue)]);\n        },\n    });\n    define(storage, 'removeItem', {\n        value: function (key) {\n            delete this[key];\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                store(key),\n                0,\n            ]);\n        },\n    });\n    define(storage, 'clear', {\n        value: function () {\n            Object.keys(this).forEach(key => {\n                delete this[key];\n            });\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                0,\n                0,\n            ]);\n        },\n    });\n    return storage;\n}\n//# sourceMappingURL=Storage.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store as storeString } from './strings';\nimport { appendKeys as addCssKeys } from './css/CSSStyleDeclaration';\nimport { createStorage } from './Storage';\nimport { appendGlobalEventProperties } from './dom/HTMLElement';\nexport function initialize(document, strings, hydrateableNode, cssKeys, globalEventHandlerKeys, [innerWidth, innerHeight], localStorageData, sessionStorageData) {\n    addCssKeys(cssKeys);\n    appendGlobalEventProperties(globalEventHandlerKeys);\n    strings.forEach(storeString);\n    (hydrateableNode[4 /* childNodes */] || []).forEach(child => document.body.appendChild(document[64 /* hydrateNode */](strings, child)));\n    const window = document.defaultView;\n    window.innerWidth = innerWidth;\n    window.innerHeight = innerHeight;\n    window.localStorage = createStorage(document, 0 /* Local */, localStorageData);\n    window.sessionStorage = createStorage(document, 1 /* Session */, sessionStorageData);\n}\n//# sourceMappingURL=initialize.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from './MutationTransfer';\nexport function wrap(target, func) {\n    return function () {\n        return execute(target, Promise.resolve(func.apply(null, arguments)));\n    };\n}\nfunction execute(target, promise) {\n    // Start the task.\n    transfer(target.ownerDocument, [6 /* LONG_TASK_START */, target[7 /* index */]]);\n    return promise.then(result => {\n        // Complete the task.\n        transfer(target.ownerDocument, [7 /* LONG_TASK_END */, target[7 /* index */]]);\n        return result;\n    }, reason => {\n        // Complete the task.\n        transfer(target.ownerDocument, [7 /* LONG_TASK_END */, target[7 /* index */]]);\n        throw reason;\n    });\n}\n//# sourceMappingURL=long-task.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { AMP } from './amp/amp';\nimport { CharacterData } from './dom/CharacterData';\nimport { Comment } from './dom/Comment';\nimport { DOMTokenList } from './dom/DOMTokenList';\nimport { Document } from './dom/Document';\nimport { DocumentFragment } from './dom/DocumentFragment';\nimport { Element } from './dom/Element';\nimport { Event as WorkerDOMEvent } from './Event';\nimport { HTMLAnchorElement } from './dom/HTMLAnchorElement';\nimport { HTMLButtonElement } from './dom/HTMLButtonElement';\nimport { HTMLCanvasElement } from './dom/HTMLCanvasElement';\nimport { HTMLDataElement } from './dom/HTMLDataElement';\nimport { HTMLDataListElement } from './dom/HTMLDataListElement';\nimport { HTMLElement } from './dom/HTMLElement';\nimport { HTMLEmbedElement } from './dom/HTMLEmbedElement';\nimport { HTMLFieldSetElement } from './dom/HTMLFieldSetElement';\nimport { HTMLFormElement } from './dom/HTMLFormElement';\nimport { HTMLIFrameElement } from './dom/HTMLIFrameElement';\nimport { HTMLImageElement } from './dom/HTMLImageElement';\nimport { HTMLInputElement } from './dom/HTMLInputElement';\nimport { HTMLLabelElement } from './dom/HTMLLabelElement';\nimport { HTMLLinkElement } from './dom/HTMLLinkElement';\nimport { HTMLMapElement } from './dom/HTMLMapElement';\nimport { HTMLMeterElement } from './dom/HTMLMeterElement';\nimport { HTMLModElement } from './dom/HTMLModElement';\nimport { HTMLOListElement } from './dom/HTMLOListElement';\nimport { HTMLOptionElement } from './dom/HTMLOptionElement';\nimport { HTMLProgressElement } from './dom/HTMLProgressElement';\nimport { HTMLQuoteElement } from './dom/HTMLQuoteElement';\nimport { HTMLScriptElement } from './dom/HTMLScriptElement';\nimport { HTMLSelectElement } from './dom/HTMLSelectElement';\nimport { HTMLSourceElement } from './dom/HTMLSourceElement';\nimport { HTMLStyleElement } from './dom/HTMLStyleElement';\nimport { HTMLTableCellElement } from './dom/HTMLTableCellElement';\nimport { HTMLTableColElement } from './dom/HTMLTableColElement';\nimport { HTMLTableElement } from './dom/HTMLTableElement';\nimport { HTMLTableRowElement } from './dom/HTMLTableRowElement';\nimport { HTMLTableSectionElement } from './dom/HTMLTableSectionElement';\nimport { HTMLTimeElement } from './dom/HTMLTimeElement';\nimport { MutationObserver } from './MutationObserver';\nimport { SVGElement } from './dom/SVGElement';\nimport { Text } from './dom/Text';\nimport { initialize } from './initialize';\nimport { wrap as longTaskWrap } from './long-task';\nconst ALLOWLISTED_GLOBALS = {\n    Array: true,\n    ArrayBuffer: true,\n    Blob: true,\n    BigInt: true,\n    BigInt64Array: true,\n    BigUint64Array: true,\n    Boolean: true,\n    Cache: true,\n    CustomEvent: true,\n    DataView: true,\n    Date: true,\n    Error: true,\n    EvalError: true,\n    Event: true,\n    EventTarget: true,\n    Float32Array: true,\n    Float64Array: true,\n    Function: true,\n    Infinity: true,\n    Int16Array: true,\n    Int32Array: true,\n    Int8Array: true,\n    Intl: true,\n    JSON: true,\n    Map: true,\n    Math: true,\n    NaN: true,\n    Number: true,\n    Object: true,\n    Promise: true,\n    Proxy: true,\n    RangeError: true,\n    ReferenceError: true,\n    Reflect: true,\n    RegExp: true,\n    Set: true,\n    String: true,\n    Symbol: true,\n    SyntaxError: true,\n    TextDecoder: true,\n    TextEncoder: true,\n    TypeError: true,\n    URIError: true,\n    URL: true,\n    Uint16Array: true,\n    Uint32Array: true,\n    Uint8Array: true,\n    Uint8ClampedArray: true,\n    WeakMap: true,\n    WeakSet: true,\n    WebAssembly: true,\n    WebSocket: true,\n    XMLHttpRequest: true,\n    atob: true,\n    addEventListener: true,\n    removeEventListener: true,\n    btoa: true,\n    caches: true,\n    clearInterval: true,\n    clearTimeout: true,\n    console: true,\n    decodeURI: true,\n    decodeURIComponent: true,\n    document: true,\n    encodeURI: true,\n    encodeURIComponent: true,\n    escape: true,\n    fetch: true,\n    indexedDB: true,\n    isFinite: true,\n    isNaN: true,\n    location: true,\n    navigator: true,\n    onerror: true,\n    onrejectionhandled: true,\n    onunhandledrejection: true,\n    parseFloat: true,\n    parseInt: true,\n    performance: true,\n    requestAnimationFrame: true,\n    cancelAnimationFrame: true,\n    self: true,\n    setTimeout: true,\n    setInterval: true,\n    unescape: true,\n};\nconst globalScope = {\n    innerWidth: 0,\n    innerHeight: 0,\n    CharacterData,\n    Comment,\n    Document,\n    DocumentFragment,\n    DOMTokenList,\n    Element,\n    HTMLAnchorElement,\n    HTMLButtonElement,\n    HTMLCanvasElement,\n    HTMLDataElement,\n    HTMLDataListElement,\n    HTMLElement,\n    HTMLEmbedElement,\n    HTMLFieldSetElement,\n    HTMLFormElement,\n    HTMLIFrameElement,\n    HTMLImageElement,\n    HTMLInputElement,\n    HTMLLabelElement,\n    HTMLLinkElement,\n    HTMLMapElement,\n    HTMLMeterElement,\n    HTMLModElement,\n    HTMLOListElement,\n    HTMLOptionElement,\n    HTMLProgressElement,\n    HTMLQuoteElement,\n    HTMLScriptElement,\n    HTMLSelectElement,\n    HTMLSourceElement,\n    HTMLStyleElement,\n    HTMLTableCellElement,\n    HTMLTableColElement,\n    HTMLTableElement,\n    HTMLTableRowElement,\n    HTMLTableSectionElement,\n    HTMLTimeElement,\n    SVGElement,\n    Text,\n    Event: WorkerDOMEvent,\n    MutationObserver,\n};\nconst noop = () => void 0;\n// WorkerDOM.Document.defaultView ends up being the window object.\n// React requires the classes to exist off the window object for instanceof checks.\nexport const workerDOM = (function (postMessage, addEventListener, removeEventListener) {\n    const document = new Document(globalScope);\n    // TODO(choumx): Avoid polluting Document's public API.\n    document.postMessage = postMessage;\n    document.addGlobalEventListener = addEventListener;\n    document.removeGlobalEventListener = removeEventListener;\n    document.isConnected = true;\n    document.appendChild((document.body = document.createElement('body')));\n    // TODO(choumx): Remove once defaultView contains all native worker globals.\n    // Canvas's use of native OffscreenCanvas checks the existence of the property\n    // on the WorkerDOMGlobalScope.\n    globalScope.OffscreenCanvas = self['OffscreenCanvas'];\n    globalScope.ImageBitmap = self['ImageBitmap'];\n    return document.defaultView;\n})(postMessage.bind(self) || noop, addEventListener.bind(self) || noop, removeEventListener.bind(self) || noop);\n// Modify global scope by removing disallowed properties and wrapping `fetch()`.\n(function (global) {\n    /**\n     * @param object\n     * @param property\n     * @return True if property was deleted from object. Otherwise, false.\n     */\n    const deleteUnsafe = (object, property) => {\n        if (!ALLOWLISTED_GLOBALS.hasOwnProperty(property)) {\n            try {\n                delete object[property];\n                return true;\n            }\n            catch (e) {\n                console.warn(e);\n            }\n        }\n        return false;\n    };\n    // Walk up global's prototype chain and dereference non-allowlisted properties\n    // until EventTarget is reached.\n    let current = global;\n    while (current && current.constructor !== EventTarget) {\n        const deleted = [];\n        Object.getOwnPropertyNames(current).forEach(prop => {\n            if (deleteUnsafe(current, prop)) {\n                deleted.push(prop);\n            }\n        });\n        console.info(`Removed ${deleted.length} references from`, current, ':', deleted);\n        current = Object.getPrototypeOf(current);\n    }\n    // Wrap global.fetch() with our longTask API.\n    const originalFetch = global['fetch'];\n    if (originalFetch) {\n        try {\n            Object.defineProperty(global, 'fetch', {\n                enumerable: true,\n                writable: true,\n                configurable: true,\n                value: longTaskWrap(workerDOM.document, originalFetch.bind(global)),\n            });\n        }\n        catch (e) {\n            console.warn(e);\n        }\n    }\n})(self);\n// Offer APIs like AMP.setState() on the global scope.\nself.AMP = new AMP(workerDOM.document);\nexport const hydrate = initialize;\n//# sourceMappingURL=index.amp.js.map"],"names":["count","transfer","mapping","Map","store","value","has","get","set","push","consume","strings","phase","newPhase","storeOverride","node","override","Math","max","undefined","index","copy","pending","pendingMutations","document","mutation","concat","Promise","resolve","then","_","nodes","Uint16Array","consumeNodes","reduce","acc","buffer","mutations","postMessage","consumeStrings","setPhase","AMP","constructor","getState","key","messageHandler","event","message","data","storageMessage","removeGlobalEventListener","addGlobalEventListener","setTimeout","setState","state","stringified","JSON","stringify","e","Error","toLower","toLowerCase","toUpper","toUpperCase","containsIndexOf","pos","keyValueString","_a","observers","matchesIndex","observerTarget","target","pushMutation","observer","record","pushRecord","forEach","callback","takeRecords","mutate","transferable","t","parentNode","MutationObserver","observe","options","disconnect","indexOf","splice","records","length","propagate","property","childNodes","child","Node","nodeType","nodeName","ownerDocument","overrideIndex","isConnected","storeOverrideNodeMapping","storeNodeMapping","textContent","getTextContent","childNode","firstChild","lastChild","nextSibling","parentChildNodes","previousSibling","hasChildNodes","contains","otherNode","includes","some","insertBefore","referenceNode","slice","appendChild","remove","addedNodes","type","removeChild","exists","removedNodes","replaceChild","newChild","oldChild","addEventListener","handler","lowerType","storedType","storeString","handlers","removeEventListener","dispatchEvent","currentTarget","iterator","call","cancelable","bubbles","defaultPrevented","CharacterData","oldValue","nodeValue","Comment","cloneNode","createComment","synchronizedAccessor","defineOn","accessorKey","propertyName","Object","defineProperty","prototype","enumerable","configurable","DOMTokenList","attributeName","bind","join","collection","newValue","trim","split","item","token","add","tokens","Set","filter","replace","newToken","delete","toggle","force","namespaceURI","tagNameConditionPredicate","tagNames","element","tagName","elementPredicate","matchChildrenElements","conditionPredicate","matchingElements","matchChildElement","returnValue","children","grandChildMatch","matchNearestParent","matchAttrReference","attrSelector","equalPos","selectorLength","caseInsensitive","charAt","endPos","equalSuffix","possibleSuffixes","attrString","substring","rawValue","rawAttrValue","getAttribute","casedValue","casedAttrValue","startsWith","endsWith","hasAttribute","ParentNode","childElementCount","firstElementChild","find","lastElementChild","querySelector","selector","matches","querySelectorAll","selectorBracketIndexes","selectorHasAttr","elementSelector","matcher","id","substr","classList","localName","toString","attributes","map","attr","name","matchPredicate","hyphenateKey","appendKeys","keys","keysToAppend","isNaN","CSSStyleDeclaration","hasOwnProperty","previousPrototypeLength","writable","hyphenatedKey","defineProperties","getPropertyValue","setProperty","removeProperty","mutated","cssText","stringValue","values","reflectProperties","properties","pair","defaultValue","keywords","isBooleanAttribute","attributeValue","castableValue","Number","String","setAttribute","removeAttribute","HTML_NAMESPACE","SVG_NAMESPACE","arr_back","arr","kMarkupPattern","kAttributePattern","kSelfClosingElements","AREA","BASE","BR","COL","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR","kElementsClosedByOpening","LI","DT","DD","P","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIV","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","MAIN","NAV","OL","PRE","SECTION","TABLE","UL","RT","RP","OPTGROUP","OPTION","THEAD","TBODY","TFOOT","TR","TD","TH","kElementsClosedByClosing","A","B","I","kBlockTextElements","SCRIPT","NOSCRIPT","STYLE","parse","rootElement","root","createElementNS","currentParent","currentNamespace","stack","lastTextPos","match","tagsClosed","exec","commentContents","beginningSlash","matchAttributes","endSlash","text","createTextNode","lastIndex","normalizedTagName","pop","childToAppend","attMatch","attrName","attrValue","closeMarkup","valid","wrapper","NS_NAME_TO_CLASS","registerSubclass","subclass","namespace","definePropertyBackedAttributes","sub","create","assign","ElementKind","VOID_ELEMENTS","Element","style","kind","VOID","NORMAL","outerHTML","tag","start","attrsToString","contents","innerHTML","html","n","setAttributeNS","getAttributeNS","removeAttributeNS","hasAttributeNS","hasAttributes","valueAsString","propertyBacked","matchAttrPredicate","attributeNamespace","findIndex","getElementsByClassName","names","inputClassList","inputClassName","getElementsByTagName","lowerTagName","deep","clone","getBoundingClientRectAsync","left","top","right","bottom","x","y","width","height","transferredBoundingClientRect","_classList","class","el","appendGlobalEventProperties","HTMLElement","normalizedKey","stored","arguments","form","accessKey","contentEditable","dir","lang","title","draggable","hidden","noModule","spellcheck","translate","HTMLAnchorElement","relList","_relList","href","rel","hreflang","media","HTMLButtonElement","formAction","formEnctype","formMethod","formTarget","autofocus","disabled","f32","Float32Array","u16","isSmallInt","num","serializeTransferrableObject","args","serialized","i","arg","Array","isArray","serializedArray","serializedObject","CanvasGradient","addColorStop","offset","color","CanvasPattern","setTransform","OffscreenCanvasPolyfill","canvas","getContext","contextType","context","OffscreenCanvasRenderingContext2DPolyfill","objectIndex","canvasElement","lineDash","fnName","createObjectReference","objectId","creationMethod","creationArgs","clearRect","w","h","fillRect","strokeRect","lineWidth","fillText","maxWidth","moveTo","lineTo","closePath","stroke","restore","save","resetTransform","rotate","angle","transform","a","b","c","d","f","scale","globalAlpha","globalCompositeOperation","imageSmoothingQuality","fillStyle","strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","beginPath","strokeText","textAlign","textBaseline","lineCap","lineDashOffset","lineJoin","miterLimit","arc","radius","startAngle","endAngle","anticlockwise","arcTo","x1","y1","x2","y2","direction","font","ellipse","radiusX","radiusY","rotation","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","rect","quadraticCurveTo","cpx","cpy","imageSmoothingEnabled","setLineDash","getLineDash","clip","pathOrFillRule","fillRule","fill","transformOrA","bOrC","cOrD","dOrE","eOrF","createLinearGradient","x0","y0","gradientId","createRadialGradient","r0","r1","createPattern","image","repetition","patternId","drawImage","dx","dy","createImageData","getImageData","putImageData","isPointInPath","isPointInStroke","measureText","indexTracker","retrieveImageBitmap","callIndex","transferredImageBitmap","_b","FakeNativeCanvasPattern","instance","pattern","deferredUpgrades","WeakMap","CanvasRenderingContext2DShim","queue","upgraded","unresolvedCalls","OffscreenCanvas","defaultView","implementation","polyfillUsed","getOffscreenCanvasAsync","deferred","isTestMode","upgradePromise","transferredOffscreenCanvas","goodImplementation","maybeUpgradeImplementation","degradeImplementation","flushQueue","isSetter","delegateFunc","delegateSetter","delegateGetter","segments","ImageBitmap","fakePattern","antiClockwise","path","pathOrX","xOrY","yOrFillRule","imagedataOrWidth","sx","sy","sw","sh","imageData","dirtyX","dirtyY","dirtyWidth","dirtyHeight","HTMLCanvasElement","HTMLDataElement","HTMLDataListElement","HTMLEmbedElement","src","MATCHING_CHILD_ELEMENT_TAGNAMES","HTMLFormControlsCollectionMixin","HTMLFieldSetElement","HTMLFormElement","elements","method","action","enctype","acceptCharset","autocomplete","autocapitalize","HTMLIFrameElement","sandbox","_sandbox","allow","allowFullscreen","csp","referrerPolicy","srcdoc","HTMLImageElement","alt","crossOrigin","isMap","sizes","srcset","useMap","HTMLInputLabelsMixin","for","HTMLInputElement","valueAsDate","date","stringToDate","invalid","getTime","Date","TypeError","dateToString","valueAsNumber","NaN","checked","getFullYear","m","getMonth","getDate","str","components","parseInt","accept","defaultChecked","dirName","formEncType","maxLength","min","multiple","placeholder","readOnly","required","size","step","HTMLLabelElement","control","htmlFor","getElementById","HTMLLinkElement","as","HTMLMapElement","areas","HTMLMeterElement","high","low","optimum","HTMLModElement","cite","datetime","HTMLOListElement","reversed","HTMLOptionElement","label","selected","defaultSelected","HTMLProgressElement","position","HTMLQuoteElement","HTMLScriptElement","charset","async","defer","isOptionPredicate","isSelectedOptionPredicate","HTMLSelectElement","selectedIndex","firstSelectedChild","selectedOptions","HTMLSourceElement","HTMLStyleElement","HTMLTableCellElement","headers","_headers","cellIndex","parent","abbr","colSpan","rowSpan","scope","HTMLTableColElement","span","removeElement","insertBeforeElementsWithTagName","insertBeforeElement","HTMLTableElement","caption","newElement","tHead","tFoot","rows","tBodies","TABLE_SECTION_TAGNAMES","indexInAncestor","isValidAncestor","HTMLTableRowElement","cells","rowIndex","sectionRowIndex","deleteCell","cell","insertCell","td","createElement","HTMLTableSectionElement","deleteRow","insertRow","tr","HTMLTimeElement","dateTime","Text","splitText","remainderTextNode","insertBeforePosition","insertBeforeNode","DocumentFragment","createDocumentFragment","Event","opts","stopPropagation","stopImmediatePropagation","preventDefault","initEvent","targetFromTransfer","touchListFromTransfer","touchListKeys","list","touchListKey","numericKey","transferredTouch","identifier","screenX","screenY","clientX","clientY","pageX","pageY","global","cancelBubble","eventPhase","isTrusted","timeStamp","scoped","keyCode","offsetX","offsetY","touches","changedTouches","sync","innerWidth","innerHeight","DOCUMENT_NAME","Document","documentElement","propagateEvents","propagateSyncValues","propagateResize","skeleton","attribute","createEvent","body","SVGElement","createStorage","location","storage","define","initialize","hydrateableNode","cssKeys","globalEventHandlerKeys","localStorageData","sessionStorageData","addCssKeys","window","localStorage","sessionStorage","wrap","func","execute","apply","promise","result","reason","ALLOWLISTED_GLOBALS","ArrayBuffer","Blob","BigInt","BigInt64Array","BigUint64Array","Boolean","Cache","CustomEvent","DataView","EvalError","EventTarget","Float64Array","Function","Infinity","Int16Array","Int32Array","Int8Array","Intl","Proxy","RangeError","ReferenceError","Reflect","RegExp","Symbol","SyntaxError","TextDecoder","TextEncoder","URIError","URL","Uint32Array","Uint8Array","Uint8ClampedArray","WeakSet","WebAssembly","WebSocket","XMLHttpRequest","atob","btoa","caches","clearInterval","clearTimeout","console","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","fetch","indexedDB","isFinite","navigator","onerror","onrejectionhandled","onunhandledrejection","parseFloat","performance","requestAnimationFrame","cancelAnimationFrame","self","setInterval","unescape","globalScope","WorkerDOMEvent","noop","workerDOM","deleteUnsafe","object","warn","current","deleted","getOwnPropertyNames","prop","info","getPrototypeOf","originalFetch","longTaskWrap","hydrate"],"mappings":"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"}