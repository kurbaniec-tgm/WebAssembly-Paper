{"version":3,"file":"worker.js","sources":["../../../output/utils.js","../../../output/worker-thread/dom/matchElements.js","../../../output/worker-thread/phase.js","../../../output/worker-thread/nodes.js","../../../output/worker-thread/strings.js","../../../output/worker-thread/MutationTransfer.js","../../../output/worker-thread/MutationObserver.js","../../../output/worker-thread/dom/Node.js","../../../output/worker-thread/dom/ParentNode.js","../../../output/worker-thread/dom/DOMTokenList.js","../../../output/worker-thread/dom/Attr.js","../../../output/worker-thread/css/CSSStyleDeclaration.js","../../../output/worker-thread/dom/enhanceElement.js","../../../output/transfer/TransferrableNodes.js","../../../output/third_party/html-parser/html-parser.js","../../../output/worker-thread/dom/Element.js","../../../output/worker-thread/dom/HTMLElement.js","../../../output/worker-thread/dom/SVGElement.js","../../../output/worker-thread/dom/HTMLAnchorElement.js","../../../output/worker-thread/dom/HTMLButtonElement.js","../../../output/worker-thread/serializeTransferrableObject.js","../../../output/worker-thread/canvas/CanvasGradient.js","../../../output/worker-thread/canvas/CanvasPattern.js","../../../output/worker-thread/canvas/OffscreenCanvasPolyfill.js","../../../output/worker-thread/canvas/canvas-utils.js","../../../output/worker-thread/canvas/FakeNativeCanvasPattern.js","../../../output/worker-thread/canvas/CanvasRenderingContext2D.js","../../../output/worker-thread/dom/HTMLCanvasElement.js","../../../output/worker-thread/dom/HTMLDataElement.js","../../../output/worker-thread/dom/HTMLEmbedElement.js","../../../output/worker-thread/dom/HTMLFormControlsMixin.js","../../../output/worker-thread/dom/HTMLFieldSetElement.js","../../../output/worker-thread/dom/HTMLFormElement.js","../../../output/worker-thread/dom/HTMLIFrameElement.js","../../../output/worker-thread/dom/HTMLImageElement.js","../../../output/worker-thread/dom/HTMLInputLabelsMixin.js","../../../output/worker-thread/dom/HTMLInputElement.js","../../../output/worker-thread/dom/HTMLLabelElement.js","../../../output/worker-thread/dom/HTMLLinkElement.js","../../../output/worker-thread/dom/HTMLMapElement.js","../../../output/worker-thread/dom/HTMLMeterElement.js","../../../output/worker-thread/dom/HTMLModElement.js","../../../output/worker-thread/dom/HTMLOListElement.js","../../../output/worker-thread/dom/HTMLOptionElement.js","../../../output/worker-thread/dom/HTMLProgressElement.js","../../../output/worker-thread/dom/HTMLQuoteElement.js","../../../output/worker-thread/dom/HTMLScriptElement.js","../../../output/worker-thread/dom/HTMLSelectElement.js","../../../output/worker-thread/dom/HTMLSourceElement.js","../../../output/worker-thread/dom/HTMLStyleElement.js","../../../output/worker-thread/dom/HTMLTableCellElement.js","../../../output/worker-thread/dom/HTMLTableColElement.js","../../../output/worker-thread/dom/HTMLTableElement.js","../../../output/worker-thread/dom/HTMLTableRowElement.js","../../../output/worker-thread/dom/HTMLTableSectionElement.js","../../../output/worker-thread/dom/HTMLTimeElement.js","../../../output/worker-thread/dom/HTMLDataListElement.js","../../../output/worker-thread/dom/CharacterData.js","../../../output/worker-thread/dom/Text.js","../../../output/worker-thread/dom/Comment.js","../../../output/worker-thread/dom/DocumentFragment.js","../../../output/worker-thread/Event.js","../../../output/worker-thread/SyncValuePropagation.js","../../../output/worker-thread/ResizePropagation.js","../../../output/worker-thread/dom/Document.js","../../../output/worker-thread/Storage.js","../../../output/worker-thread/initialize.js","../../../output/worker-thread/index.js"],"sourcesContent":["/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const toLower = (value) => value.toLowerCase();\nexport const toUpper = (value) => value.toUpperCase();\nexport const containsIndexOf = (pos) => pos !== -1;\nexport const keyValueString = (key, value) => `${key}=\"${value}\"`;\n//# sourceMappingURL=utils.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower, toUpper } from '../../utils';\n// To future authors: It would be great if we could enforce that elements are not modified by a ConditionPredicate.\nexport const tagNameConditionPredicate = (tagNames) => (element) => {\n    console.assert(tagNames.every(t => t === toUpper(t)), 'tagNames must be all uppercase.');\n    return tagNames.includes(element.tagName);\n};\nexport const elementPredicate = (node) => node.nodeType === 1 /* ELEMENT_NODE */;\nexport const matchChildrenElements = (node, conditionPredicate) => {\n    const matchingElements = [];\n    node.childNodes.forEach(child => {\n        if (elementPredicate(child)) {\n            if (conditionPredicate(child)) {\n                matchingElements.push(child);\n            }\n            matchingElements.push(...matchChildrenElements(child, conditionPredicate));\n        }\n    });\n    return matchingElements;\n};\nexport const matchChildElement = (element, conditionPredicate) => {\n    let returnValue = null;\n    element.children.some(child => {\n        if (conditionPredicate(child)) {\n            returnValue = child;\n            return true;\n        }\n        const grandChildMatch = matchChildElement(child, conditionPredicate);\n        if (grandChildMatch !== null) {\n            returnValue = grandChildMatch;\n            return true;\n        }\n        return false;\n    });\n    return returnValue;\n};\nexport const matchNearestParent = (element, conditionPredicate) => {\n    while ((element = element.parentNode)) {\n        if (conditionPredicate(element)) {\n            return element;\n        }\n    }\n    return null;\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors\n * @param attrSelector the selector we are trying to match for.\n * @param element the element being tested.\n * @return boolean for whether we match the condition\n */\nexport const matchAttrReference = (attrSelector, element) => {\n    if (!attrSelector) {\n        return false;\n    }\n    const equalPos = attrSelector.indexOf('=');\n    const selectorLength = attrSelector.length;\n    const caseInsensitive = attrSelector.charAt(selectorLength - 2) === 'i';\n    let endPos = caseInsensitive ? selectorLength - 3 : selectorLength - 1;\n    if (equalPos !== -1) {\n        const equalSuffix = attrSelector.charAt(equalPos - 1);\n        const possibleSuffixes = ['~', '|', '$', '^', '*'];\n        const attrString = possibleSuffixes.includes(equalSuffix) ? attrSelector.substring(1, equalPos - 1) : attrSelector.substring(1, equalPos);\n        const rawValue = attrSelector.substring(equalPos + 1, endPos);\n        const rawAttrValue = element.getAttribute(attrString);\n        if (rawAttrValue) {\n            const casedValue = caseInsensitive ? toLower(rawValue) : rawValue;\n            const casedAttrValue = caseInsensitive ? toLower(rawAttrValue) : rawAttrValue;\n            switch (equalSuffix) {\n                case '~':\n                    return casedAttrValue.split(' ').indexOf(casedValue) !== -1;\n                case '|':\n                    return casedAttrValue === casedValue || casedAttrValue === `${casedValue}-`;\n                case '^':\n                    return casedAttrValue.startsWith(casedValue);\n                case '$':\n                    return casedAttrValue.endsWith(casedValue);\n                case '*':\n                    return casedAttrValue.indexOf(casedValue) !== -1;\n                default:\n                    return casedAttrValue === casedValue;\n            }\n        }\n        return false;\n    }\n    else {\n        return element.hasAttribute(attrSelector.substring(1, endPos));\n    }\n};\n//# sourceMappingURL=matchElements.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport let phase = 0 /* Initializing */;\nexport const set = (newPhase) => (phase = newPhase);\n//# sourceMappingURL=phase.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { phase } from './phase';\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Override the store for a node during the initialization phase.\n * @param node Node to store and modify with index\n * @param override Override number to use as the identifier.\n *\n * NOTE: THIS IS ONLY TO BE USED DURING INITIALIZATION.\n */\nexport function storeOverride(node, override) {\n    if (phase === 0 /* Initializing */) {\n        mapping.set((node[7 /* index */] = override), node);\n        count = Math.max(count, override);\n    }\n    return override;\n}\n/**\n * Stores a node in mapping, and makes the index available on the Node directly.\n * @param node Node to store and modify with index\n * @return index Node was stored with in mapping\n */\nexport function store(node) {\n    if (node[7 /* index */] !== undefined) {\n        return node[7 /* index */];\n    }\n    mapping.set((node[7 /* index */] = ++count), node);\n    if (phase > 0 /* Initializing */) {\n        // After Initialization, include all future dom node creation into the list for next transfer.\n        transfer.push(node);\n    }\n    return count;\n}\n/**\n * Retrieves a node based on an index.\n * @param index location in map to retrieve a Node for\n * @return either the Node represented in index position, or null if not available.\n */\nexport function get(index) {\n    // mapping has a 1 based index, since on first store we ++count before storing.\n    return (!!index && mapping.get(index)) || null;\n}\n/**\n * Returns nodes registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const copy = transfer;\n    transfer = [];\n    return copy;\n}\n//# sourceMappingURL=nodes.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Stores a string in mapping and returns the index of the location.\n * @param value string to store\n * @return location in map\n */\nexport function store(value) {\n    if (mapping.has(value)) {\n        // Safe to cast since we verified the mapping contains the value\n        return mapping.get(value);\n    }\n    mapping.set(value, count);\n    transfer.push(value);\n    return count++;\n}\n/**\n * Retrieve the index for a string (mostly used for tests).\n * @param value string value we need to know the index of\n * @returns index in the map for the string\n */\nexport function getForTesting(value) {\n    return mapping.get(value);\n}\n/**\n * Returns strings registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const strings = transfer;\n    transfer = [];\n    return strings;\n}\n//# sourceMappingURL=strings.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { consume as consumeNodes } from './nodes';\nimport { consume as consumeStrings } from './strings';\nimport { phase, set as setPhase } from './phase';\nlet pending = false;\nlet pendingMutations = [];\n// TODO(choumx): Change `mutation` to Array<Uint16> to prevent casting errors e.g. integer underflow, precision loss.\nexport function transfer(document, mutation) {\n    if (phase > 0 /* Initializing */ && document[58 /* allowTransfer */]) {\n        pending = true;\n        pendingMutations = pendingMutations.concat(mutation);\n        Promise.resolve().then(_ => {\n            if (pending) {\n                const nodes = new Uint16Array(consumeNodes().reduce((acc, node) => acc.concat(node[8 /* creationFormat */]), [])).buffer;\n                const mutations = new Uint16Array(pendingMutations).buffer;\n                document.postMessage({\n                    [54 /* phase */]: phase,\n                    [12 /* type */]: phase === 2 /* Mutating */ ? 3 /* MUTATE */ : 2 /* HYDRATE */,\n                    [37 /* nodes */]: nodes,\n                    [41 /* strings */]: consumeStrings(),\n                    [36 /* mutations */]: mutations,\n                }, [nodes, mutations]);\n                pendingMutations = [];\n                pending = false;\n                setPhase(2 /* Mutating */);\n            }\n        });\n    }\n}\n//# sourceMappingURL=MutationTransfer.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { transfer } from './MutationTransfer';\nconst observers = [];\nlet pendingMutations = false;\n/**\n * @param observerTarget\n * @param target\n */\nconst matchesIndex = (observerTarget, target) => {\n    return !!observerTarget && observerTarget[7 /* index */] === target[7 /* index */];\n};\n/**\n * @param observer\n * @param record\n */\nconst pushMutation = (observer, record) => {\n    observer.pushRecord(record);\n    if (!pendingMutations) {\n        pendingMutations = true;\n        Promise.resolve().then(() => {\n            pendingMutations = false;\n            observers.forEach(observer => observer.callback(observer.takeRecords()));\n        });\n    }\n};\n/**\n * @param document\n * @param record\n * @param transferable\n */\nexport function mutate(document, record, transferable) {\n    // Post-message `transferable` to the main thread to apply mutations.\n    transfer(document, transferable);\n    // The MutationRecord is only used for external callers of MutationObserver.\n    observers.forEach(observer => {\n        for (let t = record.target; t; t = t.parentNode) {\n            if (matchesIndex(observer.target, t)) {\n                pushMutation(observer, record);\n                break;\n            }\n        }\n    });\n}\nexport class MutationObserver {\n    constructor(callback) {\n        this[_a] = [];\n        this.callback = callback;\n    }\n    /**\n     * Register the MutationObserver instance to observe a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @param target Node to observe DOM mutations\n     */\n    observe(target, options) {\n        this.disconnect();\n        this.target = target;\n        this.options = options || {};\n        observers.push(this);\n    }\n    /**\n     * Stop the MutationObserver instance from observing a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     */\n    disconnect() {\n        this.target = null;\n        const index = observers.indexOf(this);\n        if (index >= 0) {\n            observers.splice(index, 1);\n        }\n    }\n    /**\n     * Empties the MutationObserver instance's record queue and returns what was in there.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @return Mutation Records stored on this MutationObserver instance.\n     */\n    takeRecords() {\n        const records = this[42 /* records */];\n        return records.splice(0, records.length);\n    }\n    /**\n     * NOTE: This method doesn't exist on native MutationObserver.\n     * @param record MutationRecord to store for this instance.\n     */\n    pushRecord(record) {\n        this[42 /* records */].push(record);\n    }\n}\n_a = 42 /* records */;\n//# sourceMappingURL=MutationObserver.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { store as storeNodeMapping, storeOverride as storeOverrideNodeMapping } from '../nodes';\nimport { toLower } from '../../utils';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\n/**\n * Propagates a property change for a Node to itself and all childNodes.\n * @param node Node to start applying change to\n * @param property Property to modify\n * @param value New value to apply\n */\nexport const propagate = (node, property, value) => {\n    node[property] = value;\n    node.childNodes.forEach(child => propagate(child, property, value));\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/Node\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n//\n// Please note, in this implmentation Node doesn't extend EventTarget.\n// This is intentional to reduce the number of classes.\nexport class Node {\n    constructor(nodeType, nodeName, ownerDocument, overrideIndex) {\n        this.childNodes = [];\n        this.parentNode = null;\n        this.isConnected = false;\n        this[_a] = {};\n        this.nodeType = nodeType;\n        this.nodeName = nodeName;\n        this.ownerDocument = ownerDocument || this;\n        this[45 /* scopingRoot */] = this;\n        this[7 /* index */] = overrideIndex ? storeOverrideNodeMapping(this, overrideIndex) : storeNodeMapping(this);\n        this[9 /* transferredFormat */] = [this[7 /* index */]];\n    }\n    // Unimplemented Properties\n    // Node.baseURI – https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI\n    // Unimplemented Methods\n    // Node.compareDocumentPosition() – https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n    // Node.getRootNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode\n    // Node.isDefaultNamespace() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isDefaultNamespace\n    // Node.isEqualNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isEqualNode\n    // Node.isSameNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isSameNode\n    // Node.lookupPrefix() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupPrefix\n    // Node.lookupNamespaceURI() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupNamespaceURI\n    // Node.normalize() – https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize\n    // Implemented at Element/Text layer\n    // Node.nodeValue – https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue\n    // Node.cloneNode – https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * Use `this.getTextContent()` instead of `super.textContent` to avoid incorrect or expensive ES5 transpilation.\n     */\n    getTextContent() {\n        let textContent = '';\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            childNodes.forEach(childNode => (textContent += childNode.textContent));\n            return textContent;\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild\n     * @return Node's first child in the tree, or null if the node has no children.\n     */\n    get firstChild() {\n        return this.childNodes[0] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild\n     * @return The last child of a node, or null if there are no child elements.\n     */\n    get lastChild() {\n        return this.childNodes[this.childNodes.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling\n     * @return node immediately following the specified one in it's parent's childNodes, or null if one doesn't exist.\n     */\n    get nextSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) + 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling\n     * @return node immediately preceding the specified one in its parent's childNodes, or null if the specified node is the first in that list.\n     */\n    get previousSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes\n     * @return boolean if the Node has childNodes.\n     */\n    hasChildNodes() {\n        return this.childNodes.length > 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n     * @param otherNode\n     * @return whether a Node is a descendant of a given Node\n     */\n    contains(otherNode) {\n        if (otherNode === this) {\n            return true;\n        }\n        if (this.childNodes.length > 0) {\n            if (this.childNodes.includes(this)) {\n                return true;\n            }\n            return this.childNodes.some(child => child.contains(otherNode));\n        }\n        return false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n     * @param child\n     * @param referenceNode\n     * @return child after it has been inserted.\n     */\n    insertBefore(child, referenceNode) {\n        if (child === null || child === this) {\n            // The new child cannot contain the parent.\n            return child;\n        }\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach((node) => this.insertBefore(node, referenceNode));\n        }\n        else if (referenceNode == null) {\n            // When a referenceNode is not valid, appendChild(child).\n            return this.appendChild(child);\n        }\n        else if (this.childNodes.indexOf(referenceNode) >= 0) {\n            // Should only insertBefore direct children of this Node.\n            child.remove();\n            // Removing a child can cause this.childNodes to change, meaning we need to splice from its updated location.\n            this.childNodes.splice(this.childNodes.indexOf(referenceNode), 0, child);\n            this[56 /* insertedNode */](child);\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                nextSibling: referenceNode,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                referenceNode[7 /* index */],\n                0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * When a Node is inserted, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [(45 /* scopingRoot */, 7 /* index */, 9 /* transferredFormat */, 8 /* creationFormat */, _a = 10 /* handlers */, 56 /* insertedNode */)](child) {\n        child.parentNode = this;\n        propagate(child, 'isConnected', this.isConnected);\n        propagate(child, 45 /* scopingRoot */, this[45 /* scopingRoot */]);\n    }\n    /**\n     * When a node is removed, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        child.parentNode = null;\n        propagate(child, 'isConnected', false);\n        propagate(child, 45 /* scopingRoot */, child);\n    }\n    /**\n     * Adds the specified childNode argument as the last child to the current node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n     * @param child Child Node to append to this Node.\n     * @return Node the appended node.\n     */\n    appendChild(child) {\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach(this.appendChild, this);\n        }\n        else {\n            child.remove();\n            this.childNodes.push(child);\n            this[56 /* insertedNode */](child);\n            const previousSibling = this.childNodes[this.childNodes.length - 2];\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                previousSibling,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                0,\n                previousSibling ? previousSibling[7 /* index */] : 0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n        }\n        return child;\n    }\n    /**\n     * Removes a child node from the current element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n     * @param child Child Node to remove from this Node.\n     * @return Node removed from the tree or null if the node wasn't attached to this tree.\n     */\n    removeChild(child) {\n        const index = this.childNodes.indexOf(child);\n        const exists = index >= 0;\n        if (exists) {\n            this.childNodes.splice(index, 1);\n            this[57 /* removedNode */](child);\n            mutate(this.ownerDocument, {\n                removedNodes: [child],\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [2 /* CHILD_LIST */, this[7 /* index */], 0, 0, 0, 1, child[7 /* index */]]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * @param newChild\n     * @param oldChild\n     * @return child that was replaced.\n     * @note `HierarchyRequestError` not handled e.g. newChild is an ancestor of current node.\n     * @see https://dom.spec.whatwg.org/#concept-node-replace\n     */\n    replaceChild(newChild, oldChild) {\n        if (newChild === oldChild ||\n            // In DOM, this throws DOMException: \"The node to be replaced is not a child of this node.\"\n            oldChild.parentNode !== this ||\n            // In DOM, this throws DOMException: \"The new child element contains the parent.\"\n            newChild.contains(this)) {\n            return oldChild;\n        }\n        // If newChild already exists in the DOM, it is first removed.\n        // TODO: Consider using a mutation-free API here to avoid two mutations\n        // per replaceChild() call.\n        newChild.remove();\n        const index = this.childNodes.indexOf(oldChild);\n        this.childNodes.splice(index, 1, newChild);\n        this[57 /* removedNode */](oldChild);\n        this[56 /* insertedNode */](newChild);\n        mutate(this.ownerDocument, {\n            addedNodes: [newChild],\n            removedNodes: [oldChild],\n            type: 2 /* CHILD_LIST */,\n            nextSibling: this.childNodes[index + 1],\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            this.childNodes[index + 1] ? this.childNodes[index + 1][7 /* index */] : 0,\n            0,\n            1,\n            1,\n            newChild[7 /* index */],\n            oldChild[7 /* index */],\n        ]);\n        return oldChild;\n    }\n    /**\n     * Removes this Node from the tree it belogs too.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\n     */\n    remove() {\n        this.parentNode && this.parentNode.removeChild(this);\n    }\n    /**\n     * Add an event listener to callback when a specific event type is dispatched.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function called when event is dispatched.\n     */\n    addEventListener(type, handler) {\n        const lowerType = toLower(type);\n        const storedType = storeString(lowerType);\n        const handlers = this[10 /* handlers */][lowerType];\n        let index = 0;\n        if (handlers) {\n            index = handlers.push(handler);\n        }\n        else {\n            this[10 /* handlers */][lowerType] = [handler];\n        }\n        transfer(this.ownerDocument, [4 /* EVENT_SUBSCRIPTION */, this[7 /* index */], 0, 1, storedType, index]);\n    }\n    /**\n     * Remove a registered event listener for a specific event type.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function to stop calling when event is dispatched.\n     */\n    removeEventListener(type, handler) {\n        const lowerType = toLower(type);\n        const handlers = this[10 /* handlers */][lowerType];\n        const index = !!handlers ? handlers.indexOf(handler) : -1;\n        if (index >= 0) {\n            handlers.splice(index, 1);\n            transfer(this.ownerDocument, [\n                4 /* EVENT_SUBSCRIPTION */,\n                this[7 /* index */],\n                1,\n                0,\n                storeString(lowerType),\n                index,\n            ]);\n        }\n    }\n    /**\n     * Dispatch an event for this Node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n     * @param event Event to dispatch to this node and potentially cascade to parents.\n     */\n    dispatchEvent(event) {\n        let target = (event.currentTarget = this);\n        let handlers;\n        let iterator;\n        do {\n            handlers = target && target[10 /* handlers */] && target[10 /* handlers */][toLower(event.type)];\n            if (handlers) {\n                for (iterator = handlers.length; iterator--;) {\n                    if ((handlers[iterator].call(target, event) === false || event[51 /* end */]) && event.cancelable) {\n                        break;\n                    }\n                }\n            }\n        } while (event.bubbles && !(event.cancelable && event[50 /* stop */]) && (target = target && target.parentNode));\n        return !event.defaultPrevented;\n    }\n}\n//# sourceMappingURL=Node.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { elementPredicate, matchAttrReference, matchChildrenElements } from './matchElements';\nimport { Node } from './Node';\nimport { containsIndexOf, toLower } from '../../utils';\n/*\nNormally ParentNode is implemented as a mixin, but since the Node class is an abstract\nthis makes it hard to build a mixin that recieves a base of the representations of Node needing\nthe mixed in functionality.\n\n// Partially implemented Mixin Methods\n// Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n// - Element selectors\n// - ID selectors\n// - Class selectors\n// - Attribute selectors\n// Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n// Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n*/\nexport class ParentNode extends Node {\n    /**\n     * Getter returning children of an Element that are Elements themselves.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children\n     * @return Element objects that are children of this ParentNode, omitting all of its non-element nodes.\n     */\n    get children() {\n        return this.childNodes.filter(elementPredicate);\n    }\n    /**\n     * Getter returning the number of child elements of a Element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/childElementCount\n     * @return number of child elements of the given Element.\n     */\n    get childElementCount() {\n        return this.children.length;\n    }\n    /**\n     * Getter returning the first Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/firstElementChild\n     * @return first childNode that is also an element.\n     */\n    get firstElementChild() {\n        return this.childNodes.find(elementPredicate) || null;\n    }\n    /**\n     * Getter returning the last Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/lastElementChild\n     * @return first childNode that is also an element.\n     */\n    get lastElementChild() {\n        const children = this.children;\n        return children[children.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n     * @param selector the selector we are trying to match for.\n     * @return Element with matching selector.\n     */\n    querySelector(selector) {\n        const matches = querySelectorAll(this, selector);\n        return matches ? matches[0] : null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n     * @param selector the selector we are trying to match for.\n     * @return Elements with matching selector.\n     */\n    querySelectorAll(selector) {\n        return querySelectorAll(this, selector);\n    }\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n * @param node the node to filter results under.\n * @param selector the selector we are trying to match for.\n * @return Element with matching selector.\n */\nfunction querySelectorAll(node, selector) {\n    // As per spec: https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n    // First, parse the selector\n    const selectorBracketIndexes = [selector.indexOf('['), selector.indexOf(']')];\n    const selectorHasAttr = containsIndexOf(selectorBracketIndexes[0]) && containsIndexOf(selectorBracketIndexes[1]);\n    const elementSelector = selectorHasAttr ? selector.substring(0, selectorBracketIndexes[0]) : selector;\n    const attrSelector = selectorHasAttr ? selector.substring(selectorBracketIndexes[0], selectorBracketIndexes[1] + 1) : null;\n    // TODO(nainar): Parsing selectors is needed when we add in more complex selectors.\n    // Second, find all the matching elements on the Document\n    let matcher;\n    if (selector[0] === '[') {\n        matcher = element => matchAttrReference(selector, element);\n    }\n    else if (elementSelector[0] === '#') {\n        matcher = selectorHasAttr\n            ? element => element.id === elementSelector.substr(1) && matchAttrReference(attrSelector, element)\n            : element => element.id === elementSelector.substr(1);\n    }\n    else if (elementSelector[0] === '.') {\n        matcher = selectorHasAttr\n            ? element => element.classList.contains(elementSelector.substr(1)) && matchAttrReference(attrSelector, element)\n            : element => element.classList.contains(elementSelector.substr(1));\n    }\n    else {\n        matcher = selectorHasAttr\n            ? element => element.localName === toLower(elementSelector) && matchAttrReference(attrSelector, element)\n            : element => element.localName === toLower(elementSelector);\n    }\n    // Third, filter to return elements that exist within the querying element's descendants.\n    return matcher\n        ? matchChildrenElements(node[45 /* scopingRoot */], matcher).filter(element => node !== element && node.contains(element))\n        : [];\n}\n//# sourceMappingURL=ParentNode.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\n/**\n * Synchronizes the string getter/setter with the actual DOMTokenList instance.\n * @param defineOn Element or class extension to define getter/setter pair for token list access.\n * @param accessorKey Key used to access DOMTokenList directly from specific element.\n * @param propertyName Key used to access DOMTokenList as string getter/setter.\n */\nexport function synchronizedAccessor(defineOn, accessorKey, propertyName) {\n    Object.defineProperty(defineOn.prototype, propertyName, {\n        enumerable: true,\n        configurable: true,\n        get() {\n            return this[accessorKey].value;\n        },\n        set(value) {\n            this[accessorKey].value = value;\n        },\n    });\n}\nexport class DOMTokenList {\n    /**\n     * The DOMTokenList interface represents a set of space-separated tokens.\n     * It is indexed beginning with 0 as with JavaScript Array objects and is case-sensitive.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList\n     * @param target Specific Element instance to modify when value is changed.\n     * @param attributeName Name of the attribute used by Element to access DOMTokenList.\n     */\n    constructor(target, attributeName) {\n        this[_a] = [];\n        this[13 /* target */] = target;\n        this[18 /* attributeName */] = attributeName;\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @return string representation of tokens (space delimitted).\n     */\n    get value() {\n        return this[43 /* tokens */].join(' ');\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/length\n     * @return integer representing the number of objects stored in the object.\n     */\n    get length() {\n        return this[43 /* tokens */].length;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @param collection String of values space delimited to replace the current DOMTokenList with.\n     */\n    set value(collection) {\n        const oldValue = this.value;\n        const newValue = collection.trim();\n        // Replace current tokens with new tokens.\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...(newValue !== '' ? newValue.split(/\\s+/) : ''));\n        this[67 /* mutated */](oldValue, newValue);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/item\n     * @param index number from DOMTokenList entities to retrieve value of\n     * @return value stored at the index requested, or undefined if beyond known range.\n     */\n    item(index) {\n        return this[43 /* tokens */][index];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/contains\n     * @param token value the DOMTokenList is tested for.\n     * @return boolean indicating if the token is contained by the DOMTokenList.\n     */\n    contains(token) {\n        return this[43 /* tokens */].includes(token);\n    }\n    /**\n     * Add a token or tokens to the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/add\n     * @param tokens each token is a string to add to a TokenList.\n     */\n    add(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].concat(tokens)));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Remove a token or tokens from the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/remove\n     * @param tokens each token is a string to remove from a TokenList.\n     */\n    remove(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].filter(token => !tokens.includes(token))));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/replace\n     * @param token\n     * @param newToken\n     */\n    replace(token, newToken) {\n        if (!this[43 /* tokens */].includes(token)) {\n            return;\n        }\n        const oldValue = this.value;\n        const set = new Set(this[43 /* tokens */]);\n        if (token !== newToken) {\n            set.delete(token);\n            if (newToken !== '') {\n                set.add(newToken);\n            }\n        }\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...set);\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Adds or removes a token based on its presence in the token list.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle\n     * @param token string to add or remove from the token list\n     * @param force changes toggle into a one way-only operation. true => token added. false => token removed.\n     * @return true if the token is in the list following mutation, false if not.\n     */\n    toggle(token, force) {\n        if (!this[43 /* tokens */].includes(token)) {\n            if (force !== false) {\n                // Note, this will add the token if force is undefined (not passed into the method), or true.\n                this.add(token);\n            }\n            return true;\n        }\n        else if (force !== true) {\n            // Note, this will remove the token if force is undefined (not passed into the method), or false.\n            this.remove(token);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Report tokenList mutations to MutationObserver.\n     * @param oldValue value before mutation\n     * @param value value after mutation\n     * @private\n     */\n    [(_a = 43 /* tokens */, 13 /* target */, 18 /* attributeName */, 44 /* storeAttribute */, 67 /* mutated */)](oldValue, value) {\n        this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, this[18 /* attributeName */], value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: this[18 /* attributeName */],\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString(this[18 /* attributeName */]),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n//# sourceMappingURL=DOMTokenList.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { keyValueString } from '../../utils';\nexport const toString = (attributes) => attributes.map((attr) => keyValueString(attr.name, attr.value)).join(' ');\nexport const matchPredicate = (namespaceURI, name) => attr => attr.namespaceURI === namespaceURI && attr.name === name;\n//# sourceMappingURL=Attr.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { toLower } from '../../utils';\nimport { store as storeString } from '../strings';\nconst hyphenateKey = (key) => toLower(key.replace(/(webkit|ms|moz|khtml)/g, '-$1').replace(/([a-zA-Z])(?=[A-Z])/g, '$1-'));\nexport const appendKeys = (keys) => {\n    const keysToAppend = keys.filter(key => isNaN(key) && !CSSStyleDeclaration.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    const previousPrototypeLength = (CSSStyleDeclaration.prototype.length || 0);\n    if (previousPrototypeLength !== 0) {\n        CSSStyleDeclaration.prototype.length = previousPrototypeLength + keysToAppend.length;\n    }\n    else {\n        Object.defineProperty(CSSStyleDeclaration.prototype, 'length', {\n            configurable: true,\n            writable: true,\n            value: keysToAppend.length,\n        });\n    }\n    keysToAppend.forEach((key, index) => {\n        const hyphenatedKey = hyphenateKey(key);\n        CSSStyleDeclaration.prototype[index + previousPrototypeLength] = hyphenatedKey;\n        Object.defineProperties(CSSStyleDeclaration.prototype, {\n            [key]: {\n                get() {\n                    return this.getPropertyValue(hyphenatedKey);\n                },\n                set(value) {\n                    this.setProperty(hyphenatedKey, value);\n                },\n            },\n        });\n    });\n};\nexport class CSSStyleDeclaration {\n    constructor(target) {\n        this[_a] = {};\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n        this[13 /* target */] = target;\n    }\n    /**\n     * Retrieve the value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/getPropertyValue\n     * @param key the name of the property to retrieve the value for.\n     * @return value stored for the provided key.\n     */\n    getPropertyValue(key) {\n        return this[3 /* properties */][key] || '';\n    }\n    /**\n     * Remove a value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/removeProperty\n     * @param key the name of the property to retrieve the value for.\n     * @return previously stored value for the provided key.\n     */\n    removeProperty(key) {\n        const oldValue = this.getPropertyValue(key);\n        this[3 /* properties */][key] = null;\n        this.mutated(this.cssText);\n        return oldValue;\n    }\n    /**\n     * Stores a given value for the provided key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/setProperty\n     * @param key modify this key\n     * @param value store this value\n     */\n    setProperty(key, value) {\n        this[3 /* properties */][key] = value;\n        this.mutated(this.cssText);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @return css text string representing known and valid style declarations.\n     */\n    get cssText() {\n        let value;\n        let returnValue = '';\n        for (let key in this[3 /* properties */]) {\n            if ((value = this.getPropertyValue(key)) !== '') {\n                returnValue += `${key}: ${value}; `;\n            }\n        }\n        return returnValue.trim();\n    }\n    /**\n     * Replace all style declarations with new values parsed from a cssText string.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @param value css text string to parse and store\n     */\n    set cssText(value) {\n        // value should have an \"unknown\" type but get/set can't have different types.\n        // https://github.com/Microsoft/TypeScript/issues/2521\n        const stringValue = typeof value === 'string' ? value : '';\n        this[3 /* properties */] = {};\n        const values = stringValue.split(/[:;]/);\n        const length = values.length;\n        for (let index = 0; index + 1 < length; index += 2) {\n            this[3 /* properties */][toLower(values[index].trim())] = values[index + 1].trim();\n        }\n        this.mutated(this.cssText);\n    }\n    /**\n     * Report CSSStyleDeclaration mutations to MutationObserver.\n     * @param value value after mutation\n     * @private\n     * // TODO(KB): Write a test to ensure mutations are fired for CSSStyleDeclaration changes.\n     */\n    mutated(value) {\n        const oldValue = this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, 'style', value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: 'style',\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString('style'),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n_a = 3 /* properties */, 44 /* storeAttribute */, 13 /* target */;\n//# sourceMappingURL=CSSStyleDeclaration.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower } from '../../utils';\n// TODO: Do all boolean attributes have boolean properties?\n// TODO: Do enumerated attributes with non-boolean properties exist?\nexport const reflectProperties = (properties, defineOn) => {\n    properties.forEach(pair => {\n        for (let property in pair) {\n            const { 0: defaultValue, 1: attributeName = toLower(property), 2: keywords } = pair[property];\n            // Boolean attributes only care about presence, not attribute value.\n            // https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes\n            const isBooleanAttribute = typeof defaultValue === 'boolean';\n            Object.defineProperty(defineOn.prototype, property, {\n                enumerable: true,\n                get() {\n                    const element = this;\n                    const attributeValue = element.getAttribute(attributeName);\n                    if (keywords) {\n                        return element.hasAttribute(attributeName) ? attributeValue === keywords[0] : defaultValue;\n                    }\n                    if (isBooleanAttribute) {\n                        return element.hasAttribute(attributeName);\n                    }\n                    const castableValue = attributeValue || defaultValue;\n                    return typeof defaultValue === 'number' ? Number(castableValue) : String(castableValue);\n                },\n                set(value) {\n                    const element = this;\n                    if (keywords) {\n                        element.setAttribute(attributeName, value ? keywords[0] : keywords[1]);\n                    }\n                    else if (isBooleanAttribute) {\n                        value ? element.setAttribute(attributeName, '') : element.removeAttribute(attributeName);\n                    }\n                    else {\n                        element.setAttribute(attributeName, String(value));\n                    }\n                },\n            });\n        }\n    });\n};\n//# sourceMappingURL=enhanceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n//# sourceMappingURL=TransferrableNodes.js.map","import { SVG_NAMESPACE, HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { toLower } from '../../utils';\nfunction arr_back(arr) {\n    return arr[arr.length - 1];\n}\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nconst kMarkupPattern = /<!--([^]*)-->|<(\\/?)([a-z][-.0-9_a-z]*)([^>]*?)(\\/?)>/gi;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\nconst kAttributePattern = /(^|\\s)([^\\s\"'>\\/=]+)\\s*=\\s*(\"([^\"]+)\"|'([^']+)'|(\\S+))/gi;\nconst kSelfClosingElements = {\n    AREA: true,\n    BASE: true,\n    BR: true,\n    COL: true,\n    HR: true,\n    IMG: true,\n    INPUT: true,\n    LINK: true,\n    META: true,\n    PARAM: true,\n    SOURCE: true,\n    TRACK: true,\n    WBR: true,\n};\nconst kElementsClosedByOpening = {\n    LI: { LI: true },\n    DT: { DT: true, DD: true },\n    DD: { DD: true, DT: true },\n    P: {\n        ADDRESS: true,\n        ARTICLE: true,\n        ASIDE: true,\n        BLOCKQUOTE: true,\n        DETAILS: true,\n        DIV: true,\n        DL: true,\n        FIELDSET: true,\n        FIGCAPTION: true,\n        FIGURE: true,\n        FOOTER: true,\n        FORM: true,\n        H1: true,\n        H2: true,\n        H3: true,\n        H4: true,\n        H5: true,\n        H6: true,\n        HEADER: true,\n        HR: true,\n        MAIN: true,\n        NAV: true,\n        OL: true,\n        P: true,\n        PRE: true,\n        SECTION: true,\n        TABLE: true,\n        UL: true,\n    },\n    RT: { RT: true, RP: true },\n    RP: { RT: true, RP: true },\n    OPTGROUP: { OPTGROUP: true },\n    OPTION: { OPTION: true, OPTGROUP: true },\n    THEAD: { TBODY: true, TFOOT: true },\n    TBODY: { TBODY: true, TFOOT: true },\n    TR: { TR: true },\n    TD: { TD: true, TH: true },\n    TH: { TD: true, TH: true },\n};\nconst kElementsClosedByClosing = {\n    LI: { UL: true, OL: true },\n    A: { DIV: true },\n    B: { DIV: true },\n    I: { DIV: true },\n    P: { DIV: true },\n    TD: { TR: true, TABLE: true },\n    TH: { TR: true, TABLE: true },\n};\nconst kBlockTextElements = {\n    SCRIPT: true,\n    NOSCRIPT: true,\n    STYLE: true,\n    PRE: true,\n};\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n * @param  {string} data HTML in string format.\n * @param {!Element} root The element to use as root.\n * @return {Element}      root element\n */\nexport function parse(data, rootElement) {\n    const ownerDocument = rootElement.ownerDocument;\n    const root = ownerDocument.createElementNS(rootElement.namespaceURI, rootElement.localName);\n    let currentParent = root;\n    let currentNamespace = root.namespaceURI;\n    const stack = [root];\n    let lastTextPos = 0;\n    let match;\n    data = '<q>' + data + '</q>';\n    const tagsClosed = [];\n    if (currentNamespace !== SVG_NAMESPACE && currentNamespace !== HTML_NAMESPACE) {\n        throw new Error('Namespace not supported: ' + currentNamespace);\n    }\n    while ((match = kMarkupPattern.exec(data))) {\n        const commentContents = match[1]; // <!--contents-->\n        let beginningSlash = match[2]; // ... </ ...\n        const tagName = match[3];\n        const matchAttributes = match[4];\n        const endSlash = match[5]; // ... /> ...\n        if (lastTextPos < match.index) {\n            // if has content\n            const text = data.slice(lastTextPos, match.index);\n            currentParent.appendChild(ownerDocument.createTextNode(text));\n        }\n        lastTextPos = kMarkupPattern.lastIndex;\n        if (commentContents !== undefined) {\n            // this is a comment\n            currentParent.appendChild(ownerDocument.createComment(commentContents));\n            continue;\n        }\n        const normalizedTagName = tagName.toUpperCase();\n        if (normalizedTagName === 'SVG') {\n            currentNamespace = beginningSlash ? HTML_NAMESPACE : SVG_NAMESPACE;\n        }\n        if (!beginningSlash) {\n            // not </ tags\n            if (!endSlash && kElementsClosedByOpening[currentParent.tagName]) {\n                if (kElementsClosedByOpening[currentParent.tagName][normalizedTagName]) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                }\n            }\n            const childToAppend = ownerDocument.createElementNS(currentNamespace, currentNamespace === HTML_NAMESPACE ? toLower(tagName) : tagName);\n            for (let attMatch; (attMatch = kAttributePattern.exec(matchAttributes));) {\n                const attrName = attMatch[2];\n                const attrValue = attMatch[4] || attMatch[5] || attMatch[6];\n                childToAppend.setAttribute(attrName, attrValue);\n            }\n            currentParent = currentParent.appendChild(childToAppend);\n            stack.push(currentParent);\n            if (kBlockTextElements[normalizedTagName]) {\n                // a little test to find next </script> or </style> ...\n                const closeMarkup = '</' + toLower(normalizedTagName) + '>';\n                const index = data.indexOf(closeMarkup, kMarkupPattern.lastIndex);\n                if (index == -1) {\n                    throw new Error('Close markup not found.');\n                }\n                else {\n                    kMarkupPattern.lastIndex = index;\n                }\n            }\n        }\n        if (tagName === 'foreignObject') {\n            currentNamespace = beginningSlash ? SVG_NAMESPACE : HTML_NAMESPACE;\n        }\n        if (beginningSlash || endSlash || kSelfClosingElements[normalizedTagName]) {\n            // </ or /> or <br> etc.\n            while (true) {\n                if (stack.length <= 1) {\n                    break;\n                }\n                if (currentParent.nodeName.toUpperCase() == normalizedTagName) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                    break;\n                }\n                else {\n                    // Trying to close current tag, and move on\n                    if (kElementsClosedByClosing[currentParent.tagName]) {\n                        if (kElementsClosedByClosing[currentParent.tagName][normalizedTagName]) {\n                            stack.pop();\n                            currentParent = arr_back(stack);\n                            continue;\n                        }\n                    }\n                    // Use aggressive strategy to handle unmatching markups.\n                    break;\n                }\n            }\n        }\n    }\n    for (const node of stack) {\n        if (tagsClosed[tagsClosed.length - 1] == node.nodeName) {\n            stack.pop();\n            tagsClosed.pop();\n            currentParent = arr_back(stack);\n        }\n        else\n            break;\n    }\n    const valid = stack.length === 1;\n    if (!valid) {\n        throw new Error('Attempting to parse invalid HTML content.');\n    }\n    const wrapper = root.firstChild;\n    if (wrapper) {\n        wrapper.parentNode = null;\n        wrapper.childNodes.forEach((node) => {\n            node.parentNode = null;\n        });\n        return wrapper;\n    }\n    throw new Error('Attempting to parse invalid HTML.');\n}\n//# sourceMappingURL=html-parser.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { ParentNode } from './ParentNode';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { toString as attrsToString, matchPredicate as matchAttrPredicate } from './Attr';\nimport { mutate } from '../MutationObserver';\nimport { toLower, toUpper } from '../../utils';\nimport { CSSStyleDeclaration } from '../css/CSSStyleDeclaration';\nimport { matchChildrenElements } from './matchElements';\nimport { reflectProperties } from './enhanceElement';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { parse } from '../../third_party/html-parser/html-parser';\nimport { propagate } from './Node';\nexport const NS_NAME_TO_CLASS = {};\nexport const registerSubclass = (localName, subclass, namespace = HTML_NAMESPACE) => (NS_NAME_TO_CLASS[`${namespace}:${localName}`] = subclass);\nexport function definePropertyBackedAttributes(defineOn, attributes) {\n    const sub = Object.create(defineOn[46 /* propertyBackedAttributes */]);\n    defineOn[46 /* propertyBackedAttributes */] = Object.assign(sub, attributes);\n}\n/**\n * There are six kinds of elements, each having different start/close tag semantics.\n * @see https://html.spec.whatwg.org/multipage/syntax.html#elements-2\n */\nvar ElementKind;\n(function (ElementKind) {\n    ElementKind[ElementKind[\"NORMAL\"] = 0] = \"NORMAL\";\n    ElementKind[ElementKind[\"VOID\"] = 1] = \"VOID\";\n    // The following element kinds have no special handling in worker-dom yet\n    // and are lumped into the NORMAL kind.\n    /*\n    FOREIGN,\n    TEMPLATE,\n    RAW_TEXT,\n    ESCAPABLE_RAW,\n    */\n})(ElementKind || (ElementKind = {}));\n/**\n * @see https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n */\nconst VOID_ELEMENTS = ['AREA', 'BASE', 'BR', 'COL', 'EMBED', 'HR', 'IMG', 'INPUT', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'];\nexport class Element extends ParentNode {\n    constructor(nodeType, localName, namespaceURI, ownerDocument, overrideIndex) {\n        super(nodeType, toUpper(localName), ownerDocument, overrideIndex);\n        this.attributes = [];\n        this.style = new CSSStyleDeclaration(this);\n        this.namespaceURI = namespaceURI || HTML_NAMESPACE;\n        this.localName = localName;\n        this.kind = VOID_ELEMENTS.includes(this.tagName) ? ElementKind.VOID : ElementKind.NORMAL;\n        this[8 /* creationFormat */] = [\n            this[7 /* index */],\n            this.nodeType,\n            storeString(this.localName),\n            0,\n            this.namespaceURI === null ? 0 : storeString(this.namespaceURI),\n        ];\n    }\n    // Unimplemented properties\n    // Element.clientHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight\n    // Element.clientLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientLeft\n    // Element.clientTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n    // Element.clientWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth\n    // set Element.innerHTML – https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // Element.prefix – https://developer.mozilla.org/en-US/docs/Web/API/Element/prefix\n    // NonDocummentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // Element.scrollHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight\n    // Element.scrollLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft\n    // Element.scrollLeftMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeftMax\n    // Element.scrollTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop\n    // Element.scrollTopMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTopMax\n    // Element.scrollWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth\n    // Element.shadowRoot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/shadowRoot\n    // Element.slot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/slot\n    // Element.tabStop – https://developer.mozilla.org/en-US/docs/Web/API/Element/tabStop\n    // Element.undoManager – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoManager\n    // Element.undoScope – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoScope\n    // Unimplemented Methods\n    // Element.attachShadow() – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\n    // Element.animate() – https://developer.mozilla.org/en-US/docs/Web/API/Element/animate\n    // Element.closest() – https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n    // Element.getAttributeNames() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n    // Element.getBoundingClientRect() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n    // Element.getClientRects() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects\n    // Element.getElementsByTagNameNS() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagNameNS\n    // Element.insertAdjacentElement() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement\n    // Element.insertAdjacentHTML() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n    // Element.insertAdjacentText() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentText\n    // Element.matches() – https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n    // Element.releasePointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture\n    // Element.requestFullscreen() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n    // Element.requestPointerLock() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock\n    // Element.scrollIntoView() – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\n    // Element.setCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setCapture\n    // Element.setPointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture\n    // Partially implemented Mixin Methods\n    // Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n    // - Element selectors\n    // - ID selectors\n    // - Class selectors\n    // - Attribute selectors\n    // Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n    // Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n    // Mixins not implemented\n    // Slotable.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Slotable/assignedSlot\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML\n     * @return string representation of serialized HTML describing the Element and its descendants.\n     */\n    get outerHTML() {\n        const tag = this.localName || this.tagName;\n        const start = `<${[tag, attrsToString(this.attributes)].join(' ').trim()}>`;\n        const contents = this.innerHTML;\n        if (!contents) {\n            if (this.kind === ElementKind.VOID) {\n                // Void elements e.g. <input> only have a start tag (unless children are added programmatically).\n                // https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n                return start;\n            }\n        }\n        return start + contents + `</${tag}>`;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @return string representation of serialized HTML describing the Element's descendants.\n     */\n    get innerHTML() {\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            return childNodes\n                .map(child => {\n                switch (child.nodeType) {\n                    case 3 /* TEXT_NODE */:\n                        return child.textContent;\n                    case 8 /* COMMENT_NODE */:\n                        return `<!--${child.textContent}-->`;\n                    default:\n                        return child.outerHTML;\n                }\n            })\n                .join('');\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @param html The raw html string to parse.\n     */\n    set innerHTML(html) {\n        const root = parse(html, this);\n        // remove previous children\n        this.childNodes.forEach(n => {\n            propagate(n, 'isConnected', false);\n            propagate(n, 45 /* scopingRoot */, n);\n        });\n        mutate(this.ownerDocument, {\n            removedNodes: this.childNodes,\n            type: 2 /* CHILD_LIST */,\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            0,\n            0,\n            0,\n            this.childNodes.length,\n            ...this.childNodes.map(node => node[7 /* index */]),\n        ]);\n        this.childNodes = [];\n        // add new children\n        root.childNodes.forEach((child) => this.appendChild(child));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @param text new text replacing all childNodes content.\n     */\n    set textContent(text) {\n        // TODO(KB): Investigate removing all children in a single .splice to childNodes.\n        this.childNodes.slice().forEach((child) => child.remove());\n        this.appendChild(this.ownerDocument.createTextNode(text));\n    }\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName\n     * @return string tag name (i.e 'div')\n     */\n    get tagName() {\n        return this.nodeName;\n    }\n    /**\n     * Sets the value of an attribute on this element using a null namespace.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttribute(name, value) {\n        this.setAttributeNS(HTML_NAMESPACE, name, value);\n    }\n    /**\n     * Get the value of an attribute on this Element with the null namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttribute(name) {\n        return this.getAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * Remove an attribute from this element in the null namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param name attribute name\n     */\n    removeAttribute(name) {\n        this.removeAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttribute(name) {\n        return this.hasAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n     * @return Boolean indicating if the element has any attributes.\n     */\n    hasAttributes() {\n        return this.attributes.length > 0;\n    }\n    /**\n     * Sets the value of an attribute on this Element with the provided namespace.\n     *\n     * If the attribute already exists, the value is updated; otherwise a new attribute is added with the specified name and value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttributeNS\n     * @param namespaceURI\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttributeNS(namespaceURI, name, value) {\n        const valueAsString = String(value);\n        const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n        if (propertyBacked !== undefined) {\n            if (!this.attributes.find(matchAttrPredicate(namespaceURI, name))) {\n                this.attributes.push({\n                    namespaceURI,\n                    name,\n                    value: valueAsString,\n                });\n            }\n            propertyBacked[1](this, valueAsString);\n            return;\n        }\n        const oldValue = this[44 /* storeAttribute */](namespaceURI, name, valueAsString);\n        mutate(this.ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this,\n            attributeName: name,\n            attributeNamespace: namespaceURI,\n            value: valueAsString,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[7 /* index */],\n            storeString(name),\n            storeString(namespaceURI),\n            value !== null ? storeString(valueAsString) + 1 : 0,\n        ]);\n    }\n    [(_a = 46 /* propertyBackedAttributes */, 44 /* storeAttribute */)](namespaceURI, name, value) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        const oldValue = (attr && attr.value) || '';\n        if (attr) {\n            attr.value = value;\n        }\n        else {\n            this.attributes.push({\n                namespaceURI,\n                name,\n                value,\n            });\n        }\n        return oldValue;\n    }\n    /**\n     * Get the value of an attribute on this Element with the specified namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttributeNS(namespaceURI, name) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        if (attr) {\n            const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n            return propertyBacked !== undefined ? propertyBacked[0](this) : attr.value;\n        }\n        return null;\n    }\n    /**\n     * Remove an attribute from this element in the specified namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     */\n    removeAttributeNS(namespaceURI, name) {\n        const index = this.attributes.findIndex(matchAttrPredicate(namespaceURI, name));\n        if (index >= 0) {\n            const oldValue = this.attributes[index].value;\n            this.attributes.splice(index, 1);\n            mutate(this.ownerDocument, {\n                type: 0 /* ATTRIBUTES */,\n                target: this,\n                attributeName: name,\n                attributeNamespace: namespaceURI,\n                oldValue,\n            }, [\n                0 /* ATTRIBUTES */,\n                this[7 /* index */],\n                storeString(name),\n                storeString(namespaceURI),\n                0,\n            ]);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttributeNS(namespaceURI, name) {\n        return this.attributes.some(matchAttrPredicate(namespaceURI, name));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n     * @param names contains one more more classnames to match on. Multiples are space seperated, indicating an AND operation.\n     * @return Element array with matching classnames\n     */\n    getElementsByClassName(names) {\n        const inputClassList = names.split(' ');\n        // TODO(KB) – Compare performance of [].some(value => DOMTokenList.contains(value)) and regex.\n        // const classRegex = new RegExp(classNames.split(' ').map(name => `(?=.*${name})`).join(''));\n        return matchChildrenElements(this, element => inputClassList.some(inputClassName => element.classList.contains(inputClassName)));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n     * @param tagName the qualified name to look for. The special string \"*\" represents all elements.\n     * @return Element array with matching tagnames\n     */\n    getElementsByTagName(tagName) {\n        const lowerTagName = toLower(tagName);\n        return matchChildrenElements(this, tagName === '*'\n            ? _ => true\n            : element => (element.namespaceURI === HTML_NAMESPACE ? element.localName === lowerTagName : element.tagName === tagName));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return Element containing all current attributes and potentially childNode clones of the Element requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createElementNS(this.namespaceURI, this.namespaceURI === HTML_NAMESPACE ? toLower(this.tagName) : this.tagName);\n        this.attributes.forEach(attr => clone.setAttribute(attr.name, attr.value));\n        if (deep) {\n            this.childNodes.forEach((child) => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n    /**\n     * Return the ClientRect for an Element once determined by the main thread.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n     * @return Promise<ClientRect>\n     *\n     * Note: Edge and IE11 do not return the x/y value, but top/left are equivalent. Normalize the values here.\n     */\n    getBoundingClientRectAsync() {\n        const defaultValue = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n        };\n        return new Promise(resolve => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 6 /* GET_BOUNDING_CLIENT_RECT */ &&\n                    data[13 /* target */][0] === this[7 /* index */]) {\n                    this.ownerDocument.removeGlobalEventListener('message', messageHandler);\n                    const transferredBoundingClientRect = data[38 /* data */];\n                    resolve({\n                        top: transferredBoundingClientRect[0],\n                        right: transferredBoundingClientRect[1],\n                        bottom: transferredBoundingClientRect[2],\n                        left: transferredBoundingClientRect[3],\n                        width: transferredBoundingClientRect[4],\n                        height: transferredBoundingClientRect[5],\n                        x: transferredBoundingClientRect[0],\n                        y: transferredBoundingClientRect[3],\n                    });\n                }\n            };\n            if (!this.ownerDocument.addGlobalEventListener || !this.isConnected) {\n                // Elements run within Node runtimes are missing addEventListener as a global.\n                // In this case, treat the return value the same as a disconnected node.\n                resolve(defaultValue);\n            }\n            else {\n                this.ownerDocument.addGlobalEventListener('message', messageHandler);\n                transfer(this.ownerDocument, [5 /* GET_BOUNDING_CLIENT_RECT */, this[7 /* index */]]);\n                setTimeout(resolve, 500, defaultValue); // TODO: Why a magical constant, define and explain.\n            }\n        });\n    }\n    get classList() {\n        return this._classList || (this._classList = new DOMTokenList(this, 'class'));\n    }\n}\nElement[_a] = {\n    class: [(el) => el.classList.value, (el, value) => (el.classList.value = value)],\n    style: [(el) => el.cssText, (el, value) => (el.cssText = value)],\n};\nsynchronizedAccessor(Element, 'classList', 'className');\nreflectProperties([{ id: [''] }], Element);\n//# sourceMappingURL=Element.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { matchNearestParent, tagNameConditionPredicate } from './matchElements';\nexport const appendGlobalEventProperties = (keys) => {\n    const keysToAppend = keys.filter(key => !HTMLElement.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    keysToAppend.forEach((key) => {\n        const normalizedKey = key.replace(/on/, '');\n        Object.defineProperty(HTMLElement.prototype, key, {\n            enumerable: true,\n            get() {\n                return this[76 /* propertyEventHandlers */][normalizedKey] || null;\n            },\n            set(value) {\n                const stored = this[76 /* propertyEventHandlers */][normalizedKey];\n                if (stored) {\n                    this.removeEventListener(normalizedKey, stored);\n                }\n                this.addEventListener(normalizedKey, value);\n                this[76 /* propertyEventHandlers */][normalizedKey] = value;\n            },\n        });\n    });\n};\nexport class HTMLElement extends Element {\n    constructor() {\n        super(...arguments);\n        this[_a] = {};\n    }\n    /**\n     * Find the nearest parent form element.\n     * Implemented in HTMLElement since so many extensions of HTMLElement repeat this functionality. This is not to spec.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return nearest parent form element.\n     */\n    get form() {\n        return matchNearestParent(this, tagNameConditionPredicate(['FORM']));\n    }\n    [(_a = 76 /* propertyEventHandlers */, 68 /* serializeAsTransferrableObject */)]() {\n        return [7 /* HTMLElement */, this[7 /* index */]];\n    }\n}\n// Reflected properties\n// HTMLElement.accessKey => string, reflected attribute\n// HTMLElement.contentEditable => string, reflected attribute\n// HTMLElement.dir => string, reflected attribute\n// HTMLElement.lang => string, reflected attribute\n// HTMLElement.title => string, reflected attribute\n// HTMLElement.draggable => boolean, reflected attribute\n// HTMLElement.hidden => boolean, reflected attribute\n// HTMLElement.noModule => boolean, reflected attribute\n// HTMLElement.spellcheck => boolean, reflected attribute\n// HTMLElement.translate => boolean, reflected attribute\nreflectProperties([\n    { accessKey: [''] },\n    { contentEditable: ['inherit'] },\n    { dir: [''] },\n    { lang: [''] },\n    { title: [''] },\n    { draggable: [false, /* attr */ undefined, /* keywords */ ['true', 'false']] },\n    { hidden: [false, /* attr */ undefined] },\n    { noModule: [false] },\n    { spellcheck: [true, /* attr */ undefined, /* keywords */ ['true', 'false']] },\n    { translate: [true, /* attr */ undefined, /* keywords */ ['yes', 'no']] },\n], HTMLElement);\n// Properties\n// HTMLElement.accessKeyLabel => string, readonly value of \"accessKey\"\n// HTMLElement.isContentEditable => boolean, readonly value of contentEditable\n// HTMLElement.nonce => string, NOT REFLECTED\n// HTMLElement.tabIndex => number, reflected attribute\n// Layout Properties (TBD)\n// HTMLElement.offsetHeight => double, readonly\n// HTMLElement.offsetLeft => double, readonly\n// HTMLElement.offsetParent => Element\n// HTMLElement.offsetTop => double, readonly\n// HTMLElement.offsetWidth => double, readonly\n// Unimplemented Properties\n// HTMLElement.contextMenu => HTMLElement\n// HTMLElement.dataset => Map<string (get/set), string>\n// HTMLElement.dropzone => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.inert => boolean, reflected\n// HTMLElement.itemScope => boolean\n// HTMLElement.itemType => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemId => string\n// HTMLElement.itemRef => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemProp => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemValue => object\n// HTMLElement.properties => HTMLPropertiesCollection, readonly\n//# sourceMappingURL=HTMLElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Element, registerSubclass } from './Element';\nimport { SVG_NAMESPACE } from '../../transfer/TransferrableNodes';\nexport class SVGElement extends Element {\n    constructor(nodeType, localName, namespaceURI, ownerDocument) {\n        super(nodeType, localName, SVG_NAMESPACE, ownerDocument);\n        // Element uppercases its nodeName, but SVG elements don't.\n        this.nodeName = localName;\n    }\n}\nregisterSubclass('svg', SVGElement, SVG_NAMESPACE);\n//# sourceMappingURL=SVGElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLAnchorElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n    /**\n     * Returns the href property/attribute value\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/toString\n     * @return string href attached to HTMLAnchorElement\n     */\n    toString() {\n        return this.href;\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * A Synonym for the Node.textContent property setter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @param text replacement for all current childNodes.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('a', HTMLAnchorElement);\ndefinePropertyBackedAttributes(HTMLAnchorElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLAnchorElement, 'relList', 'rel');\n// Reflected properties, strings.\n// HTMLAnchorElement.href => string, reflected attribute\n// HTMLAnchorElement.hreflang => string, reflected attribute\n// HTMLAnchorElement.media => string, reflected attribute\n// HTMLAnchorElement.target => string, reflected attribute\n// HTMLAnchorElement.type => string, reflected attribute\nreflectProperties([{ href: [''] }, { hreflang: [''] }, { media: [''] }, { target: [''] }, { type: [''] }], HTMLAnchorElement);\n// Unimplemented\n// HTMLAnchorElement.download => string, reflected attribute\n// HTMLAnchorElement.type => Is a DOMString that reflects the type HTML attribute, indicating the MIME type of the linked resource.\n// Unimplemented URL parse of href attribute due to IE11 compatibility and low usage.\n// Note: Implementation doable using a private url property\n/*\n  class {\n    private url: URL | null = null;\n\n    constructor(...) {\n      // Element.getAttribute('href') => Element.href.\n      Object.assign(this[TransferrableKeys.propertyBackedAttributes], {\n        href: this.href,\n      });\n    }\n\n    get href(): string {\n      return this.url ? this.url.href : '';\n    }\n    set href(url: string) {\n      this.url = new URL(url);\n      this.setAttribute('href', this.url.href);\n    }\n  }\n*/\n// HTMLAnchorElement.host => string\n// HTMLAnchorElement.hostname => string\n// HTMLAnchorElement.protocol => string\n// HTMLAnchorElement.pathname => string\n// HTMLAnchorElement.search => string\n// HTMLAnchorElement.hash => string\n// HTMLAnchorElement.username => string\n// HTMLAnchorElement.password => string\n// HTMLAnchorElement.origin => string, readonly (getter no setter)\n//# sourceMappingURL=HTMLAnchorElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLButtonElement extends HTMLElement {\n}\nregisterSubclass('button', HTMLButtonElement);\n// Reflected properties, strings.\n// HTMLButtonElement.formAction => string, reflected attribute\n// HTMLButtonElement.formEnctype => string, reflected attribute\n// HTMLButtonElement.formMethod => string, reflected attribute\n// HTMLButtonElement.formTarget => string, reflected attribute\n// HTMLButtonElement.name => string, reflected attribute\n// HTMLButtonElement.type => string, reflected attribute (default submit)\n// HTMLButtonElement.value => string, reflected attribute\n// HTMLButtonElement.autofocus => boolean, reflected attribute\n// HTMLButtonElement.disabled => boolean, reflected attribute\nreflectProperties([\n    { formAction: [''] },\n    { formEnctype: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { name: [''] },\n    { type: ['submit'] },\n    { value: [''] },\n    { autofocus: [false] },\n    { disabled: [false] },\n], HTMLButtonElement);\n// Not reflected\n// HTMLButtonElement.formNoValidate => boolean\n// HTMLButtonElement.validity => ValidityState, readonly\n// Unimplemented\n// HTMLButtonElement.form => HTMLFormElement | null, readonly\n// HTMLButtonElement.labels => Array<HTMLLabelElement>, readonly\n// HTMLButtonElement.menu => HTMLMenuElement\n// HTMLButtonElement.willValidate => boolean, readonly\n// HTMLButtonElement.validationMessage => string, readonly\n//# sourceMappingURL=HTMLButtonElement.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nconst f32 = new Float32Array(1);\nconst u16 = new Uint16Array(f32.buffer);\nfunction isSmallInt(num) {\n    u16[0] = num;\n    // If the Uint16Array doesn't coerce it to another value, that means it fits\n    // into a Uint16Array.\n    return u16[0] === num;\n}\n/**\n * Serializes arguments into a Uint16 compatible format.\n *\n * The serialization format uses a variable length tuple, with the first item\n * being the encoded representation's type and any number of values afterwards.\n *\n * @param args The arguments to serialize\n */\nexport function serializeTransferrableObject(args) {\n    const serialized = [];\n    for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        if (typeof arg === 'number') {\n            if (isSmallInt(arg)) {\n                serialized.push(1 /* SmallInt */, arg);\n            }\n            else {\n                f32[0] = arg;\n                serialized.push(2 /* Float */, u16[0], u16[1]);\n            }\n            continue;\n        }\n        if (typeof arg === 'string') {\n            serialized.push(3 /* String */, store(arg));\n            continue;\n        }\n        if (Array.isArray(arg)) {\n            serialized.push(4 /* Array */, arg.length);\n            const serializedArray = serializeTransferrableObject(arg);\n            for (let i = 0; i < serializedArray.length; i++) {\n                serialized.push(serializedArray[i]);\n            }\n            continue;\n        }\n        if (typeof arg === 'object') {\n            const serializedObject = arg[68 /* serializeAsTransferrableObject */]();\n            for (let i = 0; i < serializedObject.length; i++) {\n                serialized.push(serializedObject[i]);\n            }\n            continue;\n        }\n        throw new Error('Cannot serialize argument.');\n    }\n    return serialized;\n}\n//# sourceMappingURL=serializeTransferrableObject.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { store } from '../strings';\n/**\n * Wrapper class for CanvasGradient. The user will be able to manipulate as a regular CanvasGradient object.\n */\nexport class CanvasGradient {\n    constructor(id, document) {\n        this.document = document;\n        this.id = id;\n    }\n    addColorStop(offset, color) {\n        transfer(this.document, [\n            9 /* OBJECT_MUTATION */,\n            store('addColorStop'),\n            2,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject([...arguments]),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasGradient.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Wrapper class for CanvasPattern. The user will be able to manipulate as a regular CanvasPattern object.\n * This class will be used when the CanvasRenderingContext is using an OffscreenCanvas polyfill.\n */\nexport class CanvasPattern {\n    constructor(id) {\n        this.id = id;\n    }\n    /**\n     * This is an experimental method.\n     */\n    setTransform() { }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { toLower } from '../../utils';\nimport { store } from '../strings';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { CanvasGradient } from './CanvasGradient';\nimport { CanvasPattern } from './CanvasPattern';\n/**\n * Handles calls to a CanvasRenderingContext2D object in cases where the user's environment does not\n * support native OffscreenCanvas.\n */\nexport class OffscreenCanvasPolyfill {\n    constructor(canvas) {\n        this.canvas = canvas;\n    }\n    getContext(contextType) {\n        if (!this.context) {\n            if (toLower(contextType) === '2d') {\n                this.context = new OffscreenCanvasRenderingContext2DPolyfill(this.canvas);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nclass OffscreenCanvasRenderingContext2DPolyfill {\n    constructor(canvas) {\n        this.objectIndex = 0;\n        this.canvasElement = canvas;\n        this.lineDash = [];\n    }\n    [67 /* mutated */](fnName, args) {\n        transfer(this.canvasElement.ownerDocument, [\n            9 /* OBJECT_MUTATION */,\n            store(fnName),\n            args.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(args),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [6 /* CanvasRenderingContext2D */, this.canvasElement[7 /* index */]];\n    }\n    /**\n     * Creates object in the main thread, and associates it with the id provided.\n     * @param objectId ID to associate the created object with.\n     * @param creationMethod Method to use for object creation.\n     * @param creationArgs Arguments to pass into the creation method.\n     */\n    createObjectReference(objectId, creationMethod, creationArgs) {\n        transfer(this.canvasElement.ownerDocument, [\n            10 /* OBJECT_CREATION */,\n            store(creationMethod),\n            objectId,\n            creationArgs.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(creationArgs),\n        ]);\n    }\n    get canvas() {\n        return this.canvasElement;\n    }\n    clearRect(x, y, w, h) {\n        this[67 /* mutated */]('clearRect', [...arguments]);\n    }\n    fillRect(x, y, w, h) {\n        this[67 /* mutated */]('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, w, h) {\n        this[67 /* mutated */]('strokeRect', [...arguments]);\n    }\n    set lineWidth(value) {\n        this[67 /* mutated */]('lineWidth', [...arguments]);\n    }\n    fillText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('fillText', [...arguments]);\n    }\n    moveTo(x, y) {\n        this[67 /* mutated */]('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this[67 /* mutated */]('lineTo', [...arguments]);\n    }\n    closePath() {\n        this[67 /* mutated */]('closePath', []);\n    }\n    stroke() {\n        this[67 /* mutated */]('stroke', []);\n    }\n    restore() {\n        this[67 /* mutated */]('restore', []);\n    }\n    save() {\n        this[67 /* mutated */]('save', []);\n    }\n    resetTransform() {\n        this[67 /* mutated */]('resetTransform', []);\n    }\n    rotate(angle) {\n        this[67 /* mutated */]('rotate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this[67 /* mutated */]('transform', [...arguments]);\n    }\n    translate(x, y) {\n        this[67 /* mutated */]('translate', [...arguments]);\n    }\n    scale(x, y) {\n        this[67 /* mutated */]('scale', [...arguments]);\n    }\n    set globalAlpha(value) {\n        this[67 /* mutated */]('globalAlpha', [...arguments]);\n    }\n    set globalCompositeOperation(value) {\n        this[67 /* mutated */]('globalCompositeOperation', [...arguments]);\n    }\n    set imageSmoothingQuality(value) {\n        this[67 /* mutated */]('imageSmoothingQuality', [...arguments]);\n    }\n    set fillStyle(value) {\n        this[67 /* mutated */]('fillStyle', [...arguments]);\n    }\n    set strokeStyle(value) {\n        this[67 /* mutated */]('strokeStyle', [...arguments]);\n    }\n    set shadowBlur(value) {\n        this[67 /* mutated */]('shadowBlur', [...arguments]);\n    }\n    set shadowColor(value) {\n        this[67 /* mutated */]('shadowColor', [...arguments]);\n    }\n    set shadowOffsetX(value) {\n        this[67 /* mutated */]('shadowOffsetX', [...arguments]);\n    }\n    set shadowOffsetY(value) {\n        this[67 /* mutated */]('shadowOffsetY', [...arguments]);\n    }\n    set filter(value) {\n        this[67 /* mutated */]('filter', [...arguments]);\n    }\n    beginPath() {\n        this[67 /* mutated */]('beginPath', []);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('strokeText', [...arguments]);\n    }\n    set textAlign(value) {\n        this[67 /* mutated */]('textAlign', [...arguments]);\n    }\n    set textBaseline(value) {\n        this[67 /* mutated */]('textBaseline', [...arguments]);\n    }\n    set lineCap(value) {\n        this[67 /* mutated */]('lineCap', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this[67 /* mutated */]('lineDashOffset', [...arguments]);\n    }\n    set lineJoin(value) {\n        this[67 /* mutated */]('lineJoin', [...arguments]);\n    }\n    set miterLimit(value) {\n        this[67 /* mutated */]('miterLimit', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this[67 /* mutated */]('arcTo', [...arguments]);\n    }\n    set direction(value) {\n        this[67 /* mutated */]('direction', [...arguments]);\n    }\n    set font(value) {\n        this[67 /* mutated */]('font', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('ellipse', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this[67 /* mutated */]('bezierCurveTo', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this[67 /* mutated */]('rect', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this[67 /* mutated */]('quadraticCurveTo', [...arguments]);\n    }\n    set imageSmoothingEnabled(value) {\n        this[67 /* mutated */]('imageSmoothingEnabled', [...arguments]);\n    }\n    setLineDash(lineDash) {\n        lineDash = [...lineDash];\n        if (lineDash.length % 2 !== 0) {\n            lineDash = lineDash.concat(lineDash);\n        }\n        this.lineDash = lineDash;\n        this[67 /* mutated */]('setLineDash', [...arguments]);\n    }\n    getLineDash() {\n        return [...this.lineDash];\n    }\n    clip(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('clip(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('clip', [...arguments]);\n    }\n    fill(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('fill(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('fill', [...arguments]);\n    }\n    // Method has a different signature in MDN than it does in HTML spec\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        if (typeof transformOrA === 'object') {\n            throw new Error('setTransform(DOMMatrix2DInit) is currently not supported!');\n        }\n        this[67 /* mutated */]('setTransform', [...arguments]);\n    }\n    createLinearGradient(x0, y0, x1, y1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createLinearGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createRadialGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createPattern(image, repetition) {\n        const patternId = this.objectIndex++;\n        this.createObjectReference(patternId, 'createPattern', [...arguments]);\n        return new CanvasPattern(patternId);\n    }\n    drawImage(image, dx, dy) {\n        this[67 /* mutated */]('drawImage', [...arguments]);\n    }\n    createImageData() {\n        return {};\n    }\n    getImageData() {\n        return {};\n    }\n    putImageData() { }\n    isPointInPath() {\n        throw new Error('isPointInPath is not implemented.');\n    }\n    isPointInStroke() {\n        throw new Error('isPointInStroke is not implemented.');\n    }\n    measureText() {\n        throw new Error('measureText is not implemented.');\n    }\n}\n//# sourceMappingURL=OffscreenCanvasPolyfill.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nlet indexTracker = 0;\nexport function retrieveImageBitmap(image, canvas) {\n    const callIndex = indexTracker++;\n    const document = canvas.ownerDocument;\n    return new Promise(resolve => {\n        const messageHandler = ({ data }) => {\n            if (data[12 /* type */] === 10 /* IMAGE_BITMAP_INSTANCE */ && data[73 /* callIndex */] === callIndex) {\n                document.removeGlobalEventListener('message', messageHandler);\n                const transferredImageBitmap = data[38 /* data */];\n                resolve(transferredImageBitmap);\n            }\n        };\n        if (!document.addGlobalEventListener) {\n            throw new Error('addGlobalEventListener is not defined.');\n        }\n        else {\n            document.addGlobalEventListener('message', messageHandler);\n            transfer(canvas.ownerDocument, [11 /* IMAGE_BITMAP_INSTANCE */, image[7 /* index */], callIndex]);\n        }\n    });\n}\n//# sourceMappingURL=canvas-utils.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { retrieveImageBitmap } from './canvas-utils';\n/**\n * Wraps CanvasPattern for usage in a native OffscreenCanvas case.\n */\nexport class FakeNativeCanvasPattern {\n    constructor() {\n        this[_a] = {};\n        this[_b] = false;\n    }\n    /**\n     * Retrieves ImageBitmap object from main-thread, which replicates the input image. Upon\n     * retrieval, uses it to create a real CanvasPattern and upgrade the implementation property.\n     * @param canvas Canvas element used to create the pattern.\n     * @param image Image to be used as the pattern's image\n     * @param repetition DOMStrings indicating how to repeat the pattern's image.\n     */\n    [(_a = 70 /* patternImplementation */, _b = 71 /* patternUpgraded */, 72 /* patternUpgradePromise */, 69 /* retrieveCanvasPattern */)](canvas, image, repetition) {\n        this[72 /* patternUpgradePromise */] = retrieveImageBitmap(image, canvas)\n            // Create new pattern with retrieved ImageBitmap\n            .then((instance) => {\n            const pattern = canvas.getContext('2d').createPattern(instance, repetition);\n            if (!pattern) {\n                throw new Error('Pattern is null!');\n            }\n            this[70 /* patternImplementation */] = pattern;\n            this[71 /* patternUpgraded */] = true;\n        });\n        return this[72 /* patternUpgradePromise */];\n    }\n    // This method is experimental.\n    // Takes an SVGMatrix as an argument, which is a deprecated API.\n    setTransform() { }\n}\n//# sourceMappingURL=FakeNativeCanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { OffscreenCanvasPolyfill } from './OffscreenCanvasPolyfill';\nimport { FakeNativeCanvasPattern } from './FakeNativeCanvasPattern';\nimport { retrieveImageBitmap } from './canvas-utils';\nexport const deferredUpgrades = new WeakMap();\n/**\n * Delegates all CanvasRenderingContext2D calls, either to an OffscreenCanvas or a polyfill\n * (depending on whether it is supported).\n */\nexport class CanvasRenderingContext2DShim {\n    constructor(canvas) {\n        this.queue = [];\n        this.upgraded = false;\n        // createPattern calls need to retrieve an ImageBitmap from the main-thread. Since those can\n        // happen subsequently, we must keep track of these to avoid reentrancy problems.\n        this.unresolvedCalls = 0;\n        this.canvasElement = canvas;\n        const OffscreenCanvas = canvas.ownerDocument.defaultView.OffscreenCanvas;\n        // If the browser does not support OffscreenCanvas, use polyfill\n        if (typeof OffscreenCanvas === 'undefined') {\n            this.implementation = new OffscreenCanvasPolyfill(canvas).getContext('2d');\n            this.upgraded = true;\n            this.polyfillUsed = true;\n        }\n        // If the browser supports OffscreenCanvas:\n        // 1. Use un-upgraded (not auto-synchronized) version for all calls performed immediately after\n        // creation. All calls will be queued to call on upgraded version after.\n        // 2. Retrieve an auto-synchronized OffscreenCanvas from the main-thread and call all methods\n        // in the queue.\n        else {\n            this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n            this.getOffscreenCanvasAsync(this.canvasElement);\n            this.polyfillUsed = false;\n        }\n    }\n    /**\n     * Retrieves auto-synchronized version of an OffscreenCanvas from the main-thread.\n     * @param canvas HTMLCanvasElement associated with this context.\n     */\n    getOffscreenCanvasAsync(canvas) {\n        this.unresolvedCalls++;\n        const deferred = {};\n        const document = this.canvasElement.ownerDocument;\n        const isTestMode = !document.addGlobalEventListener;\n        const upgradePromise = new Promise(resolve => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 9 /* OFFSCREEN_CANVAS_INSTANCE */ &&\n                    data[13 /* target */][0] === canvas[7 /* index */]) {\n                    document.removeGlobalEventListener('message', messageHandler);\n                    const transferredOffscreenCanvas = data[38 /* data */];\n                    resolve(transferredOffscreenCanvas);\n                }\n            };\n            if (!document.addGlobalEventListener) {\n                if (isTestMode) {\n                    deferred.resolve = resolve;\n                }\n                else {\n                    throw new Error('addGlobalEventListener is not defined.');\n                }\n            }\n            else {\n                document.addGlobalEventListener('message', messageHandler);\n                transfer(canvas.ownerDocument, [8 /* OFFSCREEN_CANVAS_INSTANCE */, canvas[7 /* index */]]);\n            }\n        }).then((instance) => {\n            this.goodImplementation = instance.getContext('2d');\n            this.maybeUpgradeImplementation();\n        });\n        if (isTestMode) {\n            deferred.upgradePromise = upgradePromise;\n            deferredUpgrades.set(canvas, deferred);\n        }\n        return upgradePromise;\n    }\n    /**\n     * Degrades the underlying context implementation and adds to the unresolved call count.\n     */\n    degradeImplementation() {\n        this.upgraded = false;\n        const OffscreenCanvas = this.canvasElement.ownerDocument.defaultView.OffscreenCanvas;\n        this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n        this.unresolvedCalls++;\n    }\n    /**\n     * Will upgrade the underlying context implementation if no more unresolved calls remain.\n     */\n    maybeUpgradeImplementation() {\n        this.unresolvedCalls--;\n        if (this.unresolvedCalls === 0) {\n            this.implementation = this.goodImplementation;\n            this.upgraded = true;\n            this.flushQueue();\n        }\n    }\n    flushQueue() {\n        for (const call of this.queue) {\n            if (call.isSetter) {\n                this[call.fnName] = call.args[0];\n            }\n            else {\n                this[call.fnName](...call.args);\n            }\n        }\n        this.queue.length = 0;\n    }\n    delegateFunc(name, args) {\n        const returnValue = this.implementation[name](...args);\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args, isSetter: false });\n        }\n        return returnValue;\n    }\n    delegateSetter(name, args) {\n        this.implementation[name] = args[0];\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args: args, isSetter: true });\n        }\n    }\n    delegateGetter(name) {\n        return this.implementation[name];\n    }\n    /* DRAWING RECTANGLES */\n    clearRect(x, y, width, height) {\n        this.delegateFunc('clearRect', [...arguments]);\n    }\n    fillRect(x, y, width, height) {\n        this.delegateFunc('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, width, height) {\n        this.delegateFunc('strokeRect', [...arguments]);\n    }\n    /* DRAWING TEXT */\n    fillText(text, x, y, maxWidth) {\n        this.delegateFunc('fillText', [...arguments]);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this.delegateFunc('strokeText', [...arguments]);\n    }\n    measureText(text) {\n        return this.delegateFunc('measureText', [...arguments]);\n    }\n    /* LINE STYLES */\n    set lineWidth(value) {\n        this.delegateSetter('lineWidth', [...arguments]);\n    }\n    get lineWidth() {\n        return this.delegateGetter('lineWidth');\n    }\n    set lineCap(value) {\n        this.delegateSetter('lineCap', [...arguments]);\n    }\n    get lineCap() {\n        return this.delegateGetter('lineCap');\n    }\n    set lineJoin(value) {\n        this.delegateSetter('lineJoin', [...arguments]);\n    }\n    get lineJoin() {\n        return this.delegateGetter('lineJoin');\n    }\n    set miterLimit(value) {\n        this.delegateSetter('miterLimit', [...arguments]);\n    }\n    get miterLimit() {\n        return this.delegateGetter('miterLimit');\n    }\n    getLineDash() {\n        return this.delegateFunc('getLineDash', [...arguments]);\n    }\n    setLineDash(segments) {\n        this.delegateFunc('setLineDash', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this.delegateSetter('lineDashOffset', [...arguments]);\n    }\n    get lineDashOffset() {\n        return this.delegateGetter('lineDashOffset');\n    }\n    /* TEXT STYLES */\n    set font(value) {\n        this.delegateSetter('font', [...arguments]);\n    }\n    get font() {\n        return this.delegateGetter('font');\n    }\n    set textAlign(value) {\n        this.delegateSetter('textAlign', [...arguments]);\n    }\n    get textAlign() {\n        return this.delegateGetter('textAlign');\n    }\n    set textBaseline(value) {\n        this.delegateSetter('textBaseline', [...arguments]);\n    }\n    get textBaseline() {\n        return this.delegateGetter('textBaseline');\n    }\n    set direction(value) {\n        this.delegateSetter('direction', [...arguments]);\n    }\n    get direction() {\n        return this.delegateGetter('direction');\n    }\n    /* FILL AND STROKE STYLES */\n    set fillStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' will be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({ fnName: 'fillStyle', args: [value], isSetter: true });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('fillStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('fillStyle', [...arguments]);\n        }\n    }\n    get fillStyle() {\n        return this.delegateGetter('fillStyle');\n    }\n    set strokeStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' could be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({ fnName: 'strokeStyle', args: [value], isSetter: true });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('strokeStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('strokeStyle', [...arguments]);\n        }\n    }\n    get strokeStyle() {\n        return this.delegateGetter('strokeStyle');\n    }\n    /* GRADIENTS AND PATTERNS */\n    createLinearGradient(x0, y0, x1, y1) {\n        return this.delegateFunc('createLinearGradient', [...arguments]);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        return this.delegateFunc('createRadialGradient', [...arguments]);\n    }\n    createPattern(image, repetition) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            return this.delegateFunc('createPattern', [...arguments]);\n        }\n        else {\n            // Degrade the underlying implementation because we don't want calls on the real one until\n            // after pattern is retrieved\n            this.degradeImplementation();\n            const fakePattern = new FakeNativeCanvasPattern();\n            fakePattern[69 /* retrieveCanvasPattern */](this.canvas, image, repetition).then(() => {\n                this.maybeUpgradeImplementation();\n            });\n            return fakePattern;\n        }\n    }\n    /* DRAWING IMAGES */\n    drawImage(image, dx, dy) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            this.delegateFunc('drawImage', [...arguments]);\n        }\n        else {\n            // Queue the drawImage call to make sure it gets called in correct order\n            const args = [];\n            this.queue.push({ fnName: 'drawImage', args, isSetter: false });\n            // Degrade the underlying implementation because we don't want calls on the real one\n            // until after the ImageBitmap is received.\n            this.degradeImplementation();\n            // Retrieve an ImageBitmap from the main-thread with the same image as the input image\n            retrieveImageBitmap(image, this.canvas)\n                // Then call the actual method with the retrieved ImageBitmap\n                .then((instance) => {\n                args.push(instance, dx, dy);\n                this.maybeUpgradeImplementation();\n            });\n        }\n    }\n    /* SHADOWS */\n    set shadowBlur(value) {\n        this.delegateSetter('shadowBlur', [...arguments]);\n    }\n    get shadowBlur() {\n        return this.delegateGetter('shadowBlur');\n    }\n    set shadowColor(value) {\n        this.delegateSetter('shadowColor', [...arguments]);\n    }\n    get shadowColor() {\n        return this.delegateGetter('shadowColor');\n    }\n    set shadowOffsetX(value) {\n        this.delegateSetter('shadowOffsetX', [...arguments]);\n    }\n    get shadowOffsetX() {\n        return this.delegateGetter('shadowOffsetX');\n    }\n    set shadowOffsetY(value) {\n        this.delegateSetter('shadowOffsetY', [...arguments]);\n    }\n    get shadowOffsetY() {\n        return this.delegateGetter('shadowOffsetY');\n    }\n    /* PATHS */\n    beginPath() {\n        this.delegateFunc('beginPath', [...arguments]);\n    }\n    closePath() {\n        this.delegateFunc('closePath', [...arguments]);\n    }\n    moveTo(x, y) {\n        this.delegateFunc('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this.delegateFunc('lineTo', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.delegateFunc('bezierCurveTo', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this.delegateFunc('quadraticCurveTo', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this.delegateFunc('arcTo', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('ellipse', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this.delegateFunc('rect', [...arguments]);\n    }\n    /* DRAWING PATHS */\n    fill(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('fill', args);\n    }\n    stroke(path) {\n        const args = [...arguments];\n        this.delegateFunc('stroke', args);\n    }\n    clip(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('clip', args);\n    }\n    isPointInPath(pathOrX, xOrY, yOrFillRule, fillRule) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInPath', args);\n    }\n    isPointInStroke(pathOrX, xOrY, y) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInStroke', args);\n    }\n    /* TRANSFORMATIONS */\n    rotate(angle) {\n        this.delegateFunc('rotate', [...arguments]);\n    }\n    scale(x, y) {\n        this.delegateFunc('scale', [...arguments]);\n    }\n    translate(x, y) {\n        this.delegateFunc('translate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this.delegateFunc('transform', [...arguments]);\n    }\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        const args = [...arguments];\n        this.delegateFunc('setTransform', args);\n    }\n    /* experimental */ resetTransform() {\n        this.delegateFunc('resetTransform', [...arguments]);\n    }\n    /* COMPOSITING */\n    set globalAlpha(value) {\n        this.delegateSetter('globalAlpha', [...arguments]);\n    }\n    get globalAlpha() {\n        return this.delegateGetter('globalAlpha');\n    }\n    set globalCompositeOperation(value) {\n        this.delegateSetter('globalCompositeOperation', [...arguments]);\n    }\n    get globalCompositeOperation() {\n        return this.delegateGetter('globalCompositeOperation');\n    }\n    /* PIXEL MANIPULATION */\n    createImageData(imagedataOrWidth, height) {\n        const args = [...arguments];\n        return this.delegateFunc('createImageData', args);\n    }\n    getImageData(sx, sy, sw, sh) {\n        return this.delegateFunc('getImageData', [...arguments]);\n    }\n    putImageData(imageData, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight) {\n        this.delegateFunc('putImageData', [...arguments]);\n    }\n    /* IMAGE SMOOTHING */\n    /* experimental */ set imageSmoothingEnabled(value) {\n        this.delegateSetter('imageSmoothingEnabled', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingEnabled() {\n        return this.delegateGetter('imageSmoothingEnabled');\n    }\n    /* experimental */ set imageSmoothingQuality(value) {\n        this.delegateSetter('imageSmoothingQuality', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingQuality() {\n        return this.delegateGetter('imageSmoothingQuality');\n    }\n    /* THE CANVAS STATE */\n    save() {\n        this.delegateFunc('save', [...arguments]);\n    }\n    restore() {\n        this.delegateFunc('restore', [...arguments]);\n    }\n    // canvas property is readonly. We don't want to implement getters, but this must be here\n    // in order for TypeScript to not complain (for now)\n    get canvas() {\n        return this.canvasElement;\n    }\n    /* FILTERS */\n    /* experimental */ set filter(value) {\n        this.delegateSetter('filter', [...arguments]);\n    }\n    /* experimental */ get filter() {\n        return this.delegateGetter('filter');\n    }\n}\n//# sourceMappingURL=CanvasRenderingContext2D.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { HTMLElement } from './HTMLElement';\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { CanvasRenderingContext2DShim } from '../canvas/CanvasRenderingContext2D';\nexport class HTMLCanvasElement extends HTMLElement {\n    getContext(contextType) {\n        if (!this.context) {\n            if (contextType === '2D' || contextType === '2d') {\n                this.context = new CanvasRenderingContext2DShim(this);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nregisterSubclass('canvas', HTMLCanvasElement);\n// Reflected Properties\n// HTMLCanvasElement.height => number, reflected attribute\n// HTMLCanvasElement.width => number, reflected attribute\nreflectProperties([{ height: [0] }, { width: [0] }], HTMLCanvasElement);\n// Unimplemented Properties\n// HTMLCanvasElement.mozOpaque => boolean\n// HTMLCanvasElement.mozPrintCallback => function\n// Unimplemented Methods\n// HTMLCanvasElement.captureStream()\n// HTMLCanvasElement.toDataURL()\n// HTMLCanvasElement.toBlob()\n// HTMLCanvasElement.transferControlToOffscreen()\n// HTMLCanvasElement.mozGetAsFile()\n//# sourceMappingURL=HTMLCanvasElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLDataElement extends HTMLElement {\n}\nregisterSubclass('data', HTMLDataElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.value => string, reflected attribute\nreflectProperties([{ value: [''] }], HTMLDataElement);\n//# sourceMappingURL=HTMLDataElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLEmbedElement extends HTMLElement {\n}\nregisterSubclass('embed', HTMLEmbedElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.height => string, reflected attribute\n// HTMLEmbedElement.src => string, reflected attribute\n// HTMLEmbedElement.type => string, reflected attribute\n// HTMLEmbedElement.width => string, reflected attribute\nreflectProperties([{ height: [''] }, { src: [''] }, { type: [''] }, { width: [''] }], HTMLEmbedElement);\n// Unimplemented\n// HTMLEmbedElement.align => string, not reflected\n// HTMLEmbedElement.name => string, not reflected\n//# sourceMappingURL=HTMLEmbedElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nconst MATCHING_CHILD_ELEMENT_TAGNAMES = 'BUTTON FIELDSET INPUT OBJECT OUTPUT SELECT TEXTAREA'.split(' ');\n/**\n * The HTMLFormControlsCollection interface represents a collection of HTML form control elements.\n * It is mixedin to both HTMLFormElement and HTMLFieldSetElement.\n */\nexport const HTMLFormControlsCollectionMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'elements', {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection\n         * @return Element array matching children of specific tagnames.\n         */\n        get() {\n            return matchChildrenElements(this, tagNameConditionPredicate(MATCHING_CHILD_ELEMENT_TAGNAMES));\n        },\n    });\n};\n//# sourceMappingURL=HTMLFormControlsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { HTMLElement } from './HTMLElement';\nimport { toLower } from '../../utils';\nexport class HTMLFieldSetElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return hardcoded string 'fieldset'\n     */\n    get type() {\n        return toLower(this.tagName);\n    }\n}\nregisterSubclass('fieldset', HTMLFieldSetElement);\nHTMLFormControlsCollectionMixin(HTMLFieldSetElement);\n// Reflected properties\n// HTMLFieldSetElement.name => string, reflected attribute\n// HTMLFieldSetElement.disabled => boolean, reflected attribute\nreflectProperties([{ name: [''] }, { disabled: [false] }], HTMLFieldSetElement);\n// Unimplemented properties\n// HTMLFieldSetElement.validity\n// HTMLFieldSetElement.willValidate\n// HTMLFieldSetElement.validationMessage\n//# sourceMappingURL=HTMLFieldSetElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLFormElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.elements.length;\n    }\n}\nregisterSubclass('form', HTMLFormElement);\nHTMLFormControlsCollectionMixin(HTMLFormElement);\n// Reflected properties\n// HTMLFormElement.name => string, reflected attribute\n// HTMLFormElement.method => string, reflected attribute\n// HTMLFormElement.target => string, reflected attribute\n// HTMLFormElement.action => string, reflected attribute\n// HTMLFormElement.enctype => string, reflected attribute\n// HTMLFormElement.acceptCharset => string, reflected attribute\n// HTMLFormElement.autocomplete => string, reflected attribute\n// HTMLFormElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { name: [''] },\n    { method: ['get'] },\n    { target: [''] },\n    { action: [''] },\n    { enctype: ['application/x-www-form-urlencoded'] },\n    { acceptCharset: ['', /* attr */ 'accept-charset'] },\n    { autocomplete: ['on'] },\n    { autocapitalize: ['sentences'] },\n], HTMLFormElement);\n// Unimplemented properties\n// HTMLFormElement.encoding => string, reflected attribute\n// HTMLFormElement.noValidate => boolean, reflected attribute\n/*\nUnimplemented, TBD:\n\nNamed inputs are added to their owner form instance as properties, and can overwrite native properties\nif they share the same name (eg a form with an input named action will have its action property return\nthat input instead of the form's action HTML attribute).\n*/\n//# sourceMappingURL=HTMLFormElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nexport class HTMLIFrameElement extends HTMLElement {\n    // HTMLIFrameElement.sandbox, DOMTokenList, reflected attribute\n    get sandbox() {\n        return this._sandbox || (this._sandbox = new DOMTokenList(this, 'sandbox'));\n    }\n}\nregisterSubclass('iframe', HTMLIFrameElement);\ndefinePropertyBackedAttributes(HTMLIFrameElement, {\n    sandbox: [(el) => el.sandbox.value, (el, value) => (el.sandbox.value = value)],\n});\n// Reflected properties\n// HTMLIFrameElement.allow => string, reflected attribute\n// HTMLIFrameElement.allowFullscreen => boolean, reflected attribute\n// HTMLIFrameElement.csp => string, reflected attribute\n// HTMLIFrameElement.height => string, reflected attribute\n// HTMLIFrameElement.name => string, reflected attribute\n// HTMLIFrameElement.referrerPolicy => string, reflected attribute\n// HTMLIFrameElement.src => string, reflected attribute\n// HTMLIFrameElement.srcdoc => string, reflected attribute\n// HTMLIFrameElement.width => string, reflected attribute\nreflectProperties([\n    { allow: [''] },\n    { allowFullscreen: [false] },\n    { csp: [''] },\n    { height: [''] },\n    { name: [''] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { srcdoc: [''] },\n    { width: [''] },\n], HTMLIFrameElement);\n// Unimplemented Properties\n// HTMLIFrameElement.allowPaymentRequest => boolean, reflected attribute\n// HTMLIFrameElement.contentDocument => Document, read only (active document in the inline frame's nested browsing context)\n// HTMLIFrameElement.contentWindow => WindowProxy, read only (window proxy for the nested browsing context)\n//# sourceMappingURL=HTMLIFrameElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLImageElement extends HTMLElement {\n}\nregisterSubclass('img', HTMLImageElement);\n// Reflected Properties\n// HTMLImageElement.alt => string, reflected attribute\n// HTMLImageElement.crossOrigin => string, reflected attribute\n// HTMLImageElement.height => number, reflected attribute\n// HTMLImageElement.isMap => boolean, reflected attribute\n// HTMLImageElement.referrerPolicy => string, reflected attribute\n// HTMLImageElement.src => string, reflected attribute\n// HTMLImageElement.sizes => string, reflected attribute\n// HTMLImageElement.srcset => string, reflected attribute\n// HTMLImageElement.useMap => string, reflected attribute\n// HTMLImageElement.width => number, reflected attribute\nreflectProperties([\n    { alt: [''] },\n    { crossOrigin: [''] },\n    { height: [0] },\n    { isMap: [false] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { sizes: [''] },\n    { srcset: [''] },\n    { useMap: [''] },\n    { width: [0] },\n], HTMLImageElement);\n// Unimplmented Properties\n// HTMLImageElement.complete Read only\n// Returns a Boolean that is true if the browser has finished fetching the image, whether successful or not. It also shows true, if the image has no src value.\n// HTMLImageElement.currentSrc Read only\n// Returns a DOMString representing the URL to the currently displayed image (which may change, for example in response to media queries).\n// HTMLImageElement.naturalHeight Read only\n// Returns a unsigned long representing the intrinsic height of the image in CSS pixels, if it is available; else, it shows 0.\n// HTMLImageElement.naturalWidth Read only\n// Returns a unsigned long representing the intrinsic width of the image in CSS pixels, if it is available; otherwise, it will show 0.\n//# sourceMappingURL=HTMLImageElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements } from './matchElements';\n/**\n * The HTMLInputLabels interface represents a collection of input getters for their related label Elements.\n * It is mixedin to both HTMLInputElement, HTMLMeterElement, and HTMLProgressElement.\n */\nexport const HTMLInputLabelsMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'labels', {\n        /**\n         * Getter returning label elements associated to this meter.\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLProgressElement/labels\n         * @return label elements associated to this meter.\n         */\n        get() {\n            return matchChildrenElements(this.ownerDocument || this, element => element.tagName === 'LABEL' && element.for && element.for === this.id);\n        },\n    });\n};\n//# sourceMappingURL=HTMLInputLabelsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { reflectProperties } from './enhanceElement';\nimport { registerSubclass } from './Element';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nexport class HTMLInputElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        // Per spec, some attributes like 'value' and 'checked' change behavior based on dirty flags.\n        // Since these flags can only be changed on interaction (outside of worker), we can ignore them here.\n        // Tradeoffs: Consequent attribute changes are missing, HTMLFormElement.reset() doesn't work, etc.\n        // Alternative: Implement dirty flag checking in worker-dom, which would require listening for\n        //     and forwarding interaction events to flag \"dirtiness\".\n        // https://html.spec.whatwg.org/multipage/input.html#common-input-element-apis\n        this[_a] = '';\n        this[_b] = false;\n    }\n    // TODO(willchou): There are a few interrelated issues with `value` property.\n    //   1. \"Dirtiness\" caveat above.\n    //   2. Duplicate SYNC events. Sent by every event fired from elements with a `value`, plus the default 'change' listener.\n    //   3. Duplicate MUTATE events. Caused by stale `value` in worker due to no default 'input' listener (see below).\n    get value() {\n        return this[21 /* value */];\n    }\n    set value(value) {\n        // Don't early-out if value doesn't appear to have changed.\n        // The worker may have a stale value since 'input' events aren't being forwarded.\n        this[21 /* value */] = String(value);\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('value'),\n            0 /* FALSE */,\n            storeString(value),\n        ]);\n    }\n    get valueAsDate() {\n        // Don't use Date constructor or Date.parse() since ISO 8601 (yyyy-mm-dd) parsing is inconsistent.\n        const date = this.stringToDate(this[21 /* value */]);\n        const invalid = !date || isNaN(date.getTime());\n        return invalid ? null : date;\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support dates. */\n    set valueAsDate(value) {\n        if (!(value instanceof Date)) {\n            throw new TypeError('The provided value is not a Date.');\n        }\n        this.value = this.dateToString(value);\n    }\n    get valueAsNumber() {\n        if (this[21 /* value */].length === 0) {\n            return NaN;\n        }\n        return Number(this[21 /* value */]);\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support numbers. */\n    set valueAsNumber(value) {\n        if (typeof value === 'number') {\n            this.value = String(value);\n        }\n        else {\n            this.value = '';\n        }\n    }\n    get checked() {\n        return this[47 /* checked */];\n    }\n    set checked(value) {\n        if (this[47 /* checked */] === value) {\n            return;\n        }\n        this[47 /* checked */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('checked'),\n            1 /* TRUE */,\n            value === true ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * Returns a date in 'yyyy-mm-dd' format.\n     * @param date\n     */\n    dateToString(date) {\n        const y = date.getFullYear();\n        const m = date.getMonth() + 1; // getMonth() is 0-index.\n        const d = date.getDate();\n        return `${y}-${m > 9 ? '' : '0'}${m}-${d > 9 ? '' : '0'}${d}`;\n    }\n    /**\n     * Returns a Date from a 'yyyy-mm-dd' format.\n     * @param s\n     */\n    stringToDate(str) {\n        const components = str.split('-');\n        if (components.length !== 3) {\n            return null;\n        }\n        const [y, m, d] = components;\n        // Month is 0-index.\n        return new Date(parseInt(y, 10), parseInt(m, 10) - 1, parseInt(d, 10));\n    }\n}\n_a = 21 /* value */, _b = 47 /* checked */;\nregisterSubclass('input', HTMLInputElement);\nHTMLInputLabelsMixin(HTMLInputElement);\n// Reflected Properties\n// HTMLInputElement.formAction => string, reflected attribute\n// HTMLInputElement.formEncType\t=> string, reflected attribute\n// HTMLInputElement.formMethod => string, reflected attribute\n// HTMLInputElement.formTarget => string, reflected attribute\n// HTMLInputElement.name => string, reflected attribute\n// HTMLInputElement.type => string, reflected attribute\n// HTMLInputElement.disabled => boolean, reflected attribute\n// HTMLInputElement.autofocus => boolean, reflected attribute\n// HTMLInputElement.required => boolean, reflected attribute\n// HTMLInputElement.defaultChecked => boolean, reflected attribute (\"checked\")\n// HTMLInputElement.alt => string, reflected attribute\n// HTMLInputElement.height => number, reflected attribute\n// HTMLInputElement.src => string, reflected attribute\n// HTMLInputElement.width => number, reflected attribute\n// HTMLInputElement.accept => string, reflected attribute\n// HTMLInputElement.autocomplete => string, reflected attribute\n// HTMLInputElement.maxLength => number, reflected attribute\n// HTMLInputElement.size => number, reflected attribute\n// HTMLInputElement.pattern => string, reflected attribute\n// HTMLInputElement.placeholder => string, reflected attribute\n// HTMLInputElement.readOnly => boolean, reflected attribute\n// HTMLInputElement.min => string, reflected attribute\n// HTMLInputElement.max => string, reflected attribute\n// HTMLInputElement.defaultValue => string, reflected attribute\n// HTMLInputElement.dirname => string, reflected attribute\n// HTMLInputElement.multiple => boolean, reflected attribute\n// HTMLInputElement.step => string, reflected attribute\n// HTMLInputElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { accept: [''] },\n    { alt: [''] },\n    { autocapitalize: [''] },\n    { autocomplete: [''] },\n    { autofocus: [false] },\n    { defaultChecked: [false, /* attr */ 'checked'] },\n    { defaultValue: ['', /* attr */ 'value'] },\n    { dirName: [''] },\n    { disabled: [false] },\n    { formAction: [''] },\n    { formEncType: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { height: [0] },\n    { max: [''] },\n    { maxLength: [0] },\n    { min: [''] },\n    { multiple: [false] },\n    { name: [''] },\n    { pattern: [''] },\n    { placeholder: [''] },\n    { readOnly: [false] },\n    { required: [false] },\n    { size: [0] },\n    { src: [''] },\n    { step: [''] },\n    { type: ['text'] },\n    { width: [0] },\n], HTMLInputElement);\n// TODO(KB) Not Reflected Properties\n// HTMLInputElement.indeterminate => boolean\n// Unimplemented Properties\n// HTMLInputElement.formNoValidate => string, reflected attribute\n// HTMLInputElement.validity => ValidityState, readonly\n// HTMLInputElement.validationMessage => string, readonly\n// HTMLInputElement.willValidate => boolean, readonly\n// HTMLInputElement.allowdirs => boolean\n// HTMLInputElement.files\t=> Array<File>\n// HTMLInputElement.webkitdirectory\t=> boolean, reflected attribute\n// HTMLInputElement.webkitEntries => Array<FileSystemEntry>\n// HTMLInputElement.selectionStart => number\n// HTMLInputElement.selectionEnd => number\n// HTMLInputElement.selectionDirection => string\n// HTMLInputElement.list => Element, read only (element pointed by list attribute)\n// Unimplemented Methods\n// HTMLInputElement.setSelectionRange()\n// HTMLInputElement.setRangeText()\n// HTMLInputElement.setCustomValidity()\n// HTMLInputElement.checkValidity()\n// HTMLInputElement.stepDown()\n// HTMLInputElement.stepUp()\n//# sourceMappingURL=HTMLInputElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildElement, tagNameConditionPredicate } from './matchElements';\nexport class HTMLLabelElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control\n     * @return input element\n     */\n    get control() {\n        const htmlFor = this.getAttribute('for');\n        if (htmlFor !== null) {\n            return this.ownerDocument && this.ownerDocument.getElementById(htmlFor);\n        }\n        return matchChildElement(this, tagNameConditionPredicate(['INPUT']));\n    }\n}\nregisterSubclass('label', HTMLLabelElement);\n// Reflected Properties\n// HTMLLabelElement.htmlFor => string, reflected attribute 'for'\nreflectProperties([{ htmlFor: ['', 'for'] }], HTMLLabelElement);\n//# sourceMappingURL=HTMLLabelElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nexport class HTMLLinkElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n}\nregisterSubclass('link', HTMLLinkElement);\ndefinePropertyBackedAttributes(HTMLLinkElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLLinkElement, 'relList', 'rel');\n// Reflected Properties\n// HTMLLinkElement.as => string, reflected attribute\n// HTMLLinkElement.crossOrigin => string, reflected attribute\n// HTMLLinkElement.disabled => boolean, reflected attribute\n// HTMLLinkElement.href => string, reflected attribute\n// HTMLLinkElement.hreflang => string, reflected attribute\n// HTMLLinkElement.media => string, reflected attribute\n// HTMLLinkElement.referrerPolicy => string, reflected attribute\n// HTMLLinkElement.sizes => string, reflected attribute\n// HTMLLinkElement.type => string, reflected attribute\nreflectProperties([\n    { as: [''] },\n    { crossOrigin: [''] },\n    { disabled: [false] },\n    { href: [''] },\n    { hreflang: [''] },\n    { media: [''] },\n    { referrerPolicy: [''] },\n    { sizes: [''] },\n    { type: [''] },\n], HTMLLinkElement);\n// Unimplemented Properties\n// LinkStyle.sheet Read only\n// Returns the StyleSheet object associated with the given element, or null if there is none.\n//# sourceMappingURL=HTMLLinkElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildrenElements } from './matchElements';\nexport class HTMLMapElement extends HTMLElement {\n    /**\n     * Getter returning area elements associated to this map.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\n     * @return area elements associated to this map.\n     */\n    get areas() {\n        return matchChildrenElements(this, element => element.tagName === 'AREA');\n    }\n}\nregisterSubclass('map', HTMLMapElement);\n// Reflected Properties\n// HTMLMapElement.name => string, reflected attribute\nreflectProperties([{ name: [''] }], HTMLMapElement);\n//# sourceMappingURL=HTMLMapElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLMeterElement extends HTMLElement {\n}\nregisterSubclass('meter', HTMLMeterElement);\nHTMLInputLabelsMixin(HTMLMeterElement);\n// Reflected Properties\n// HTMLMeterElement.high => number, reflected attribute\n// HTMLMeterElement.low => number, reflected attribute\n// HTMLMeterElement.max => number, reflected attribute\n// HTMLMeterElement.min => number, reflected attribute\n// HTMLMeterElement.optimum => number, reflected attribute\n// HTMLMeterElement.value => number, reflected attribute\nreflectProperties([{ high: [0] }, { low: [0] }, { max: [1] }, { min: [0] }, { optimum: [0] }, { value: [0] }], HTMLMeterElement);\n//# sourceMappingURL=HTMLMeterElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLModElement extends HTMLElement {\n}\nregisterSubclass('del', HTMLModElement);\nregisterSubclass('ins', HTMLModElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\n// HTMLModElement.datetime => string, reflected attribute\nreflectProperties([{ cite: [''] }, { datetime: [''] }], HTMLModElement);\n//# sourceMappingURL=HTMLModElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLOListElement extends HTMLElement {\n}\nregisterSubclass('ol', HTMLOListElement);\n// Reflected Properties\n// HTMLModElement.reversed => boolean, reflected attribute\n// HTMLModElement.start => number, reflected attribute\n// HTMLOListElement.type => string, reflected attribute\nreflectProperties([{ reversed: [false] }, { start: [1] }, { type: [''] }], HTMLOListElement);\n//# sourceMappingURL=HTMLOListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { transfer } from '../MutationTransfer';\nimport { store as storeString } from '../strings';\nexport class HTMLOptionElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return position of the option within the list of options it's within, or zero if there is no valid parent.\n     */\n    get index() {\n        return (this.parentNode && this.parentNode.children.indexOf(this)) || 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return label attribute value or text content if there is no attribute.\n     */\n    get label() {\n        return this.getAttribute('label') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param label new label value to store as an attribute.\n     */\n    set label(label) {\n        this.setAttribute('label', label);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return boolean based on if the option element is selected.\n     */\n    get selected() {\n        return this[52 /* selected */];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new selected boolean value.\n     */\n    set selected(value) {\n        this[52 /* selected */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('selected'),\n            1 /* TRUE */,\n            this[52 /* selected */] ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value attribute value or text content if there is no attribute.\n     */\n    get value() {\n        return this.getAttribute('value') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new value for an option element.\n     */\n    set value(value) {\n        this.setAttribute('value', value);\n    }\n}\n_a = 52 /* selected */;\nregisterSubclass('option', HTMLOptionElement);\ndefinePropertyBackedAttributes(HTMLOptionElement, {\n    selected: [(el) => String(el[52 /* selected */]), (el, value) => (el.selected = value === 'true')],\n});\n// Reflected Properties\n// HTMLOptionElement.defaultSelected => boolean, reflected attribute\n// HTMLOptionElement.disabled => boolean, reflected attribute\n// HTMLOptionElement.type => string, reflected attribute\nreflectProperties([{ defaultSelected: [false, /* attr */ 'selected'] }, { disabled: [false] }, { type: [''] }], HTMLOptionElement);\n// Implemented at HTMLElement\n// HTMLOptionElement.form, Read only\t=> HTMLFormElement\n//# sourceMappingURL=HTMLOptionElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLProgressElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = true;\n        this[_b] = 0;\n    }\n    get position() {\n        return this[48 /* indeterminate */] ? -1 : this[21 /* value */] / this.max;\n    }\n    get value() {\n        return this[21 /* value */];\n    }\n    set value(value) {\n        this[48 /* indeterminate */] = false;\n        this[21 /* value */] = value;\n        // TODO(KB) This is a property mutation needing tracked.\n    }\n}\n_a = 48 /* indeterminate */, _b = 21 /* value */;\nregisterSubclass('progress', HTMLProgressElement);\nHTMLInputLabelsMixin(HTMLProgressElement);\n// Reflected Properties\n// HTMLModElement.max => number, reflected attribute\nreflectProperties([{ max: [1] }], HTMLProgressElement);\n//# sourceMappingURL=HTMLProgressElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLQuoteElement extends HTMLElement {\n}\nregisterSubclass('blockquote', HTMLQuoteElement);\nregisterSubclass('q', HTMLQuoteElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\nreflectProperties([{ cite: [''] }], HTMLQuoteElement);\n//# sourceMappingURL=HTMLQuoteElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLScriptElement extends HTMLElement {\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('script', HTMLScriptElement);\n// Reflected Properties\n// HTMLScriptElement.type => string, reflected attribute\n// HTMLScriptElement.src => string, reflected attribute\n// HTMLScriptElement.charset => string, reflected attribute\n// HTMLScriptElement.async => boolean, reflected attribute\n// HTMLScriptElement.defer => boolean, reflected attribute\n// HTMLScriptElement.crossOrigin => string, reflected attribute\n// HTMLScriptElement.noModule => boolean, reflected attribute\nreflectProperties([{ type: [''] }, { src: [''] }, { charset: [''] }, { async: [false] }, { defer: [false] }, { crossOrigin: [''] }, { noModule: [false] }], HTMLScriptElement);\n//# sourceMappingURL=HTMLScriptElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { matchChildrenElements, matchChildElement, tagNameConditionPredicate } from './matchElements';\nconst isOptionPredicate = tagNameConditionPredicate(['OPTION']);\nconst isSelectedOptionPredicate = (element) => isOptionPredicate(element) && element.selected === true;\nexport class HTMLSelectElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = -1 /* UNMODIFIED */;\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [(_a = 49 /* size */, 56 /* insertedNode */)](child) {\n        super[56 /* insertedNode */](child);\n        // When this singular value select is appending a child, set the value property for two cases.\n        // 1. The inserted child is already selected.\n        // 2. The current value of the select is the default ('').\n        if ((!this.multiple && (isOptionPredicate(child) && child.selected)) || this.value === '') {\n            this.value = child.value;\n        }\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        super[57 /* removedNode */](child);\n        // When this singular value select is removing a selected child\n        // ... set the value property to the first valid option.\n        if (!this.multiple && child.selected) {\n            const options = this.options;\n            if (options.length > 0) {\n                this.value = options[0].value;\n            }\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.options.length;\n    }\n    /**\n     * Getter returning option elements that are direct children of a HTMLSelectElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.children.filter(isOptionPredicate);\n    }\n    /**\n     * Getter returning the index of the first selected <option> element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @return the index of the first selected option element, or -1 if no element is selected.\n     */\n    get selectedIndex() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? this.children.indexOf(firstSelectedChild) : -1;\n    }\n    /**\n     * Setter making the <option> element at the passed index selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @param selectedIndex index number to make selected.\n     */\n    set selectedIndex(selectedIndex) {\n        this.children.forEach((element, index) => (element.selected = index === selectedIndex));\n    }\n    /**\n     * Getter returning the <option> elements selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedOptions\n     * @return array of Elements currently selected.\n     */\n    get selectedOptions() {\n        return matchChildrenElements(this, isSelectedOptionPredicate);\n    }\n    /**\n     * Getter returning the size of the select element (by default 1 for single and 4 for multiple)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return size of the select element.\n     */\n    get size() {\n        return this[49 /* size */] === -1 /* UNMODIFIED */\n            ? this.multiple\n                ? 4 /* MULTIPLE */\n                : 1 /* SINGLE */\n            : this[49 /* size */];\n    }\n    /**\n     * Override the size of this element (each positive unit is the height of a single option)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @param size number to set the size to.\n     */\n    set size(size) {\n        this[49 /* size */] = size > 0 ? size : this.multiple ? 4 /* MULTIPLE */ : 1 /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return string representing the select element type.\n     */\n    get type() {\n        return this.multiple ? \"select-one\" /* MULTIPLE */ : \"select-multiple\" /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return the value of the first selected option\n     */\n    get value() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? firstSelectedChild.value : '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @set value\n     */\n    set value(value) {\n        const stringValue = String(value);\n        this.children.forEach((element) => isOptionPredicate(element) && (element.selected = element.value === stringValue));\n    }\n}\nregisterSubclass('select', HTMLSelectElement);\nHTMLInputLabelsMixin(HTMLSelectElement);\n// Reflected Properties\n// HTMLSelectElement.multiple => boolean, reflected attribute\n// HTMLSelectElement.name => string, reflected attribute\n// HTMLSelectElement.required => boolean, reflected attribute\nreflectProperties([{ multiple: [false] }, { name: [''] }, { required: [false] }], HTMLSelectElement);\n// Implemented on HTMLElement\n// HTMLSelectElement.form => HTMLFormElement, readonly\n// Unimplemented Properties\n// HTMLSelectElement.validation => string\n// HTMLSelectElement.validity => ValidityState\n// HTMLSelectElement.willValidate => boolean\n//# sourceMappingURL=HTMLSelectElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLSourceElement extends HTMLElement {\n}\nregisterSubclass('source', HTMLSourceElement);\n// Reflected Properties\n// HTMLSourceElement.media => string, reflected attribute\n// HTMLSourceElement.sizes => string, reflected attribute\n// HTMLSourceElement.src => string, reflected attribute\n// HTMLSourceElement.srcset => string, reflected attribute\n// HTMLSourceElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { sizes: [''] }, { src: [''] }, { srcset: [''] }, { type: [''] }], HTMLSourceElement);\n// Unimplemented Properties\n// HTMLSourceElement.keySystem => string\n//# sourceMappingURL=HTMLSourceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLStyleElement extends HTMLElement {\n}\nregisterSubclass('style', HTMLStyleElement);\n// Reflected Properties\n// HTMLStyleElement.media => string, reflected attribute\n// HTMLStyleElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { type: [''] }], HTMLStyleElement);\n// Unimplemented Properties\n// HTMLStyleElement.disabled => boolean\n// HTMLStyleElement.scoped => boolean, reflected attribute\n// HTMLStyleElement.sheet => StyleSheet, read only\n//# sourceMappingURL=HTMLStyleElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableCellElement extends HTMLElement {\n    get headers() {\n        return this._headers || (this._headers = new DOMTokenList(this, 'headers'));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableCellElement\n     * @return position of the cell within the parent tr, if not nested in a tr the value is -1.\n     */\n    get cellIndex() {\n        const parent = matchNearestParent(this, tagNameConditionPredicate(['TR']));\n        return parent !== null ? matchChildrenElements(parent, tagNameConditionPredicate(['TH', 'TD'])).indexOf(this) : -1;\n    }\n}\nregisterSubclass('th', HTMLTableCellElement);\nregisterSubclass('td', HTMLTableCellElement);\ndefinePropertyBackedAttributes(HTMLTableCellElement, {\n    headers: [(el) => el.headers.value, (el, value) => (el.headers.value = value)],\n});\n// Reflected Properties\n// HTMLTableCellElement.abbr => string, reflected attribute\n// HTMLTableCellElement.colSpan => number, reflected attribute\n// HTMLTableCellElement.rowSpan => number, reflected attribute\n// HTMLTableCellElement.scope => string, reflected attribute\nreflectProperties([{ abbr: [''] }, { colSpan: [1] }, { rowSpan: [1] }, { scope: [''] }], HTMLTableCellElement);\n//# sourceMappingURL=HTMLTableCellElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTableColElement extends HTMLElement {\n}\nregisterSubclass('col', HTMLTableColElement);\n// Reflected Properties\n// HTMLTableColElement.span => number, reflected attribute\nreflectProperties([{ span: [1] }], HTMLTableColElement);\n//# sourceMappingURL=HTMLTableColElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchChildElement, matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nimport { toUpper } from '../../utils';\nconst removeElement = (element) => element && element.remove();\nconst insertBeforeElementsWithTagName = (parent, element, tagNames) => {\n    console.assert(tagNames.every(t => t === toUpper(t)), 'tagNames must be all uppercase.');\n    const insertBeforeElement = matchChildElement(parent, (element) => !tagNames.includes(element.tagName));\n    if (insertBeforeElement) {\n        parent.insertBefore(element, insertBeforeElement);\n    }\n    else {\n        parent.appendChild(element);\n    }\n};\nexport class HTMLTableElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @return first matching caption Element or null if none exists.\n     */\n    get caption() {\n        return matchChildElement(this, tagNameConditionPredicate(['CAPTION']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @param element new caption element to replace the existing, or become the first element child.\n     */\n    set caption(newElement) {\n        if (newElement && newElement.tagName === 'CAPTION') {\n            // If a correct object is given,\n            // it is inserted in the tree as the first child of this element and the first <caption>\n            // that is a child of this element is removed from the tree, if any.\n            removeElement(this.caption);\n            this.insertBefore(newElement, this.firstElementChild);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tHead() {\n        return matchChildElement(this, tagNameConditionPredicate(['THEAD']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new thead element to insert in this table.\n     */\n    set tHead(newElement) {\n        if (newElement && newElement.tagName === 'THEAD') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is\n            // neither a <caption>, nor a <colgroup>, or as the last child if there is no such element.\n            // Additionally, the first <thead> that is a child of this element is removed from the tree, if any.\n            removeElement(this.tHead);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tFoot() {\n        return matchChildElement(this, tagNameConditionPredicate(['TFOOT']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new tfoot element to insert in this table.\n     */\n    set tFoot(newElement) {\n        if (newElement && newElement.tagName === 'TFOOT') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is neither a <caption>,\n            // a <colgroup>, nor a <thead>, or as the last child if there is no such element, and the first <tfoot> that is a child of\n            // this element is removed from the tree, if any.\n            removeElement(this.tFoot);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP', 'THEAD']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tr' tagname elements\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tbody' tagname elements\n     */\n    get tBodies() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TBODY']));\n    }\n}\nregisterSubclass('table', HTMLTableElement);\n// Unimplemented Properties\n// HTMLTableElement.sortable => boolean\n// Unimplemented Methods\n// HTMLTableElement.createTHead()\n// HTMLTableElement.deleteTHead()\n// HTMLTableElement.createTFoot()\n// HTMLTableElement.deleteTFoot()\n// HTMLTableElement.createCaption()\n// HTMLTableElement.deleteCaption()\n// HTMLTableElement.insertRow()\n// HTMLTableElement.deleteRow()\n//# sourceMappingURL=HTMLTableElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nconst TABLE_SECTION_TAGNAMES = 'TABLE TBODY THEAD TFOOT'.split(' ');\nconst indexInAncestor = (element, isValidAncestor) => {\n    const parent = matchNearestParent(element, isValidAncestor);\n    // TODO(KB): This is either a HTMLTableElement or HTMLTableSectionElement.\n    return parent === null ? -1 : parent.rows.indexOf(element);\n};\nexport class HTMLTableRowElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return td and th elements that are children of this row.\n     */\n    get cells() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TD', 'TH']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a table, if not nested within in a table the value is -1.\n     */\n    get rowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(['TABLE']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a parent section, if not nested directly in a section the value is -1.\n     */\n    get sectionRowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(TABLE_SECTION_TAGNAMES));\n    }\n    /**\n     * Removes the cell in provided position of this row.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @param index position of the cell in the row to remove.\n     */\n    deleteCell(index) {\n        const cell = this.cells[index];\n        cell && cell.remove();\n    }\n    /**\n     * Insert a new cell ('td') in the row at a specified position.\n     * @param index position in the children to insert before.\n     * @return newly inserted td element.\n     */\n    insertCell(index) {\n        const cells = this.cells;\n        const td = this.ownerDocument.createElement('td');\n        if (index < 0 || index >= cells.length) {\n            this.appendChild(td);\n        }\n        else {\n            this.insertBefore(td, this.children[index]);\n        }\n        return td;\n    }\n}\nregisterSubclass('tr', HTMLTableRowElement);\n//# sourceMappingURL=HTMLTableRowElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableSectionElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @return All rows (tr elements) within the table section.\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * Remove a node in a specified position from the section.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the section to remove the node of.\n     */\n    deleteRow(index) {\n        const rows = this.rows;\n        if (index >= 0 || index <= rows.length) {\n            rows[index].remove();\n        }\n    }\n    /**\n     * Insert a new row ('tr') in the row at a specified position.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the children to insert before.\n     * @return newly inserted tr element.\n     */\n    insertRow(index) {\n        const rows = this.rows;\n        const tr = this.ownerDocument.createElement('tr');\n        if (index < 0 || index >= rows.length) {\n            this.appendChild(tr);\n        }\n        else {\n            this.insertBefore(tr, this.children[index]);\n        }\n        return tr;\n    }\n}\nregisterSubclass('thead', HTMLTableSectionElement);\nregisterSubclass('tfoot', HTMLTableSectionElement);\nregisterSubclass('tbody', HTMLTableSectionElement);\n//# sourceMappingURL=HTMLTableSectionElement.js.map","// <blockquote> and <q>\n/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTimeElement extends HTMLElement {\n}\nregisterSubclass('time', HTMLTimeElement);\n// Reflected Properties\n// HTMLTimeElement.dateTime => string, reflected attribute\nreflectProperties([{ dateTime: [''] }], HTMLTimeElement);\n//# sourceMappingURL=HTMLTimeElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nexport class HTMLDataListElement extends HTMLElement {\n    /**\n     * Getter returning option elements that are direct children of a HTMLDataListElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDataListElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.childNodes.filter((node) => node.nodeName === 'OPTION');\n    }\n}\nregisterSubclass('datalist', HTMLDataListElement);\n/**\n * HTMLDataListElement.options Read only\n * Is a HTMLCollection representing a collection of the contained option elements.\n */\n/**\n * <label for=\"myBrowser\">Choose a browser from this list:</label>\n * <input list=\"browsers\" id=\"myBrowser\" name=\"myBrowser\" />\n * <datalist id=\"browsers\">\n *   <option value=\"Chrome\">\n *   <option value=\"Firefox\">\n *   <option value=\"Internet Explorer\">\n *   <option value=\"Opera\">\n *   <option value=\"Safari\">\n *   <option value=\"Microsoft Edge\">\n * </datalist>\n */\n//# sourceMappingURL=HTMLDataListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Node } from './Node';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/CharacterData\nexport class CharacterData extends Node {\n    constructor(data, nodeType, nodeName, ownerDocument, overrideIndex) {\n        super(nodeType, nodeName, ownerDocument, overrideIndex);\n        this[38 /* data */] = data;\n        this[8 /* creationFormat */] = [this[7 /* index */], nodeType, storeString(nodeName), storeString(data), 0];\n    }\n    // Unimplemented Methods\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // NonDocumentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // CharacterData.appendData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/appendData\n    // CharacterData.deleteData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/deleteData\n    // CharacterData.insertData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/insertData\n    // CharacterData.replaceData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/replaceData\n    // CharacterData.substringData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/substringData\n    /**\n     * @return Returns the string contained in private CharacterData.data\n     */\n    get data() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set data(value) {\n        const oldValue = this.data;\n        this[38 /* data */] = value;\n        mutate(this.ownerDocument, {\n            target: this,\n            type: 1 /* CHARACTER_DATA */,\n            value,\n            oldValue,\n        }, [1 /* CHARACTER_DATA */, this[7 /* index */], storeString(value)]);\n    }\n    /**\n     * @return Returns the size of the string contained in CharacterData.data\n     */\n    get length() {\n        return this[38 /* data */].length;\n    }\n    /**\n     * @return Returns the string contained in CharacterData.data\n     */\n    get nodeValue() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set nodeValue(value) {\n        this.data = value;\n    }\n}\n38 /* data */;\n//# sourceMappingURL=CharacterData.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Text\nexport class Text extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 3 /* TEXT_NODE */, '#text', ownerDocument, overrideIndex);\n    }\n    // Unimplemented Properties\n    // Text.isElementContentWhitespace – https://developer.mozilla.org/en-US/docs/Web/API/Text/isElementContentWhitespace\n    // Text.wholeText – https://developer.mozilla.org/en-US/docs/Web/API/Text/wholeText\n    // Text.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Text/assignedSlot\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Text Node with the same data as the Text to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createTextNode(this.data);\n    }\n    /**\n     * Breaks Text node into two nodes at the specified offset, keeping both nodes in the tree as siblings.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Text/splitText\n     * @param offset number position to split text at.\n     * @return Text Node after the offset.\n     */\n    splitText(offset) {\n        const remainderTextNode = new Text(this.data.slice(offset, this.data.length), this.ownerDocument);\n        const parentNode = this.parentNode;\n        this.nodeValue = this.data.slice(0, offset);\n        if (parentNode !== null) {\n            // When this node is attached to the DOM, the remainder text needs to be inserted directly after.\n            const parentChildNodes = parentNode.childNodes;\n            const insertBeforePosition = parentChildNodes.indexOf(this) + 1;\n            const insertBeforeNode = parentChildNodes.length >= insertBeforePosition ? parentChildNodes[insertBeforePosition] : null;\n            return parentNode.insertBefore(remainderTextNode, insertBeforeNode);\n        }\n        return remainderTextNode;\n    }\n}\n//# sourceMappingURL=Text.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Comment\nexport class Comment extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 8 /* COMMENT_NODE */, '#comment', ownerDocument, overrideIndex);\n    }\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Comment Node with the same data as the Comment to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createComment(this.data);\n    }\n}\n//# sourceMappingURL=Comment.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ParentNode } from './ParentNode';\nimport { store as storeString } from '../strings';\nexport class DocumentFragment extends ParentNode {\n    constructor(ownerDocument, overrideIndex) {\n        super(11 /* DOCUMENT_FRAGMENT_NODE */, '#document-fragment', ownerDocument, overrideIndex);\n        this[8 /* creationFormat */] = [this[7 /* index */], 11 /* DOCUMENT_FRAGMENT_NODE */, storeString(this.nodeName), 0, 0];\n    }\n    /**\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return DocumentFragment containing childNode clones of the DocumentFragment requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createDocumentFragment();\n        if (deep) {\n            this.childNodes.forEach(child => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n}\n//# sourceMappingURL=DocumentFragment.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { get } from './nodes';\nexport class Event {\n    constructor(type, opts) {\n        this[_a] = false;\n        this[_b] = false;\n        this.type = type;\n        this.bubbles = !!opts.bubbles;\n        this.cancelable = !!opts.cancelable;\n    }\n    stopPropagation() {\n        this[50 /* stop */] = true;\n    }\n    stopImmediatePropagation() {\n        this[51 /* end */] = this[50 /* stop */] = true;\n    }\n    preventDefault() {\n        this.defaultPrevented = true;\n    }\n    /** Event.initEvent() is deprecated but supported here for legacy usage.  */\n    initEvent(type, bubbles, cancelable) {\n        this.type = type;\n        this.bubbles = bubbles;\n        this.cancelable = cancelable;\n    }\n}\n_a = 50 /* stop */, _b = 51 /* end */;\n/**\n * Determine the target for a TransferrableEvent.\n * @param document Event intended within the scope of this document.\n * @param event\n */\nconst targetFromTransfer = (document, event) => {\n    if (event[13 /* target */] !== null) {\n        const index = event[13 /* target */][0];\n        // If the target was sent as index 0, use the current document.\n        return get(index !== 0 ? index : document[7 /* index */]);\n    }\n    return null;\n};\n/**\n *\n * @param document\n * @param event\n */\nconst touchListFromTransfer = (document, event, key) => {\n    if (event[key] !== undefined) {\n        const touchListKeys = Object.keys(event[key]);\n        const list = {\n            length: touchListKeys.length,\n            item(index) {\n                return this[index] || null;\n            },\n        };\n        touchListKeys.forEach(touchListKey => {\n            const numericKey = Number(touchListKey);\n            const transferredTouch = event[key][numericKey];\n            list[numericKey] = {\n                identifier: transferredTouch[0],\n                screenX: transferredTouch[1],\n                screenY: transferredTouch[2],\n                clientX: transferredTouch[3],\n                clientY: transferredTouch[4],\n                pageX: transferredTouch[5],\n                pageY: transferredTouch[6],\n                target: get(transferredTouch[7] !== 0 ? transferredTouch[7] : document[7 /* index */]),\n            };\n        });\n        return list;\n    }\n    return undefined;\n};\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 1 /* EVENT */) {\n            return;\n        }\n        const event = data[39 /* event */];\n        const node = get(event[7 /* index */]);\n        if (node !== null) {\n            node.dispatchEvent(Object.assign(new Event(event[12 /* type */], { bubbles: event[25 /* bubbles */], cancelable: event[26 /* cancelable */] }), {\n                cancelBubble: event[27 /* cancelBubble */],\n                defaultPrevented: event[29 /* defaultPrevented */],\n                eventPhase: event[30 /* eventPhase */],\n                isTrusted: event[31 /* isTrusted */],\n                returnValue: event[32 /* returnValue */],\n                target: targetFromTransfer(global.document, event),\n                timeStamp: event[33 /* timeStamp */],\n                scoped: event[34 /* scoped */],\n                keyCode: event[35 /* keyCode */],\n                pageX: event[60 /* pageX */],\n                pageY: event[61 /* pageY */],\n                offsetX: event[65 /* offsetX */],\n                offsetY: event[66 /* offsetY */],\n                touches: touchListFromTransfer(global.document, event, 62 /* touches */),\n                changedTouches: touchListFromTransfer(global.document, event, 63 /* changedTouches */),\n            }));\n        }\n    });\n}\n//# sourceMappingURL=Event.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { get } from './nodes';\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 4 /* SYNC */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        const node = get(sync[7 /* index */]);\n        if (node) {\n            node.ownerDocument[58 /* allowTransfer */] = false;\n            // Modify the private backing ivar of `value` property to avoid mutation/sync cycle.\n            node.value = sync[21 /* value */];\n            node.ownerDocument[58 /* allowTransfer */] = true;\n        }\n    });\n}\n//# sourceMappingURL=SyncValuePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 5 /* RESIZE */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        if (sync) {\n            global.innerWidth = sync[0];\n            global.innerHeight = sync[1];\n        }\n    });\n}\n//# sourceMappingURL=ResizePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element, NS_NAME_TO_CLASS } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport './HTMLAnchorElement';\nimport './HTMLButtonElement';\nimport './HTMLCanvasElement';\nimport './HTMLDataElement';\nimport './HTMLDataListElement';\nimport './HTMLEmbedElement';\nimport './HTMLFieldSetElement';\nimport './HTMLFormElement';\nimport './HTMLIFrameElement';\nimport './HTMLImageElement';\nimport './HTMLInputElement';\nimport './HTMLLabelElement';\nimport './HTMLLinkElement';\nimport './HTMLMapElement';\nimport './HTMLMeterElement';\nimport './HTMLModElement';\nimport './HTMLOListElement';\nimport './HTMLOptionElement';\nimport './HTMLProgressElement';\nimport './HTMLQuoteElement';\nimport './HTMLScriptElement';\nimport './HTMLSelectElement';\nimport './HTMLSourceElement';\nimport './HTMLStyleElement';\nimport './HTMLTableCellElement';\nimport './HTMLTableColElement';\nimport './HTMLTableElement';\nimport './HTMLTableRowElement';\nimport './HTMLTableSectionElement';\nimport './HTMLTimeElement';\nimport { matchChildElement } from './matchElements';\nimport { Text } from './Text';\nimport { Comment } from './Comment';\nimport { toLower } from '../../utils';\nimport { DocumentFragment } from './DocumentFragment';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { propagate as propagateEvents } from '../Event';\nimport { propagate as propagateSyncValues } from '../SyncValuePropagation';\nimport { propagate as propagateResize } from '../ResizePropagation';\nimport { set as setPhase } from '../phase';\nconst DOCUMENT_NAME = '#document';\nexport class Document extends Element {\n    constructor(global) {\n        super(9 /* DOCUMENT_NODE */, DOCUMENT_NAME, HTML_NAMESPACE, null);\n        this[_a] = true;\n        // Element uppercases its nodeName, but Document doesn't.\n        this.nodeName = DOCUMENT_NAME;\n        this.documentElement = this; // TODO(choumx): Should be the <html> element.\n        this.defaultView = Object.assign(global, {\n            document: this,\n            addEventListener: this.addEventListener.bind(this),\n            removeEventListener: this.removeEventListener.bind(this),\n        });\n    }\n    /**\n     * Observing the Document indicates it's attached to a main thread\n     * version of the document.\n     *\n     * Each mutation needs to be transferred, synced values need to propagate.\n     */\n    [(_a = 58 /* allowTransfer */, 59 /* observe */)]() {\n        setPhase(1 /* Hydrating */);\n        propagateEvents(this.defaultView);\n        propagateSyncValues(this.defaultView);\n        propagateResize(this.defaultView);\n    }\n    /**\n     * Hydrate\n     * @param strings\n     * @param skeleton\n     */\n    [64 /* hydrateNode */](strings, skeleton) {\n        switch (skeleton[0 /* nodeType */]) {\n            case 3 /* TEXT_NODE */:\n                return new Text(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            case 8 /* COMMENT_NODE */:\n                return new Comment(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            default:\n                const namespaceURI = strings[skeleton[6 /* namespaceURI */]] || HTML_NAMESPACE;\n                const localName = strings[skeleton[1 /* localOrNodeName */]];\n                const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n                const node = new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this, skeleton[7 /* index */]);\n                (skeleton[2 /* attributes */] || []).forEach(attribute => \n                // AttributeNamespaceURI = strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE\n                node.setAttributeNS(strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE, strings[attribute[1]], strings[attribute[2]]));\n                (skeleton[4 /* childNodes */] || []).forEach(child => node.appendChild(this[64 /* hydrateNode */](strings, child)));\n                return node;\n        }\n    }\n    createElement(name) {\n        return this.createElementNS(HTML_NAMESPACE, toLower(name));\n    }\n    createElementNS(namespaceURI, localName) {\n        const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n        return new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this);\n    }\n    /**\n     * Note: Unlike DOM, Event subclasses (e.g. MouseEvent) are not instantiated based on `type`.\n     * @param type\n     */\n    createEvent(type) {\n        return new Event(type, { bubbles: false, cancelable: false });\n    }\n    createTextNode(text) {\n        return new Text(text, this);\n    }\n    createComment(text) {\n        return new Comment(text, this);\n    }\n    createDocumentFragment() {\n        return new DocumentFragment(this);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\n     * @return Element with matching id attribute.\n     */\n    getElementById(id) {\n        return matchChildElement(this.body, element => element.id === id);\n    }\n}\n//# sourceMappingURL=Document.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nimport { transfer } from './MutationTransfer';\n/**\n * @param document\n * @param location\n * @param data\n */\nexport function createStorage(document, location, data) {\n    const storage = Object.assign(Object.create(null), data);\n    // Define properties on a prototype-less object instead of a class so that\n    // it behaves more like normal objects, e.g. bracket notation and JSON.stringify.\n    const define = Object.defineProperty;\n    define(storage, 'length', {\n        get: function () {\n            return Object.keys(this).length;\n        },\n    });\n    define(storage, 'key', {\n        value: function (n) {\n            const keys = Object.keys(this);\n            return n >= 0 && n < keys.length ? keys[n] : null;\n        },\n    });\n    define(storage, 'getItem', {\n        value: function (key) {\n            const value = this[key];\n            return value ? value : null;\n        },\n    });\n    define(storage, 'setItem', {\n        value: function (key, value) {\n            const stringValue = String(value);\n            this[key] = stringValue;\n            transfer(document, [12 /* STORAGE */, 2 /* SET */, location, store(key), store(stringValue)]);\n        },\n    });\n    define(storage, 'removeItem', {\n        value: function (key) {\n            delete this[key];\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                store(key),\n                0,\n            ]);\n        },\n    });\n    define(storage, 'clear', {\n        value: function () {\n            Object.keys(this).forEach(key => {\n                delete this[key];\n            });\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                0,\n                0,\n            ]);\n        },\n    });\n    return storage;\n}\n//# sourceMappingURL=Storage.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store as storeString } from './strings';\nimport { appendKeys as addCssKeys } from './css/CSSStyleDeclaration';\nimport { createStorage } from './Storage';\nimport { appendGlobalEventProperties } from './dom/HTMLElement';\nexport function initialize(document, strings, hydrateableNode, cssKeys, globalEventHandlerKeys, [innerWidth, innerHeight], localStorageData, sessionStorageData) {\n    addCssKeys(cssKeys);\n    appendGlobalEventProperties(globalEventHandlerKeys);\n    strings.forEach(storeString);\n    (hydrateableNode[4 /* childNodes */] || []).forEach(child => document.body.appendChild(document[64 /* hydrateNode */](strings, child)));\n    const window = document.defaultView;\n    window.innerWidth = innerWidth;\n    window.innerHeight = innerHeight;\n    window.localStorage = createStorage(document, 0 /* Local */, localStorageData);\n    window.sessionStorage = createStorage(document, 1 /* Session */, sessionStorageData);\n}\n//# sourceMappingURL=initialize.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { HTMLElement } from './dom/HTMLElement';\nimport { SVGElement } from './dom/SVGElement';\nimport { HTMLAnchorElement } from './dom/HTMLAnchorElement';\nimport { HTMLButtonElement } from './dom/HTMLButtonElement';\nimport { HTMLCanvasElement } from './dom/HTMLCanvasElement';\nimport { HTMLDataElement } from './dom/HTMLDataElement';\nimport { HTMLEmbedElement } from './dom/HTMLEmbedElement';\nimport { HTMLFieldSetElement } from './dom/HTMLFieldSetElement';\nimport { HTMLFormElement } from './dom/HTMLFormElement';\nimport { HTMLIFrameElement } from './dom/HTMLIFrameElement';\nimport { HTMLImageElement } from './dom/HTMLImageElement';\nimport { HTMLInputElement } from './dom/HTMLInputElement';\nimport { HTMLLabelElement } from './dom/HTMLLabelElement';\nimport { HTMLLinkElement } from './dom/HTMLLinkElement';\nimport { HTMLMapElement } from './dom/HTMLMapElement';\nimport { HTMLMeterElement } from './dom/HTMLMeterElement';\nimport { HTMLModElement } from './dom/HTMLModElement';\nimport { HTMLOListElement } from './dom/HTMLOListElement';\nimport { HTMLOptionElement } from './dom/HTMLOptionElement';\nimport { HTMLProgressElement } from './dom/HTMLProgressElement';\nimport { HTMLQuoteElement } from './dom/HTMLQuoteElement';\nimport { HTMLScriptElement } from './dom/HTMLScriptElement';\nimport { HTMLSelectElement } from './dom/HTMLSelectElement';\nimport { HTMLSourceElement } from './dom/HTMLSourceElement';\nimport { HTMLStyleElement } from './dom/HTMLStyleElement';\nimport { HTMLTableCellElement } from './dom/HTMLTableCellElement';\nimport { HTMLTableColElement } from './dom/HTMLTableColElement';\nimport { HTMLTableElement } from './dom/HTMLTableElement';\nimport { HTMLTableRowElement } from './dom/HTMLTableRowElement';\nimport { HTMLTableSectionElement } from './dom/HTMLTableSectionElement';\nimport { HTMLTimeElement } from './dom/HTMLTimeElement';\nimport { Document } from './dom/Document';\nimport { initialize } from './initialize';\nimport { MutationObserver } from './MutationObserver';\nimport { Event as WorkerDOMEvent } from './Event';\nimport { Text } from './dom/Text';\nimport { HTMLDataListElement } from './dom/HTMLDataListElement';\nimport { CharacterData } from './dom/CharacterData';\nimport { Comment } from './dom/Comment';\nimport { DOMTokenList } from './dom/DOMTokenList';\nimport { DocumentFragment } from './dom/DocumentFragment';\nimport { Element } from './dom/Element';\nconst globalScope = {\n    innerWidth: 0,\n    innerHeight: 0,\n    CharacterData,\n    Comment,\n    DOMTokenList,\n    Document,\n    DocumentFragment,\n    Element,\n    HTMLAnchorElement,\n    HTMLButtonElement,\n    HTMLCanvasElement,\n    HTMLDataElement,\n    HTMLDataListElement,\n    HTMLElement,\n    HTMLEmbedElement,\n    HTMLFieldSetElement,\n    HTMLFormElement,\n    HTMLIFrameElement,\n    HTMLImageElement,\n    HTMLInputElement,\n    HTMLLabelElement,\n    HTMLLinkElement,\n    HTMLMapElement,\n    HTMLMeterElement,\n    HTMLModElement,\n    HTMLOListElement,\n    HTMLOptionElement,\n    HTMLProgressElement,\n    HTMLQuoteElement,\n    HTMLScriptElement,\n    HTMLSelectElement,\n    HTMLSourceElement,\n    HTMLStyleElement,\n    HTMLTableCellElement,\n    HTMLTableColElement,\n    HTMLTableElement,\n    HTMLTableRowElement,\n    HTMLTableSectionElement,\n    HTMLTimeElement,\n    SVGElement,\n    Text,\n    Event: WorkerDOMEvent,\n    MutationObserver,\n};\nconst noop = () => void 0;\n// WorkerDOM.Document.defaultView ends up being the window object.\n// React requires the classes to exist off the window object for instanceof checks.\nexport const workerDOM = (function (postMessage, addEventListener, removeEventListener) {\n    const document = new Document(globalScope);\n    // TODO(choumx): Avoid polluting Document's public API.\n    document.postMessage = postMessage;\n    document.addGlobalEventListener = addEventListener;\n    document.removeGlobalEventListener = removeEventListener;\n    // TODO(choumx): Remove once defaultView contains all native worker globals.\n    // Canvas's use of native OffscreenCanvas checks the existence of the property\n    // on the WorkerDOMGlobalScope.\n    globalScope.OffscreenCanvas = self['OffscreenCanvas'];\n    globalScope.ImageBitmap = self['ImageBitmap'];\n    document.isConnected = true;\n    document.appendChild((document.body = document.createElement('body')));\n    return document.defaultView;\n})(postMessage.bind(self) || noop, addEventListener.bind(self) || noop, removeEventListener.bind(self) || noop);\nexport const hydrate = initialize;\n//# sourceMappingURL=index.js.map"],"names":["toLower","value","toLowerCase","toUpper","toUpperCase","containsIndexOf","pos","keyValueString","key","tagNameConditionPredicate","tagNames","element","includes","tagName","elementPredicate","node","nodeType","matchChildrenElements","conditionPredicate","matchingElements","childNodes","forEach","child","push","matchChildElement","returnValue","children","some","grandChildMatch","matchNearestParent","parentNode","matchAttrReference","attrSelector","equalPos","indexOf","selectorLength","length","caseInsensitive","charAt","endPos","equalSuffix","possibleSuffixes","attrString","substring","rawValue","rawAttrValue","getAttribute","casedValue","casedAttrValue","split","startsWith","endsWith","hasAttribute","phase","set","newPhase","count","transfer","mapping","Map","storeOverride","override","Math","max","store","undefined","get","index","consume","copy","has","strings","pending","pendingMutations","document","mutation","concat","Promise","resolve","then","_","nodes","Uint16Array","consumeNodes","reduce","acc","buffer","mutations","postMessage","consumeStrings","setPhase","_a","observers","matchesIndex","observerTarget","target","pushMutation","observer","record","pushRecord","callback","takeRecords","mutate","transferable","t","MutationObserver","options","disconnect","splice","records","propagate","property","Node","nodeName","ownerDocument","overrideIndex","isConnected","storeOverrideNodeMapping","storeNodeMapping","textContent","childNode","otherNode","contains","referenceNode","slice","insertBefore","appendChild","remove","addedNodes","nextSibling","type","previousSibling","exists","removedNodes","newChild","oldChild","removeChild","handler","lowerType","storedType","storeString","handlers","event","currentTarget","iterator","call","cancelable","bubbles","defaultPrevented","getTextContent","parentChildNodes","ParentNode","selector","matches","querySelectorAll","filter","find","selectorBracketIndexes","selectorHasAttr","elementSelector","matcher","id","substr","classList","localName","synchronizedAccessor","defineOn","accessorKey","propertyName","Object","defineProperty","prototype","enumerable","configurable","DOMTokenList","attributeName","bind","token","oldValue","tokens","Set","newToken","delete","add","force","namespaceURI","join","collection","newValue","trim","toString","attributes","map","attr","name","matchPredicate","hyphenateKey","replace","appendKeys","keys","keysToAppend","isNaN","CSSStyleDeclaration","hasOwnProperty","previousPrototypeLength","writable","hyphenatedKey","defineProperties","getPropertyValue","setProperty","mutated","cssText","stringValue","values","reflectProperties","properties","pair","defaultValue","keywords","isBooleanAttribute","attributeValue","castableValue","Number","String","setAttribute","removeAttribute","HTML_NAMESPACE","SVG_NAMESPACE","arr_back","arr","kMarkupPattern","kAttributePattern","kSelfClosingElements","AREA","BASE","BR","COL","HR","IMG","INPUT","LINK","META","PARAM","SOURCE","TRACK","WBR","kElementsClosedByOpening","LI","DT","DD","P","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIV","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","MAIN","NAV","OL","PRE","SECTION","TABLE","UL","RT","RP","OPTGROUP","OPTION","THEAD","TBODY","TFOOT","TR","TD","TH","kElementsClosedByClosing","A","B","I","kBlockTextElements","SCRIPT","NOSCRIPT","STYLE","parse","data","rootElement","root","createElementNS","currentParent","currentNamespace","stack","lastTextPos","match","tagsClosed","Error","exec","commentContents","beginningSlash","matchAttributes","endSlash","text","createTextNode","lastIndex","createComment","normalizedTagName","pop","childToAppend","attMatch","attrName","attrValue","closeMarkup","valid","wrapper","firstChild","NS_NAME_TO_CLASS","registerSubclass","subclass","namespace","definePropertyBackedAttributes","sub","create","assign","ElementKind","VOID_ELEMENTS","Element","style","kind","VOID","NORMAL","setAttributeNS","getAttributeNS","removeAttributeNS","hasAttributeNS","valueAsString","propertyBacked","constructor","matchAttrPredicate","attributeNamespace","findIndex","names","inputClassList","inputClassName","lowerTagName","deep","clone","cloneNode","left","top","right","bottom","x","y","width","height","messageHandler","removeGlobalEventListener","transferredBoundingClientRect","addGlobalEventListener","setTimeout","tag","start","attrsToString","contents","innerHTML","outerHTML","html","n","_classList","class","el","appendGlobalEventProperties","HTMLElement","normalizedKey","stored","removeEventListener","addEventListener","arguments","accessKey","contentEditable","dir","lang","title","draggable","hidden","noModule","spellcheck","translate","SVGElement","HTMLAnchorElement","href","_relList","rel","relList","hreflang","media","HTMLButtonElement","formAction","formEnctype","formMethod","formTarget","autofocus","disabled","f32","Float32Array","u16","isSmallInt","num","serializeTransferrableObject","args","serialized","i","arg","Array","isArray","serializedArray","serializedObject","CanvasGradient","offset","color","CanvasPattern","OffscreenCanvasPolyfill","canvas","contextType","context","OffscreenCanvasRenderingContext2DPolyfill","objectIndex","canvasElement","lineDash","fnName","objectId","creationMethod","creationArgs","w","h","maxWidth","angle","a","b","c","d","e","f","radius","startAngle","endAngle","anticlockwise","x1","y1","x2","y2","radiusX","radiusY","rotation","cp1x","cp1y","cp2x","cp2y","cpx","cpy","pathOrFillRule","fillRule","transformOrA","bOrC","cOrD","dOrE","eOrF","x0","y0","gradientId","createObjectReference","r0","r1","image","repetition","patternId","dx","dy","indexTracker","retrieveImageBitmap","callIndex","transferredImageBitmap","_b","FakeNativeCanvasPattern","instance","pattern","getContext","createPattern","deferredUpgrades","WeakMap","CanvasRenderingContext2DShim","queue","upgraded","unresolvedCalls","OffscreenCanvas","defaultView","implementation","polyfillUsed","getOffscreenCanvasAsync","deferred","isTestMode","upgradePromise","transferredOffscreenCanvas","goodImplementation","maybeUpgradeImplementation","flushQueue","isSetter","delegateFunc","segments","ImageBitmap","degradeImplementation","fakePattern","antiClockwise","path","pathOrX","xOrY","yOrFillRule","imagedataOrWidth","sx","sy","sw","sh","imageData","dirtyX","dirtyY","dirtyWidth","dirtyHeight","delegateSetter","delegateGetter","HTMLCanvasElement","HTMLDataElement","HTMLEmbedElement","src","MATCHING_CHILD_ELEMENT_TAGNAMES","HTMLFormControlsCollectionMixin","HTMLFieldSetElement","HTMLFormElement","elements","method","action","enctype","acceptCharset","autocomplete","autocapitalize","HTMLIFrameElement","_sandbox","sandbox","allow","allowFullscreen","csp","referrerPolicy","srcdoc","HTMLImageElement","alt","crossOrigin","isMap","sizes","srcset","useMap","HTMLInputLabelsMixin","for","HTMLInputElement","date","getFullYear","m","getMonth","getDate","str","components","Date","parseInt","stringToDate","invalid","getTime","TypeError","dateToString","NaN","accept","defaultChecked","dirName","formEncType","maxLength","min","multiple","placeholder","readOnly","required","size","step","HTMLLabelElement","htmlFor","getElementById","HTMLLinkElement","as","HTMLMapElement","HTMLMeterElement","high","low","optimum","HTMLModElement","cite","datetime","HTMLOListElement","reversed","HTMLOptionElement","label","selected","defaultSelected","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","charset","async","defer","isOptionPredicate","isSelectedOptionPredicate","HTMLSelectElement","firstSelectedChild","selectedIndex","HTMLSourceElement","HTMLStyleElement","HTMLTableCellElement","_headers","parent","headers","abbr","colSpan","rowSpan","scope","HTMLTableColElement","span","removeElement","insertBeforeElementsWithTagName","insertBeforeElement","HTMLTableElement","newElement","caption","firstElementChild","tHead","tFoot","TABLE_SECTION_TAGNAMES","indexInAncestor","isValidAncestor","rows","HTMLTableRowElement","cell","cells","td","createElement","HTMLTableSectionElement","tr","HTMLTimeElement","dateTime","HTMLDataListElement","CharacterData","Text","remainderTextNode","nodeValue","insertBeforePosition","insertBeforeNode","Comment","DocumentFragment","createDocumentFragment","Event","opts","targetFromTransfer","touchListFromTransfer","touchListKeys","list","item","touchListKey","numericKey","transferredTouch","identifier","screenX","screenY","clientX","clientY","pageX","pageY","global","dispatchEvent","cancelBubble","eventPhase","isTrusted","timeStamp","scoped","keyCode","offsetX","offsetY","touches","changedTouches","sync","innerWidth","innerHeight","DOCUMENT_NAME","Document","documentElement","propagateEvents","propagateSyncValues","propagateResize","skeleton","attribute","body","createStorage","location","storage","define","initialize","hydrateableNode","cssKeys","globalEventHandlerKeys","localStorageData","sessionStorageData","addCssKeys","window","localStorage","sessionStorage","globalScope","WorkerDOMEvent","noop","workerDOM","self","hydrate"],"mappings":"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"}